448a965e740d47efe58ef5a42683f1d4
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
// Mock all dependencies
globals_1.jest.mock('fastmcp');
globals_1.jest.mock('zod');
globals_1.jest.mock('../../src/client/n8nClient.js');
globals_1.jest.mock('../../src/tools/workflow.js');
globals_1.jest.mock('../../src/tools/projects.js');
globals_1.jest.mock('../../src/tools/users.js');
globals_1.jest.mock('../../src/tools/variables.js');
globals_1.jest.mock('../../src/tools/executions.js');
globals_1.jest.mock('../../src/tools/tags.js');
globals_1.jest.mock('../../src/tools/credentials.js');
globals_1.jest.mock('../../src/tools/audit.js');
globals_1.jest.mock('../../src/transport/transportConfig.js');
globals_1.jest.mock('../../src/transport/sseTransport.js');
const fastmcp_1 = require("fastmcp");
(0, globals_1.describe)('src/index-fastmcp.ts - FastMCP Server Entry Point', () => {
    let mockFastMCP;
    let mockN8nClient;
    let mockConsoleLog;
    let mockConsoleError;
    let originalProcessExit;
    let originalProcessOn;
    // Mock tool creation functions
    const mockCreateWorkflowTools = globals_1.jest.fn();
    const mockCreateProjectTools = globals_1.jest.fn();
    const mockCreateUserTools = globals_1.jest.fn();
    const mockCreateVariableTools = globals_1.jest.fn();
    const mockCreateExecutionTools = globals_1.jest.fn();
    const mockCreateTagTools = globals_1.jest.fn();
    const mockCreateCredentialTools = globals_1.jest.fn();
    const mockCreateAuditTools = globals_1.jest.fn();
    // Mock transport functions
    const mockDetectTransportConfig = globals_1.jest.fn();
    const mockValidateTransportConfig = globals_1.jest.fn();
    const mockGetServerUrl = globals_1.jest.fn();
    const mockCreateSSETransport = globals_1.jest.fn();
    const mockSSEUtils = {
        validateConfig: globals_1.jest.fn(),
    };
    (0, globals_1.beforeEach)(() => {
        // Mock console methods
        mockConsoleLog = globals_1.jest.spyOn(console, 'log').mockImplementation(() => { });
        mockConsoleError = globals_1.jest.spyOn(console, 'error').mockImplementation(() => { });
        // Mock process methods
        originalProcessExit = process.exit;
        originalProcessOn = process.on;
        process.exit = globals_1.jest.fn();
        process.on = globals_1.jest.fn();
        // Mock FastMCP instance
        mockFastMCP = {
            addTool: globals_1.jest.fn().mockReturnThis(),
            start: globals_1.jest.fn().mockResolvedValue(undefined),
            on: globals_1.jest.fn().mockReturnThis(),
        };
        fastmcp_1.FastMCP.mockImplementation(() => mockFastMCP);
        // Mock N8nClient
        mockN8nClient = {
            getWorkflows: globals_1.jest.fn().mockResolvedValue({ data: [] }),
        };
        // Setup mocks for imported functions
        const { createWorkflowTools } = globals_1.jest.requireMock('../../src/tools/workflow.js');
        const { createProjectTools } = globals_1.jest.requireMock('../../src/tools/projects.js');
        const { createUserTools } = globals_1.jest.requireMock('../../src/tools/users.js');
        const { createVariableTools } = globals_1.jest.requireMock('../../src/tools/variables.js');
        const { createExecutionTools } = globals_1.jest.requireMock('../../src/tools/executions.js');
        const { createTagTools } = globals_1.jest.requireMock('../../src/tools/tags.js');
        const { createCredentialTools } = globals_1.jest.requireMock('../../src/tools/credentials.js');
        const { createAuditTools } = globals_1.jest.requireMock('../../src/tools/audit.js');
        createWorkflowTools.mockImplementation(mockCreateWorkflowTools);
        createProjectTools.mockImplementation(mockCreateProjectTools);
        createUserTools.mockImplementation(mockCreateUserTools);
        createVariableTools.mockImplementation(mockCreateVariableTools);
        createExecutionTools.mockImplementation(mockCreateExecutionTools);
        createTagTools.mockImplementation(mockCreateTagTools);
        createCredentialTools.mockImplementation(mockCreateCredentialTools);
        createAuditTools.mockImplementation(mockCreateAuditTools);
        // Setup transport mocks
        const { detectTransportConfig, validateTransportConfig, getServerUrl } = globals_1.jest.requireMock('../../src/transport/transportConfig.js');
        const { createSSETransport, SSEUtils } = globals_1.jest.requireMock('../../src/transport/sseTransport.js');
        detectTransportConfig.mockImplementation(mockDetectTransportConfig);
        validateTransportConfig.mockImplementation(mockValidateTransportConfig);
        getServerUrl.mockImplementation(mockGetServerUrl);
        createSSETransport.mockImplementation(mockCreateSSETransport);
        SSEUtils.validateConfig = mockSSEUtils.validateConfig;
        // Clear all mocks
        globals_1.jest.clearAllMocks();
    });
    (0, globals_1.afterEach)(() => {
        // Restore original functions
        process.exit = originalProcessExit;
        process.on = originalProcessOn;
        mockConsoleLog.mockRestore();
        mockConsoleError.mockRestore();
    });
    (0, globals_1.describe)('FastMCP Server Initialization', () => {
        (0, globals_1.it)('should create FastMCP instance with correct configuration', async () => {
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
            (0, globals_1.expect)(fastmcp_1.FastMCP).toHaveBeenCalledWith({
                name: 'n8n-mcp-server',
                version: '2.0.0',
                instructions: globals_1.expect.stringContaining('This server provides comprehensive access to n8n workflows'),
            });
        });
        (0, globals_1.it)('should include comprehensive instructions in FastMCP config', async () => {
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
            const config = fastmcp_1.FastMCP.mock.calls[0][0];
            (0, globals_1.expect)(config.instructions).toContain('Key Features:');
            (0, globals_1.expect)(config.instructions).toContain('Complete workflow management');
            (0, globals_1.expect)(config.instructions).toContain('User and project management');
            (0, globals_1.expect)(config.instructions).toContain('Execution monitoring');
            (0, globals_1.expect)(config.instructions).toContain('Getting Started:');
            (0, globals_1.expect)(config.instructions).toContain('init-n8n');
        });
    });
    (0, globals_1.describe)('Tool Registration', () => {
        (0, globals_1.beforeEach)(async () => {
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
        });
        (0, globals_1.it)('should register all tool categories', () => {
            (0, globals_1.expect)(mockCreateWorkflowTools).toHaveBeenCalledWith(globals_1.expect.any(Function), mockFastMCP);
            (0, globals_1.expect)(mockCreateProjectTools).toHaveBeenCalledWith(globals_1.expect.any(Function), mockFastMCP);
            (0, globals_1.expect)(mockCreateUserTools).toHaveBeenCalledWith(globals_1.expect.any(Function), mockFastMCP);
            (0, globals_1.expect)(mockCreateVariableTools).toHaveBeenCalledWith(globals_1.expect.any(Function), mockFastMCP);
            (0, globals_1.expect)(mockCreateExecutionTools).toHaveBeenCalledWith(globals_1.expect.any(Function), mockFastMCP);
            (0, globals_1.expect)(mockCreateTagTools).toHaveBeenCalledWith(globals_1.expect.any(Function), mockFastMCP);
            (0, globals_1.expect)(mockCreateCredentialTools).toHaveBeenCalledWith(globals_1.expect.any(Function), mockFastMCP);
            (0, globals_1.expect)(mockCreateAuditTools).toHaveBeenCalledWith(globals_1.expect.any(Function), mockFastMCP);
        });
        (0, globals_1.it)('should register tools with the same server instance', () => {
            const serverInstances = [
                mockCreateWorkflowTools.mock.calls[0][1],
                mockCreateProjectTools.mock.calls[0][1],
                mockCreateUserTools.mock.calls[0][1],
                mockCreateVariableTools.mock.calls[0][1],
                mockCreateExecutionTools.mock.calls[0][1],
                mockCreateTagTools.mock.calls[0][1],
                mockCreateCredentialTools.mock.calls[0][1],
                mockCreateAuditTools.mock.calls[0][1],
            ];
            // All should reference the same server instance
            serverInstances.forEach(instance => {
                (0, globals_1.expect)(instance).toBe(mockFastMCP);
            });
        });
        (0, globals_1.it)('should pass client getter function to all tool creators', () => {
            const clientGetters = [
                mockCreateWorkflowTools.mock.calls[0][0],
                mockCreateProjectTools.mock.calls[0][0],
                mockCreateUserTools.mock.calls[0][0],
                mockCreateVariableTools.mock.calls[0][0],
                mockCreateExecutionTools.mock.calls[0][0],
                mockCreateTagTools.mock.calls[0][0],
                mockCreateCredentialTools.mock.calls[0][0],
                mockCreateAuditTools.mock.calls[0][0],
            ];
            // All should be functions
            clientGetters.forEach(getter => {
                (0, globals_1.expect)(typeof getter).toBe('function');
            });
            // All should return null initially (no client set)
            clientGetters.forEach(getter => {
                (0, globals_1.expect)(getter()).toBeNull();
            });
        });
    });
    (0, globals_1.describe)('Custom Tools Registration', () => {
        (0, globals_1.beforeEach)(async () => {
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
        });
        (0, globals_1.it)('should register init-n8n tool', () => {
            const initToolCalls = mockFastMCP.addTool.mock.calls.filter(call => call[0].name === 'init-n8n');
            (0, globals_1.expect)(initToolCalls).toHaveLength(1);
            const initTool = initToolCalls[0][0];
            (0, globals_1.expect)(initTool).toHaveProperty('name', 'init-n8n');
            (0, globals_1.expect)(initTool).toHaveProperty('description');
            (0, globals_1.expect)(initTool).toHaveProperty('parameters');
            (0, globals_1.expect)(initTool).toHaveProperty('execute');
            (0, globals_1.expect)(initTool).toHaveProperty('annotations');
        });
        (0, globals_1.it)('should register status tool', () => {
            const statusToolCalls = mockFastMCP.addTool.mock.calls.filter(call => call[0].name === 'status');
            (0, globals_1.expect)(statusToolCalls).toHaveLength(1);
            const statusTool = statusToolCalls[0][0];
            (0, globals_1.expect)(statusTool).toHaveProperty('name', 'status');
            (0, globals_1.expect)(statusTool).toHaveProperty('description');
            (0, globals_1.expect)(statusTool).toHaveProperty('parameters');
            (0, globals_1.expect)(statusTool).toHaveProperty('execute');
            (0, globals_1.expect)(statusTool).toHaveProperty('annotations');
        });
        (0, globals_1.it)('should configure init-n8n tool with proper schema validation', () => {
            const initTool = mockFastMCP.addTool.mock.calls.find(call => call[0].name === 'init-n8n')?.[0];
            (0, globals_1.expect)(initTool).toBeDefined();
            if (initTool) {
                (0, globals_1.expect)(initTool.annotations).toEqual({
                    title: 'Initialize n8n Connection',
                    readOnlyHint: false,
                    destructiveHint: false,
                    idempotentHint: true,
                    openWorldHint: true,
                });
            }
        });
        (0, globals_1.it)('should configure status tool with proper annotations', () => {
            const statusTool = mockFastMCP.addTool.mock.calls.find(call => call[0].name === 'status')?.[0];
            (0, globals_1.expect)(statusTool).toBeDefined();
            if (statusTool) {
                (0, globals_1.expect)(statusTool.annotations).toEqual({
                    title: 'Check n8n Connection Status',
                    readOnlyHint: true,
                    destructiveHint: false,
                    idempotentHint: true,
                    openWorldHint: true,
                });
            }
        });
    });
    (0, globals_1.describe)('init-n8n Tool Execution', () => {
        let initToolExecute;
        (0, globals_1.beforeEach)(async () => {
            // Mock N8nClient constructor
            const { N8nClient } = globals_1.jest.requireMock('../../src/client/n8nClient.js');
            N8nClient.mockImplementation(() => mockN8nClient);
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
            const initTool = mockFastMCP.addTool.mock.calls.find(call => call[0].name === 'init-n8n')?.[0];
            if (initTool) {
                initToolExecute = initTool.execute;
            }
        });
        (0, globals_1.it)('should successfully initialize n8n connection', async () => {
            const args = {
                baseUrl: 'http://localhost:5678',
                apiKey: 'test-api-key',
            };
            const result = await initToolExecute(args);
            (0, globals_1.expect)(result).toBe('✅ Successfully connected to n8n instance at http://localhost:5678');
            (0, globals_1.expect)(mockN8nClient.getWorkflows).toHaveBeenCalledWith({ limit: 1 });
        });
        (0, globals_1.it)('should handle connection errors gracefully', async () => {
            mockN8nClient.getWorkflows.mockRejectedValueOnce(new Error('Connection failed'));
            const args = {
                baseUrl: 'http://localhost:5678',
                apiKey: 'test-api-key',
            };
            await (0, globals_1.expect)(initToolExecute(args)).rejects.toThrow('Failed to connect to n8n: Connection failed');
        });
        (0, globals_1.it)('should handle unknown connection errors', async () => {
            mockN8nClient.getWorkflows.mockRejectedValueOnce('Unknown error');
            const args = {
                baseUrl: 'http://localhost:5678',
                apiKey: 'test-api-key',
            };
            await (0, globals_1.expect)(initToolExecute(args)).rejects.toThrow('Failed to connect to n8n with unknown error');
        });
        (0, globals_1.it)('should set global client instance on successful connection', async () => {
            const args = {
                baseUrl: 'http://localhost:5678',
                apiKey: 'test-api-key',
            };
            await initToolExecute(args);
            // Test that client getter now returns the client
            const clientGetter = mockCreateWorkflowTools.mock.calls[0][0];
            (0, globals_1.expect)(clientGetter()).toBe(mockN8nClient);
        });
    });
    (0, globals_1.describe)('status Tool Execution', () => {
        let statusToolExecute;
        (0, globals_1.beforeEach)(async () => {
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
            const statusTool = mockFastMCP.addTool.mock.calls.find(call => call[0].name === 'status')?.[0];
            if (statusTool) {
                statusToolExecute = statusTool.execute;
            }
        });
        (0, globals_1.it)('should return not connected message when no client is set', async () => {
            const result = await statusToolExecute();
            (0, globals_1.expect)(result).toBe("❌ Not connected to n8n. Please run 'init-n8n' first.");
        });
        (0, globals_1.it)('should return connected status when client is working', async () => {
            // First initialize a client
            const { N8nClient } = globals_1.jest.requireMock('../../src/client/n8nClient.js');
            N8nClient.mockImplementation(() => mockN8nClient);
            const initTool = mockFastMCP.addTool.mock.calls.find(call => call[0].name === 'init-n8n')?.[0];
            if (initTool) {
                await initTool.execute({
                    baseUrl: 'http://localhost:5678',
                    apiKey: 'test-api-key',
                });
            }
            // Now check status
            const result = await statusToolExecute();
            (0, globals_1.expect)(result).toBe('✅ Connected to n8n and ready to use.');
            (0, globals_1.expect)(mockN8nClient.getWorkflows).toHaveBeenCalledWith({ limit: 1 });
        });
        (0, globals_1.it)('should return connection error when client fails', async () => {
            // Initialize a client first
            const { N8nClient } = globals_1.jest.requireMock('../../src/client/n8nClient.js');
            N8nClient.mockImplementation(() => mockN8nClient);
            const initTool = mockFastMCP.addTool.mock.calls.find(call => call[0].name === 'init-n8n')?.[0];
            if (initTool) {
                await initTool.execute({
                    baseUrl: 'http://localhost:5678',
                    apiKey: 'test-api-key',
                });
            }
            // Make subsequent calls fail
            mockN8nClient.getWorkflows.mockRejectedValueOnce(new Error('API Error'));
            const result = await statusToolExecute();
            (0, globals_1.expect)(result).toBe('⚠️ Connected but unable to communicate with n8n: API Error');
        });
        (0, globals_1.it)('should handle non-Error exceptions in status check', async () => {
            // Initialize a client first
            const { N8nClient } = globals_1.jest.requireMock('../../src/client/n8nClient.js');
            N8nClient.mockImplementation(() => mockN8nClient);
            const initTool = mockFastMCP.addTool.mock.calls.find(call => call[0].name === 'init-n8n')?.[0];
            if (initTool) {
                await initTool.execute({
                    baseUrl: 'http://localhost:5678',
                    apiKey: 'test-api-key',
                });
            }
            // Make subsequent calls fail with non-Error
            mockN8nClient.getWorkflows.mockRejectedValueOnce('String error');
            const result = await statusToolExecute();
            (0, globals_1.expect)(result).toBe('⚠️ Connected but unable to communicate with n8n: String error');
        });
    });
    (0, globals_1.describe)('Server Startup with stdio Transport', () => {
        (0, globals_1.beforeEach)(() => {
            mockDetectTransportConfig.mockReturnValue({ type: 'stdio' });
            mockValidateTransportConfig.mockReturnValue({ type: 'stdio' });
        });
        (0, globals_1.it)('should start server with stdio transport', async () => {
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
            // Wait for async operations to complete
            await Promise.resolve();
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('🚀 Starting n8n MCP Server...');
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('📡 Transport type: stdio');
            (0, globals_1.expect)(mockFastMCP.start).toHaveBeenCalledWith({ transportType: 'stdio' });
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('📟 Server started with stdio transport');
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('✅ n8n MCP Server is ready!');
        });
        (0, globals_1.it)('should call transport detection and validation', async () => {
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
            await Promise.resolve();
            (0, globals_1.expect)(mockDetectTransportConfig).toHaveBeenCalled();
            (0, globals_1.expect)(mockValidateTransportConfig).toHaveBeenCalled();
        });
    });
    (0, globals_1.describe)('Server Startup with SSE Transport', () => {
        const mockSSETransport = {
            start: globals_1.jest.fn().mockResolvedValue(undefined),
        };
        (0, globals_1.beforeEach)(() => {
            mockDetectTransportConfig.mockReturnValue({
                type: 'sse',
                port: 3000,
                host: 'localhost',
            });
            mockValidateTransportConfig.mockReturnValue({
                type: 'sse',
                port: 3000,
                host: 'localhost',
            });
            mockSSEUtils.validateConfig.mockReturnValue(true);
            mockCreateSSETransport.mockReturnValue(mockSSETransport);
            mockGetServerUrl.mockReturnValue('http://localhost:3000');
        });
        (0, globals_1.it)('should start server with SSE transport', async () => {
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
            await Promise.resolve();
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('🚀 Starting n8n MCP Server...');
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('📡 Transport type: sse');
            (0, globals_1.expect)(mockSSEUtils.validateConfig).toHaveBeenCalled();
            (0, globals_1.expect)(mockCreateSSETransport).toHaveBeenCalledWith(mockFastMCP, {
                type: 'sse',
                port: 3000,
                host: 'localhost',
            });
            (0, globals_1.expect)(mockSSETransport.start).toHaveBeenCalled();
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('🌐 Server URL: http://localhost:3000');
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('✅ n8n MCP Server is ready!');
        });
        (0, globals_1.it)('should handle invalid SSE configuration', async () => {
            mockSSEUtils.validateConfig.mockReturnValue(false);
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
            await Promise.resolve();
            (0, globals_1.expect)(mockConsoleError).toHaveBeenCalledWith('❌ Invalid SSE configuration');
            (0, globals_1.expect)(process.exit).toHaveBeenCalledWith(1);
        });
        (0, globals_1.it)('should handle missing server URL', async () => {
            mockGetServerUrl.mockReturnValue(null);
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
            await Promise.resolve();
            (0, globals_1.expect)(mockSSETransport.start).toHaveBeenCalled();
            (0, globals_1.expect)(mockConsoleLog).not.toHaveBeenCalledWith(globals_1.expect.stringContaining('🌐 Server URL:'));
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('✅ n8n MCP Server is ready!');
        });
    });
    (0, globals_1.describe)('Server Startup Error Handling', () => {
        (0, globals_1.beforeEach)(() => {
            mockDetectTransportConfig.mockReturnValue({ type: 'stdio' });
            mockValidateTransportConfig.mockReturnValue({ type: 'stdio' });
        });
        (0, globals_1.it)('should handle server startup errors', async () => {
            mockFastMCP.start.mockRejectedValueOnce(new Error('Server startup failed'));
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
            await Promise.resolve();
            (0, globals_1.expect)(mockConsoleError).toHaveBeenCalledWith('❌ Failed to start server:', globals_1.expect.any(Error));
            (0, globals_1.expect)(process.exit).toHaveBeenCalledWith(1);
        });
        (0, globals_1.it)('should handle SSE transport startup errors', async () => {
            mockDetectTransportConfig.mockReturnValue({ type: 'sse', port: 3000 });
            mockValidateTransportConfig.mockReturnValue({ type: 'sse', port: 3000 });
            mockSSEUtils.validateConfig.mockReturnValue(true);
            const mockSSETransport = {
                start: globals_1.jest.fn().mockRejectedValueOnce(new Error('SSE startup failed')),
            };
            mockCreateSSETransport.mockReturnValue(mockSSETransport);
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
            await Promise.resolve();
            (0, globals_1.expect)(mockConsoleError).toHaveBeenCalledWith('❌ Failed to start server:', globals_1.expect.any(Error));
            (0, globals_1.expect)(process.exit).toHaveBeenCalledWith(1);
        });
    });
    (0, globals_1.describe)('Process Signal Handling', () => {
        (0, globals_1.beforeEach)(async () => {
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
        });
        (0, globals_1.it)('should register SIGINT handler', () => {
            (0, globals_1.expect)(process.on).toHaveBeenCalledWith('SIGINT', globals_1.expect.any(Function));
        });
        (0, globals_1.it)('should register SIGTERM handler', () => {
            (0, globals_1.expect)(process.on).toHaveBeenCalledWith('SIGTERM', globals_1.expect.any(Function));
        });
        (0, globals_1.it)('should handle SIGINT gracefully', () => {
            const sigintCall = process.on.mock.calls.find(call => call[0] === 'SIGINT');
            if (sigintCall) {
                const sigintHandler = sigintCall[1];
                sigintHandler();
                (0, globals_1.expect)(mockConsoleError).toHaveBeenCalledWith('Received SIGINT, shutting down gracefully...');
                (0, globals_1.expect)(process.exit).toHaveBeenCalledWith(0);
            }
        });
        (0, globals_1.it)('should handle SIGTERM gracefully', () => {
            const sigtermCall = process.on.mock.calls.find(call => call[0] === 'SIGTERM');
            if (sigtermCall) {
                const sigtermHandler = sigtermCall[1];
                sigtermHandler();
                (0, globals_1.expect)(mockConsoleError).toHaveBeenCalledWith('Received SIGTERM, shutting down gracefully...');
                (0, globals_1.expect)(process.exit).toHaveBeenCalledWith(0);
            }
        });
    });
    (0, globals_1.describe)('Global Client State Management', () => {
        let clientGetter;
        (0, globals_1.beforeEach)(async () => {
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
            clientGetter = mockCreateWorkflowTools.mock.calls[0][0];
        });
        (0, globals_1.it)('should start with null client', () => {
            (0, globals_1.expect)(clientGetter()).toBeNull();
        });
        (0, globals_1.it)('should update global client after successful init', async () => {
            const { N8nClient } = globals_1.jest.requireMock('../../src/client/n8nClient.js');
            N8nClient.mockImplementation(() => mockN8nClient);
            const initTool = mockFastMCP.addTool.mock.calls.find(call => call[0].name === 'init-n8n')?.[0];
            if (initTool) {
                await initTool.execute({
                    baseUrl: 'http://localhost:5678',
                    apiKey: 'test-api-key',
                });
            }
            (0, globals_1.expect)(clientGetter()).toBe(mockN8nClient);
        });
        (0, globals_1.it)('should maintain client state across multiple tool registrations', async () => {
            const { N8nClient } = globals_1.jest.requireMock('../../src/client/n8nClient.js');
            N8nClient.mockImplementation(() => mockN8nClient);
            const initTool = mockFastMCP.addTool.mock.calls.find(call => call[0].name === 'init-n8n')?.[0];
            if (initTool) {
                await initTool.execute({
                    baseUrl: 'http://localhost:5678',
                    apiKey: 'test-api-key',
                });
            }
            // Check that all tool categories get the same client
            const allClientGetters = [
                mockCreateWorkflowTools.mock.calls[0][0],
                mockCreateProjectTools.mock.calls[0][0],
                mockCreateUserTools.mock.calls[0][0],
                mockCreateVariableTools.mock.calls[0][0],
                mockCreateExecutionTools.mock.calls[0][0],
                mockCreateTagTools.mock.calls[0][0],
                mockCreateCredentialTools.mock.calls[0][0],
                mockCreateAuditTools.mock.calls[0][0],
            ];
            allClientGetters.forEach(getter => {
                (0, globals_1.expect)(getter()).toBe(mockN8nClient);
            });
        });
    });
    (0, globals_1.describe)('Parameter Validation', () => {
        (0, globals_1.it)('should use Zod for init-n8n parameter validation', async () => {
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
            const initTool = mockFastMCP.addTool.mock.calls.find(call => call[0].name === 'init-n8n')?.[0];
            (0, globals_1.expect)(initTool).toBeDefined();
            if (initTool) {
                // The parameters should be a z.object result
                (0, globals_1.expect)(initTool.parameters).toBeDefined();
                // We can't easily test the actual Zod schema structure in mocked environment,
                // but we can verify it was called to create the parameters
            }
        });
        (0, globals_1.it)('should use empty Zod object for status parameters', async () => {
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
            const statusTool = mockFastMCP.addTool.mock.calls.find(call => call[0].name === 'status')?.[0];
            (0, globals_1.expect)(statusTool).toBeDefined();
            if (statusTool) {
                (0, globals_1.expect)(statusTool.parameters).toBeDefined();
            }
        });
    });
    (0, globals_1.describe)('Integration with Tool Modules', () => {
        (0, globals_1.beforeEach)(async () => {
            await Promise.resolve().then(() => __importStar(require('../../src/index-fastmcp.js')));
        });
        (0, globals_1.it)('should pass consistent server instance to all tools', () => {
            const serverInstances = [
                mockCreateWorkflowTools.mock.calls[0][1],
                mockCreateProjectTools.mock.calls[0][1],
                mockCreateUserTools.mock.calls[0][1],
                mockCreateVariableTools.mock.calls[0][1],
                mockCreateExecutionTools.mock.calls[0][1],
                mockCreateTagTools.mock.calls[0][1],
                mockCreateCredentialTools.mock.calls[0][1],
                mockCreateAuditTools.mock.calls[0][1],
            ];
            // All tools should receive the same FastMCP instance
            serverInstances.forEach(instance => {
                (0, globals_1.expect)(instance).toBe(mockFastMCP);
            });
        });
        (0, globals_1.it)('should ensure tool registration happens before server start', () => {
            // Verify all tool creation functions were called before server.start
            (0, globals_1.expect)(mockCreateWorkflowTools).toHaveBeenCalled();
            (0, globals_1.expect)(mockCreateProjectTools).toHaveBeenCalled();
            (0, globals_1.expect)(mockCreateUserTools).toHaveBeenCalled();
            (0, globals_1.expect)(mockCreateVariableTools).toHaveBeenCalled();
            (0, globals_1.expect)(mockCreateExecutionTools).toHaveBeenCalled();
            (0, globals_1.expect)(mockCreateTagTools).toHaveBeenCalled();
            (0, globals_1.expect)(mockCreateCredentialTools).toHaveBeenCalled();
            (0, globals_1.expect)(mockCreateAuditTools).toHaveBeenCalled();
            // The custom tools should also be registered
            (0, globals_1.expect)(mockFastMCP.addTool).toHaveBeenCalledWith(globals_1.expect.objectContaining({ name: 'init-n8n' }));
            (0, globals_1.expect)(mockFastMCP.addTool).toHaveBeenCalledWith(globals_1.expect.objectContaining({ name: 'status' }));
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2plcmVteXBhcmtlci9EZXNrdG9wL0NsYXVkZSBDb2RpbmcgUHJvamVjdHMvbjhuLW1jcC1zZXJ2ZXIvdGVzdHMvdW5pdC9pbmRleC1mYXN0bWNwLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSwyQ0FBa0Y7QUFJbEYsd0JBQXdCO0FBQ3hCLGNBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDckIsY0FBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNqQixjQUFJLENBQUMsSUFBSSxDQUFDLCtCQUErQixDQUFDLENBQUM7QUFDM0MsY0FBSSxDQUFDLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO0FBQ3pDLGNBQUksQ0FBQyxJQUFJLENBQUMsNkJBQTZCLENBQUMsQ0FBQztBQUN6QyxjQUFJLENBQUMsSUFBSSxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDdEMsY0FBSSxDQUFDLElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO0FBQzFDLGNBQUksQ0FBQyxJQUFJLENBQUMsK0JBQStCLENBQUMsQ0FBQztBQUMzQyxjQUFJLENBQUMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLENBQUM7QUFDckMsY0FBSSxDQUFDLElBQUksQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO0FBQzVDLGNBQUksQ0FBQyxJQUFJLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUN0QyxjQUFJLENBQUMsSUFBSSxDQUFDLHdDQUF3QyxDQUFDLENBQUM7QUFDcEQsY0FBSSxDQUFDLElBQUksQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDO0FBaEJqRCxxQ0FBa0M7QUFrQmxDLElBQUEsa0JBQVEsRUFBQyxtREFBbUQsRUFBRSxHQUFHLEVBQUU7SUFDakUsSUFBSSxXQUFpQyxDQUFDO0lBQ3RDLElBQUksYUFBa0IsQ0FBQztJQUN2QixJQUFJLGNBQW1CLENBQUM7SUFDeEIsSUFBSSxnQkFBcUIsQ0FBQztJQUMxQixJQUFJLG1CQUF3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QkFBc0IsQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDbEQsSUFBQSxnQkFBTSxFQUFDLG1CQUFtQixDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUMvQyxJQUFBLGdCQUFNLEVBQUMsdUJBQXVCLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1lBQ25ELElBQUEsZ0JBQU0sRUFBQyx3QkFBd0IsQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDcEQsSUFBQSxnQkFBTSxFQUFDLGtCQUFrQixDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUM5QyxJQUFBLGdCQUFNLEVBQUMseUJBQXlCLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1lBQ3JELElBQUEsZ0JBQU0sRUFBQyxvQkFBb0IsQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFFaEQsNkNBQTZDO1lBQzdDLElBQUEsZ0JBQU0sRUFBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsb0JBQW9CLENBQzlDLGdCQUFNLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FDOUMsQ0FBQztZQUNGLElBQUEsZ0JBQU0sRUFBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsb0JBQW9CLENBQUMsZ0JBQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDaEcsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbXlwYXJrZXIvRGVza3RvcC9DbGF1ZGUgQ29kaW5nIFByb2plY3RzL244bi1tY3Atc2VydmVyL3Rlc3RzL3VuaXQvaW5kZXgtZmFzdG1jcC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBqZXN0LCBiZWZvcmVFYWNoLCBhZnRlckVhY2ggfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7IEZhc3RNQ1AgfSBmcm9tICdmYXN0bWNwJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuXG4vLyBNb2NrIGFsbCBkZXBlbmRlbmNpZXNcbmplc3QubW9jaygnZmFzdG1jcCcpO1xuamVzdC5tb2NrKCd6b2QnKTtcbmplc3QubW9jaygnLi4vLi4vc3JjL2NsaWVudC9uOG5DbGllbnQuanMnKTtcbmplc3QubW9jaygnLi4vLi4vc3JjL3Rvb2xzL3dvcmtmbG93LmpzJyk7XG5qZXN0Lm1vY2soJy4uLy4uL3NyYy90b29scy9wcm9qZWN0cy5qcycpO1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvdG9vbHMvdXNlcnMuanMnKTtcbmplc3QubW9jaygnLi4vLi4vc3JjL3Rvb2xzL3ZhcmlhYmxlcy5qcycpO1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvdG9vbHMvZXhlY3V0aW9ucy5qcycpO1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvdG9vbHMvdGFncy5qcycpO1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvdG9vbHMvY3JlZGVudGlhbHMuanMnKTtcbmplc3QubW9jaygnLi4vLi4vc3JjL3Rvb2xzL2F1ZGl0LmpzJyk7XG5qZXN0Lm1vY2soJy4uLy4uL3NyYy90cmFuc3BvcnQvdHJhbnNwb3J0Q29uZmlnLmpzJyk7XG5qZXN0Lm1vY2soJy4uLy4uL3NyYy90cmFuc3BvcnQvc3NlVHJhbnNwb3J0LmpzJyk7XG5cbmRlc2NyaWJlKCdzcmMvaW5kZXgtZmFzdG1jcC50cyAtIEZhc3RNQ1AgU2VydmVyIEVudHJ5IFBvaW50JywgKCkgPT4ge1xuICBsZXQgbW9ja0Zhc3RNQ1A6IGplc3QuTW9ja2VkPEZhc3RNQ1A+O1xuICBsZXQgbW9ja044bkNsaWVudDogYW55O1xuICBsZXQgbW9ja0NvbnNvbGVMb2c6IGFueTtcbiAgbGV0IG1vY2tDb25zb2xlRXJyb3I6IGFueTtcbiAgbGV0IG9yaWdpbmFsUHJvY2Vzc0V4aXQ6IHR5cGVvZiBwcm9jZXNzLmV4aXQ7XG4gIGxldCBvcmlnaW5hbFByb2Nlc3NPbjogdHlwZW9mIHByb2Nlc3Mub247XG5cbiAgLy8gTW9jayB0b29sIGNyZWF0aW9uIGZ1bmN0aW9uc1xuICBjb25zdCBtb2NrQ3JlYXRlV29ya2Zsb3dUb29scyA9IGplc3QuZm4oKTtcbiAgY29uc3QgbW9ja0NyZWF0ZVByb2plY3RUb29scyA9IGplc3QuZm4oKTtcbiAgY29uc3QgbW9ja0NyZWF0ZVVzZXJUb29scyA9IGplc3QuZm4oKTtcbiAgY29uc3QgbW9ja0NyZWF0ZVZhcmlhYmxlVG9vbHMgPSBqZXN0LmZuKCk7XG4gIGNvbnN0IG1vY2tDcmVhdGVFeGVjdXRpb25Ub29scyA9IGplc3QuZm4oKTtcbiAgY29uc3QgbW9ja0NyZWF0ZVRhZ1Rvb2xzID0gamVzdC5mbigpO1xuICBjb25zdCBtb2NrQ3JlYXRlQ3JlZGVudGlhbFRvb2xzID0gamVzdC5mbigpO1xuICBjb25zdCBtb2NrQ3JlYXRlQXVkaXRUb29scyA9IGplc3QuZm4oKTtcblxuICAvLyBNb2NrIHRyYW5zcG9ydCBmdW5jdGlvbnNcbiAgY29uc3QgbW9ja0RldGVjdFRyYW5zcG9ydENvbmZpZyA9IGplc3QuZm4oKTtcbiAgY29uc3QgbW9ja1ZhbGlkYXRlVHJhbnNwb3J0Q29uZmlnID0gamVzdC5mbigpO1xuICBjb25zdCBtb2NrR2V0U2VydmVyVXJsID0gamVzdC5mbigpO1xuICBjb25zdCBtb2NrQ3JlYXRlU1NFVHJhbnNwb3J0ID0gamVzdC5mbigpO1xuICBjb25zdCBtb2NrU1NFVXRpbHMgPSB7XG4gICAgdmFsaWRhdGVDb25maWc6IGplc3QuZm4oKSxcbiAgfTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyBNb2NrIGNvbnNvbGUgbWV0aG9kc1xuICAgIG1vY2tDb25zb2xlTG9nID0gamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KTtcbiAgICBtb2NrQ29uc29sZUVycm9yID0gamVzdC5zcHlPbihjb25zb2xlLCAnZXJyb3InKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xuXG4gICAgLy8gTW9jayBwcm9jZXNzIG1ldGhvZHNcbiAgICBvcmlnaW5hbFByb2Nlc3NFeGl0ID0gcHJvY2Vzcy5leGl0O1xuICAgIG9yaWdpbmFsUHJvY2Vzc09uID0gcHJvY2Vzcy5vbjtcbiAgICBwcm9jZXNzLmV4aXQgPSBqZXN0LmZuKCkgYXMgYW55O1xuICAgIHByb2Nlc3Mub24gPSBqZXN0LmZuKCkgYXMgYW55O1xuXG4gICAgLy8gTW9jayBGYXN0TUNQIGluc3RhbmNlXG4gICAgbW9ja0Zhc3RNQ1AgPSB7XG4gICAgICBhZGRUb29sOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIHN0YXJ0OiBqZXN0LmZuPCgpID0+IFByb21pc2U8dm9pZD4+KCkubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKSxcbiAgICAgIG9uOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICB9IGFzIGFueTtcbiAgICAoRmFzdE1DUCBhcyBqZXN0Lk1vY2tlZENsYXNzPHR5cGVvZiBGYXN0TUNQPikubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IG1vY2tGYXN0TUNQKTtcblxuICAgIC8vIE1vY2sgTjhuQ2xpZW50XG4gICAgbW9ja044bkNsaWVudCA9IHtcbiAgICAgIGdldFdvcmtmbG93czogamVzdC5mbjwoKSA9PiBQcm9taXNlPHtkYXRhOiBhbnlbXX0+PigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogW10gfSksXG4gICAgfTtcblxuICAgIC8vIFNldHVwIG1vY2tzIGZvciBpbXBvcnRlZCBmdW5jdGlvbnNcbiAgICBjb25zdCB7IGNyZWF0ZVdvcmtmbG93VG9vbHMgfSA9IGplc3QucmVxdWlyZU1vY2soJy4uLy4uL3NyYy90b29scy93b3JrZmxvdy5qcycpIGFzIGFueTtcbiAgICBjb25zdCB7IGNyZWF0ZVByb2plY3RUb29scyB9ID0gamVzdC5yZXF1aXJlTW9jaygnLi4vLi4vc3JjL3Rvb2xzL3Byb2plY3RzLmpzJykgYXMgYW55O1xuICAgIGNvbnN0IHsgY3JlYXRlVXNlclRvb2xzIH0gPSBqZXN0LnJlcXVpcmVNb2NrKCcuLi8uLi9zcmMvdG9vbHMvdXNlcnMuanMnKSBhcyBhbnk7XG4gICAgY29uc3QgeyBjcmVhdGVWYXJpYWJsZVRvb2xzIH0gPSBqZXN0LnJlcXVpcmVNb2NrKCcuLi8uLi9zcmMvdG9vbHMvdmFyaWFibGVzLmpzJykgYXMgYW55O1xuICAgIGNvbnN0IHsgY3JlYXRlRXhlY3V0aW9uVG9vbHMgfSA9IGplc3QucmVxdWlyZU1vY2soJy4uLy4uL3NyYy90b29scy9leGVjdXRpb25zLmpzJykgYXMgYW55O1xuICAgIGNvbnN0IHsgY3JlYXRlVGFnVG9vbHMgfSA9IGplc3QucmVxdWlyZU1vY2soJy4uLy4uL3NyYy90b29scy90YWdzLmpzJykgYXMgYW55O1xuICAgIGNvbnN0IHsgY3JlYXRlQ3JlZGVudGlhbFRvb2xzIH0gPSBqZXN0LnJlcXVpcmVNb2NrKCcuLi8uLi9zcmMvdG9vbHMvY3JlZGVudGlhbHMuanMnKSBhcyBhbnk7XG4gICAgY29uc3QgeyBjcmVhdGVBdWRpdFRvb2xzIH0gPSBqZXN0LnJlcXVpcmVNb2NrKCcuLi8uLi9zcmMvdG9vbHMvYXVkaXQuanMnKSBhcyBhbnk7XG5cbiAgICBjcmVhdGVXb3JrZmxvd1Rvb2xzLm1vY2tJbXBsZW1lbnRhdGlvbihtb2NrQ3JlYXRlV29ya2Zsb3dUb29scyk7XG4gICAgY3JlYXRlUHJvamVjdFRvb2xzLm1vY2tJbXBsZW1lbnRhdGlvbihtb2NrQ3JlYXRlUHJvamVjdFRvb2xzKTtcbiAgICBjcmVhdGVVc2VyVG9vbHMubW9ja0ltcGxlbWVudGF0aW9uKG1vY2tDcmVhdGVVc2VyVG9vbHMpO1xuICAgIGNyZWF0ZVZhcmlhYmxlVG9vbHMubW9ja0ltcGxlbWVudGF0aW9uKG1vY2tDcmVhdGVWYXJpYWJsZVRvb2xzKTtcbiAgICBjcmVhdGVFeGVjdXRpb25Ub29scy5tb2NrSW1wbGVtZW50YXRpb24obW9ja0NyZWF0ZUV4ZWN1dGlvblRvb2xzKTtcbiAgICBjcmVhdGVUYWdUb29scy5tb2NrSW1wbGVtZW50YXRpb24obW9ja0NyZWF0ZVRhZ1Rvb2xzKTtcbiAgICBjcmVhdGVDcmVkZW50aWFsVG9vbHMubW9ja0ltcGxlbWVudGF0aW9uKG1vY2tDcmVhdGVDcmVkZW50aWFsVG9vbHMpO1xuICAgIGNyZWF0ZUF1ZGl0VG9vbHMubW9ja0ltcGxlbWVudGF0aW9uKG1vY2tDcmVhdGVBdWRpdFRvb2xzKTtcblxuICAgIC8vIFNldHVwIHRyYW5zcG9ydCBtb2Nrc1xuICAgIGNvbnN0IHsgZGV0ZWN0VHJhbnNwb3J0Q29uZmlnLCB2YWxpZGF0ZVRyYW5zcG9ydENvbmZpZywgZ2V0U2VydmVyVXJsIH0gPSBqZXN0LnJlcXVpcmVNb2NrKFxuICAgICAgJy4uLy4uL3NyYy90cmFuc3BvcnQvdHJhbnNwb3J0Q29uZmlnLmpzJ1xuICAgICkgYXMgYW55O1xuICAgIGNvbnN0IHsgY3JlYXRlU1NFVHJhbnNwb3J0LCBTU0VVdGlscyB9ID0gamVzdC5yZXF1aXJlTW9jayhcbiAgICAgICcuLi8uLi9zcmMvdHJhbnNwb3J0L3NzZVRyYW5zcG9ydC5qcydcbiAgICApIGFzIGFueTtcblxuICAgIGRldGVjdFRyYW5zcG9ydENvbmZpZy5tb2NrSW1wbGVtZW50YXRpb24obW9ja0RldGVjdFRyYW5zcG9ydENvbmZpZyk7XG4gICAgdmFsaWRhdGVUcmFuc3BvcnRDb25maWcubW9ja0ltcGxlbWVudGF0aW9uKG1vY2tWYWxpZGF0ZVRyYW5zcG9ydENvbmZpZyk7XG4gICAgZ2V0U2VydmVyVXJsLm1vY2tJbXBsZW1lbnRhdGlvbihtb2NrR2V0U2VydmVyVXJsKTtcbiAgICBjcmVhdGVTU0VUcmFuc3BvcnQubW9ja0ltcGxlbWVudGF0aW9uKG1vY2tDcmVhdGVTU0VUcmFuc3BvcnQpO1xuICAgIFNTRVV0aWxzLnZhbGlkYXRlQ29uZmlnID0gbW9ja1NTRVV0aWxzLnZhbGlkYXRlQ29uZmlnO1xuXG4gICAgLy8gQ2xlYXIgYWxsIG1vY2tzXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgLy8gUmVzdG9yZSBvcmlnaW5hbCBmdW5jdGlvbnNcbiAgICBwcm9jZXNzLmV4aXQgPSBvcmlnaW5hbFByb2Nlc3NFeGl0O1xuICAgIHByb2Nlc3Mub24gPSBvcmlnaW5hbFByb2Nlc3NPbjtcbiAgICBtb2NrQ29uc29sZUxvZy5tb2NrUmVzdG9yZSgpO1xuICAgIG1vY2tDb25zb2xlRXJyb3IubW9ja1Jlc3RvcmUoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Zhc3RNQ1AgU2VydmVyIEluaXRpYWxpemF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIEZhc3RNQ1AgaW5zdGFuY2Ugd2l0aCBjb3JyZWN0IGNvbmZpZ3VyYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBpbXBvcnQoJy4uLy4uL3NyYy9pbmRleC1mYXN0bWNwLmpzJyk7XG5cbiAgICAgIGV4cGVjdChGYXN0TUNQKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIG5hbWU6ICduOG4tbWNwLXNlcnZlcicsXG4gICAgICAgIHZlcnNpb246ICcyLjAuMCcsXG4gICAgICAgIGluc3RydWN0aW9uczogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoXG4gICAgICAgICAgJ1RoaXMgc2VydmVyIHByb3ZpZGVzIGNvbXByZWhlbnNpdmUgYWNjZXNzIHRvIG44biB3b3JrZmxvd3MnXG4gICAgICAgICksXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSBjb21wcmVoZW5zaXZlIGluc3RydWN0aW9ucyBpbiBGYXN0TUNQIGNvbmZpZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGltcG9ydCgnLi4vLi4vc3JjL2luZGV4LWZhc3RtY3AuanMnKTtcblxuICAgICAgY29uc3QgY29uZmlnID0gKEZhc3RNQ1AgYXMgamVzdC5Nb2NrZWRDbGFzczx0eXBlb2YgRmFzdE1DUD4pLm1vY2suY2FsbHNbMF1bMF07XG4gICAgICBleHBlY3QoY29uZmlnLmluc3RydWN0aW9ucykudG9Db250YWluKCdLZXkgRmVhdHVyZXM6Jyk7XG4gICAgICBleHBlY3QoY29uZmlnLmluc3RydWN0aW9ucykudG9Db250YWluKCdDb21wbGV0ZSB3b3JrZmxvdyBtYW5hZ2VtZW50Jyk7XG4gICAgICBleHBlY3QoY29uZmlnLmluc3RydWN0aW9ucykudG9Db250YWluKCdVc2VyIGFuZCBwcm9qZWN0IG1hbmFnZW1lbnQnKTtcbiAgICAgIGV4cGVjdChjb25maWcuaW5zdHJ1Y3Rpb25zKS50b0NvbnRhaW4oJ0V4ZWN1dGlvbiBtb25pdG9yaW5nJyk7XG4gICAgICBleHBlY3QoY29uZmlnLmluc3RydWN0aW9ucykudG9Db250YWluKCdHZXR0aW5nIFN0YXJ0ZWQ6Jyk7XG4gICAgICBleHBlY3QoY29uZmlnLmluc3RydWN0aW9ucykudG9Db250YWluKCdpbml0LW44bicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVG9vbCBSZWdpc3RyYXRpb24nLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBpbXBvcnQoJy4uLy4uL3NyYy9pbmRleC1mYXN0bWNwLmpzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlZ2lzdGVyIGFsbCB0b29sIGNhdGVnb3JpZXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QobW9ja0NyZWF0ZVdvcmtmbG93VG9vbHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGV4cGVjdC5hbnkoRnVuY3Rpb24pLCBtb2NrRmFzdE1DUCk7XG4gICAgICBleHBlY3QobW9ja0NyZWF0ZVByb2plY3RUb29scykudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXhwZWN0LmFueShGdW5jdGlvbiksIG1vY2tGYXN0TUNQKTtcbiAgICAgIGV4cGVjdChtb2NrQ3JlYXRlVXNlclRvb2xzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3QuYW55KEZ1bmN0aW9uKSwgbW9ja0Zhc3RNQ1ApO1xuICAgICAgZXhwZWN0KG1vY2tDcmVhdGVWYXJpYWJsZVRvb2xzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3QuYW55KEZ1bmN0aW9uKSwgbW9ja0Zhc3RNQ1ApO1xuICAgICAgZXhwZWN0KG1vY2tDcmVhdGVFeGVjdXRpb25Ub29scykudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXhwZWN0LmFueShGdW5jdGlvbiksIG1vY2tGYXN0TUNQKTtcbiAgICAgIGV4cGVjdChtb2NrQ3JlYXRlVGFnVG9vbHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGV4cGVjdC5hbnkoRnVuY3Rpb24pLCBtb2NrRmFzdE1DUCk7XG4gICAgICBleHBlY3QobW9ja0NyZWF0ZUNyZWRlbnRpYWxUb29scykudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXhwZWN0LmFueShGdW5jdGlvbiksIG1vY2tGYXN0TUNQKTtcbiAgICAgIGV4cGVjdChtb2NrQ3JlYXRlQXVkaXRUb29scykudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXhwZWN0LmFueShGdW5jdGlvbiksIG1vY2tGYXN0TUNQKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVnaXN0ZXIgdG9vbHMgd2l0aCB0aGUgc2FtZSBzZXJ2ZXIgaW5zdGFuY2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2ZXJJbnN0YW5jZXMgPSBbXG4gICAgICAgIG1vY2tDcmVhdGVXb3JrZmxvd1Rvb2xzLm1vY2suY2FsbHNbMF1bMV0sXG4gICAgICAgIG1vY2tDcmVhdGVQcm9qZWN0VG9vbHMubW9jay5jYWxsc1swXVsxXSxcbiAgICAgICAgbW9ja0NyZWF0ZVVzZXJUb29scy5tb2NrLmNhbGxzWzBdWzFdLFxuICAgICAgICBtb2NrQ3JlYXRlVmFyaWFibGVUb29scy5tb2NrLmNhbGxzWzBdWzFdLFxuICAgICAgICBtb2NrQ3JlYXRlRXhlY3V0aW9uVG9vbHMubW9jay5jYWxsc1swXVsxXSxcbiAgICAgICAgbW9ja0NyZWF0ZVRhZ1Rvb2xzLm1vY2suY2FsbHNbMF1bMV0sXG4gICAgICAgIG1vY2tDcmVhdGVDcmVkZW50aWFsVG9vbHMubW9jay5jYWxsc1swXVsxXSxcbiAgICAgICAgbW9ja0NyZWF0ZUF1ZGl0VG9vbHMubW9jay5jYWxsc1swXVsxXSxcbiAgICAgIF07XG5cbiAgICAgIC8vIEFsbCBzaG91bGQgcmVmZXJlbmNlIHRoZSBzYW1lIHNlcnZlciBpbnN0YW5jZVxuICAgICAgc2VydmVySW5zdGFuY2VzLmZvckVhY2goaW5zdGFuY2UgPT4ge1xuICAgICAgICBleHBlY3QoaW5zdGFuY2UpLnRvQmUobW9ja0Zhc3RNQ1ApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHBhc3MgY2xpZW50IGdldHRlciBmdW5jdGlvbiB0byBhbGwgdG9vbCBjcmVhdG9ycycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNsaWVudEdldHRlcnMgPSBbXG4gICAgICAgIG1vY2tDcmVhdGVXb3JrZmxvd1Rvb2xzLm1vY2suY2FsbHNbMF1bMF0sXG4gICAgICAgIG1vY2tDcmVhdGVQcm9qZWN0VG9vbHMubW9jay5jYWxsc1swXVswXSxcbiAgICAgICAgbW9ja0NyZWF0ZVVzZXJUb29scy5tb2NrLmNhbGxzWzBdWzBdLFxuICAgICAgICBtb2NrQ3JlYXRlVmFyaWFibGVUb29scy5tb2NrLmNhbGxzWzBdWzBdLFxuICAgICAgICBtb2NrQ3JlYXRlRXhlY3V0aW9uVG9vbHMubW9jay5jYWxsc1swXVswXSxcbiAgICAgICAgbW9ja0NyZWF0ZVRhZ1Rvb2xzLm1vY2suY2FsbHNbMF1bMF0sXG4gICAgICAgIG1vY2tDcmVhdGVDcmVkZW50aWFsVG9vbHMubW9jay5jYWxsc1swXVswXSxcbiAgICAgICAgbW9ja0NyZWF0ZUF1ZGl0VG9vbHMubW9jay5jYWxsc1swXVswXSxcbiAgICAgIF07XG5cbiAgICAgIC8vIEFsbCBzaG91bGQgYmUgZnVuY3Rpb25zXG4gICAgICBjbGllbnRHZXR0ZXJzLmZvckVhY2goZ2V0dGVyID0+IHtcbiAgICAgICAgZXhwZWN0KHR5cGVvZiBnZXR0ZXIpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQWxsIHNob3VsZCByZXR1cm4gbnVsbCBpbml0aWFsbHkgKG5vIGNsaWVudCBzZXQpXG4gICAgICBjbGllbnRHZXR0ZXJzLmZvckVhY2goZ2V0dGVyID0+IHtcbiAgICAgICAgZXhwZWN0KChnZXR0ZXIgYXMgKCkgPT4gYW55KSgpKS50b0JlTnVsbCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDdXN0b20gVG9vbHMgUmVnaXN0cmF0aW9uJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgaW1wb3J0KCcuLi8uLi9zcmMvaW5kZXgtZmFzdG1jcC5qcycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWdpc3RlciBpbml0LW44biB0b29sJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW5pdFRvb2xDYWxscyA9IG1vY2tGYXN0TUNQLmFkZFRvb2wubW9jay5jYWxscy5maWx0ZXIoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS5uYW1lID09PSAnaW5pdC1uOG4nXG4gICAgICApO1xuXG4gICAgICBleHBlY3QoaW5pdFRvb2xDYWxscykudG9IYXZlTGVuZ3RoKDEpO1xuXG4gICAgICBjb25zdCBpbml0VG9vbCA9IGluaXRUb29sQ2FsbHNbMF1bMF07XG4gICAgICBleHBlY3QoaW5pdFRvb2wpLnRvSGF2ZVByb3BlcnR5KCduYW1lJywgJ2luaXQtbjhuJyk7XG4gICAgICBleHBlY3QoaW5pdFRvb2wpLnRvSGF2ZVByb3BlcnR5KCdkZXNjcmlwdGlvbicpO1xuICAgICAgZXhwZWN0KGluaXRUb29sKS50b0hhdmVQcm9wZXJ0eSgncGFyYW1ldGVycycpO1xuICAgICAgZXhwZWN0KGluaXRUb29sKS50b0hhdmVQcm9wZXJ0eSgnZXhlY3V0ZScpO1xuICAgICAgZXhwZWN0KGluaXRUb29sKS50b0hhdmVQcm9wZXJ0eSgnYW5ub3RhdGlvbnMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVnaXN0ZXIgc3RhdHVzIHRvb2wnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzdGF0dXNUb29sQ2FsbHMgPSBtb2NrRmFzdE1DUC5hZGRUb29sLm1vY2suY2FsbHMuZmlsdGVyKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0ubmFtZSA9PT0gJ3N0YXR1cydcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzdGF0dXNUb29sQ2FsbHMpLnRvSGF2ZUxlbmd0aCgxKTtcblxuICAgICAgY29uc3Qgc3RhdHVzVG9vbCA9IHN0YXR1c1Rvb2xDYWxsc1swXVswXTtcbiAgICAgIGV4cGVjdChzdGF0dXNUb29sKS50b0hhdmVQcm9wZXJ0eSgnbmFtZScsICdzdGF0dXMnKTtcbiAgICAgIGV4cGVjdChzdGF0dXNUb29sKS50b0hhdmVQcm9wZXJ0eSgnZGVzY3JpcHRpb24nKTtcbiAgICAgIGV4cGVjdChzdGF0dXNUb29sKS50b0hhdmVQcm9wZXJ0eSgncGFyYW1ldGVycycpO1xuICAgICAgZXhwZWN0KHN0YXR1c1Rvb2wpLnRvSGF2ZVByb3BlcnR5KCdleGVjdXRlJyk7XG4gICAgICBleHBlY3Qoc3RhdHVzVG9vbCkudG9IYXZlUHJvcGVydHkoJ2Fubm90YXRpb25zJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNvbmZpZ3VyZSBpbml0LW44biB0b29sIHdpdGggcHJvcGVyIHNjaGVtYSB2YWxpZGF0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW5pdFRvb2wgPSBtb2NrRmFzdE1DUC5hZGRUb29sLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLm5hbWUgPT09ICdpbml0LW44bidcbiAgICAgICk/LlswXTtcblxuICAgICAgZXhwZWN0KGluaXRUb29sKS50b0JlRGVmaW5lZCgpO1xuICAgICAgaWYgKGluaXRUb29sKSB7XG4gICAgICAgIGV4cGVjdChpbml0VG9vbC5hbm5vdGF0aW9ucykudG9FcXVhbCh7XG4gICAgICAgICAgdGl0bGU6ICdJbml0aWFsaXplIG44biBDb25uZWN0aW9uJyxcbiAgICAgICAgICByZWFkT25seUhpbnQ6IGZhbHNlLFxuICAgICAgICAgIGRlc3RydWN0aXZlSGludDogZmFsc2UsXG4gICAgICAgICAgaWRlbXBvdGVudEhpbnQ6IHRydWUsXG4gICAgICAgICAgb3BlbldvcmxkSGludDogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNvbmZpZ3VyZSBzdGF0dXMgdG9vbCB3aXRoIHByb3BlciBhbm5vdGF0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXR1c1Rvb2wgPSBtb2NrRmFzdE1DUC5hZGRUb29sLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLm5hbWUgPT09ICdzdGF0dXMnXG4gICAgICApPy5bMF07XG5cbiAgICAgIGV4cGVjdChzdGF0dXNUb29sKS50b0JlRGVmaW5lZCgpO1xuICAgICAgaWYgKHN0YXR1c1Rvb2wpIHtcbiAgICAgICAgZXhwZWN0KHN0YXR1c1Rvb2wuYW5ub3RhdGlvbnMpLnRvRXF1YWwoe1xuICAgICAgICAgIHRpdGxlOiAnQ2hlY2sgbjhuIENvbm5lY3Rpb24gU3RhdHVzJyxcbiAgICAgICAgICByZWFkT25seUhpbnQ6IHRydWUsXG4gICAgICAgICAgZGVzdHJ1Y3RpdmVIaW50OiBmYWxzZSxcbiAgICAgICAgICBpZGVtcG90ZW50SGludDogdHJ1ZSxcbiAgICAgICAgICBvcGVuV29ybGRIaW50OiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2luaXQtbjhuIFRvb2wgRXhlY3V0aW9uJywgKCkgPT4ge1xuICAgIGxldCBpbml0VG9vbEV4ZWN1dGU6IEZ1bmN0aW9uO1xuXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIE44bkNsaWVudCBjb25zdHJ1Y3RvclxuICAgICAgY29uc3QgeyBOOG5DbGllbnQgfSA9IGplc3QucmVxdWlyZU1vY2soJy4uLy4uL3NyYy9jbGllbnQvbjhuQ2xpZW50LmpzJykgYXMgYW55O1xuICAgICAgTjhuQ2xpZW50Lm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBtb2NrTjhuQ2xpZW50KTtcblxuICAgICAgYXdhaXQgaW1wb3J0KCcuLi8uLi9zcmMvaW5kZXgtZmFzdG1jcC5qcycpO1xuXG4gICAgICBjb25zdCBpbml0VG9vbCA9IG1vY2tGYXN0TUNQLmFkZFRvb2wubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0ubmFtZSA9PT0gJ2luaXQtbjhuJ1xuICAgICAgKT8uWzBdO1xuICAgICAgaWYgKGluaXRUb29sKSB7XG4gICAgICAgIGluaXRUb29sRXhlY3V0ZSA9IGluaXRUb29sLmV4ZWN1dGU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1Y2Nlc3NmdWxseSBpbml0aWFsaXplIG44biBjb25uZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXJncyA9IHtcbiAgICAgICAgYmFzZVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6NTY3OCcsXG4gICAgICAgIGFwaUtleTogJ3Rlc3QtYXBpLWtleScsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBpbml0VG9vbEV4ZWN1dGUoYXJncyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ+KchSBTdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIG44biBpbnN0YW5jZSBhdCBodHRwOi8vbG9jYWxob3N0OjU2NzgnKTtcbiAgICAgIGV4cGVjdChtb2NrTjhuQ2xpZW50LmdldFdvcmtmbG93cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoeyBsaW1pdDogMSB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbm5lY3Rpb24gZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrTjhuQ2xpZW50LmdldFdvcmtmbG93cy5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdDb25uZWN0aW9uIGZhaWxlZCcpKTtcblxuICAgICAgY29uc3QgYXJncyA9IHtcbiAgICAgICAgYmFzZVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6NTY3OCcsXG4gICAgICAgIGFwaUtleTogJ3Rlc3QtYXBpLWtleScsXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBleHBlY3QoaW5pdFRvb2xFeGVjdXRlKGFyZ3MpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgICdGYWlsZWQgdG8gY29ubmVjdCB0byBuOG46IENvbm5lY3Rpb24gZmFpbGVkJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHVua25vd24gY29ubmVjdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrTjhuQ2xpZW50LmdldFdvcmtmbG93cy5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UoJ1Vua25vd24gZXJyb3InKTtcblxuICAgICAgY29uc3QgYXJncyA9IHtcbiAgICAgICAgYmFzZVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6NTY3OCcsXG4gICAgICAgIGFwaUtleTogJ3Rlc3QtYXBpLWtleScsXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBleHBlY3QoaW5pdFRvb2xFeGVjdXRlKGFyZ3MpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgICdGYWlsZWQgdG8gY29ubmVjdCB0byBuOG4gd2l0aCB1bmtub3duIGVycm9yJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2V0IGdsb2JhbCBjbGllbnQgaW5zdGFuY2Ugb24gc3VjY2Vzc2Z1bCBjb25uZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXJncyA9IHtcbiAgICAgICAgYmFzZVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6NTY3OCcsXG4gICAgICAgIGFwaUtleTogJ3Rlc3QtYXBpLWtleScsXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBpbml0VG9vbEV4ZWN1dGUoYXJncyk7XG5cbiAgICAgIC8vIFRlc3QgdGhhdCBjbGllbnQgZ2V0dGVyIG5vdyByZXR1cm5zIHRoZSBjbGllbnRcbiAgICAgIGNvbnN0IGNsaWVudEdldHRlciA9IG1vY2tDcmVhdGVXb3JrZmxvd1Rvb2xzLm1vY2suY2FsbHNbMF1bMF0gYXMgKCkgPT4gYW55O1xuICAgICAgZXhwZWN0KGNsaWVudEdldHRlcigpKS50b0JlKG1vY2tOOG5DbGllbnQpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnc3RhdHVzIFRvb2wgRXhlY3V0aW9uJywgKCkgPT4ge1xuICAgIGxldCBzdGF0dXNUb29sRXhlY3V0ZTogRnVuY3Rpb247XG5cbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGltcG9ydCgnLi4vLi4vc3JjL2luZGV4LWZhc3RtY3AuanMnKTtcblxuICAgICAgY29uc3Qgc3RhdHVzVG9vbCA9IG1vY2tGYXN0TUNQLmFkZFRvb2wubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0ubmFtZSA9PT0gJ3N0YXR1cydcbiAgICAgICk/LlswXTtcbiAgICAgIGlmIChzdGF0dXNUb29sKSB7XG4gICAgICAgIHN0YXR1c1Rvb2xFeGVjdXRlID0gc3RhdHVzVG9vbC5leGVjdXRlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbm90IGNvbm5lY3RlZCBtZXNzYWdlIHdoZW4gbm8gY2xpZW50IGlzIHNldCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN0YXR1c1Rvb2xFeGVjdXRlKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoXCLinYwgTm90IGNvbm5lY3RlZCB0byBuOG4uIFBsZWFzZSBydW4gJ2luaXQtbjhuJyBmaXJzdC5cIik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBjb25uZWN0ZWQgc3RhdHVzIHdoZW4gY2xpZW50IGlzIHdvcmtpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBGaXJzdCBpbml0aWFsaXplIGEgY2xpZW50XG4gICAgICBjb25zdCB7IE44bkNsaWVudCB9ID0gamVzdC5yZXF1aXJlTW9jaygnLi4vLi4vc3JjL2NsaWVudC9uOG5DbGllbnQuanMnKSBhcyBhbnk7XG4gICAgICBOOG5DbGllbnQubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IG1vY2tOOG5DbGllbnQpO1xuXG4gICAgICBjb25zdCBpbml0VG9vbCA9IG1vY2tGYXN0TUNQLmFkZFRvb2wubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0ubmFtZSA9PT0gJ2luaXQtbjhuJ1xuICAgICAgKT8uWzBdO1xuXG4gICAgICBpZiAoaW5pdFRvb2wpIHtcbiAgICAgICAgYXdhaXQgaW5pdFRvb2wuZXhlY3V0ZSh7XG4gICAgICAgICAgYmFzZVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6NTY3OCcsXG4gICAgICAgICAgYXBpS2V5OiAndGVzdC1hcGkta2V5JyxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIE5vdyBjaGVjayBzdGF0dXNcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN0YXR1c1Rvb2xFeGVjdXRlKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ+KchSBDb25uZWN0ZWQgdG8gbjhuIGFuZCByZWFkeSB0byB1c2UuJyk7XG4gICAgICBleHBlY3QobW9ja044bkNsaWVudC5nZXRXb3JrZmxvd3MpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHsgbGltaXQ6IDEgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBjb25uZWN0aW9uIGVycm9yIHdoZW4gY2xpZW50IGZhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gSW5pdGlhbGl6ZSBhIGNsaWVudCBmaXJzdFxuICAgICAgY29uc3QgeyBOOG5DbGllbnQgfSA9IGplc3QucmVxdWlyZU1vY2soJy4uLy4uL3NyYy9jbGllbnQvbjhuQ2xpZW50LmpzJykgYXMgYW55O1xuICAgICAgTjhuQ2xpZW50Lm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBtb2NrTjhuQ2xpZW50KTtcblxuICAgICAgY29uc3QgaW5pdFRvb2wgPSBtb2NrRmFzdE1DUC5hZGRUb29sLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLm5hbWUgPT09ICdpbml0LW44bidcbiAgICAgICk/LlswXTtcblxuICAgICAgaWYgKGluaXRUb29sKSB7XG4gICAgICAgIGF3YWl0IGluaXRUb29sLmV4ZWN1dGUoe1xuICAgICAgICAgIGJhc2VVcmw6ICdodHRwOi8vbG9jYWxob3N0OjU2NzgnLFxuICAgICAgICAgIGFwaUtleTogJ3Rlc3QtYXBpLWtleScsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1YnNlcXVlbnQgY2FsbHMgZmFpbFxuICAgICAgbW9ja044bkNsaWVudC5nZXRXb3JrZmxvd3MubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignQVBJIEVycm9yJykpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzdGF0dXNUb29sRXhlY3V0ZSgpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKCfimqDvuI8gQ29ubmVjdGVkIGJ1dCB1bmFibGUgdG8gY29tbXVuaWNhdGUgd2l0aCBuOG46IEFQSSBFcnJvcicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbm9uLUVycm9yIGV4Y2VwdGlvbnMgaW4gc3RhdHVzIGNoZWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gSW5pdGlhbGl6ZSBhIGNsaWVudCBmaXJzdFxuICAgICAgY29uc3QgeyBOOG5DbGllbnQgfSA9IGplc3QucmVxdWlyZU1vY2soJy4uLy4uL3NyYy9jbGllbnQvbjhuQ2xpZW50LmpzJykgYXMgYW55O1xuICAgICAgTjhuQ2xpZW50Lm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBtb2NrTjhuQ2xpZW50KTtcblxuICAgICAgY29uc3QgaW5pdFRvb2wgPSBtb2NrRmFzdE1DUC5hZGRUb29sLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLm5hbWUgPT09ICdpbml0LW44bidcbiAgICAgICk/LlswXTtcblxuICAgICAgaWYgKGluaXRUb29sKSB7XG4gICAgICAgIGF3YWl0IGluaXRUb29sLmV4ZWN1dGUoe1xuICAgICAgICAgIGJhc2VVcmw6ICdodHRwOi8vbG9jYWxob3N0OjU2NzgnLFxuICAgICAgICAgIGFwaUtleTogJ3Rlc3QtYXBpLWtleScsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1YnNlcXVlbnQgY2FsbHMgZmFpbCB3aXRoIG5vbi1FcnJvclxuICAgICAgbW9ja044bkNsaWVudC5nZXRXb3JrZmxvd3MubW9ja1JlamVjdGVkVmFsdWVPbmNlKCdTdHJpbmcgZXJyb3InKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3RhdHVzVG9vbEV4ZWN1dGUoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgn4pqg77iPIENvbm5lY3RlZCBidXQgdW5hYmxlIHRvIGNvbW11bmljYXRlIHdpdGggbjhuOiBTdHJpbmcgZXJyb3InKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NlcnZlciBTdGFydHVwIHdpdGggc3RkaW8gVHJhbnNwb3J0JywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbW9ja0RldGVjdFRyYW5zcG9ydENvbmZpZy5tb2NrUmV0dXJuVmFsdWUoeyB0eXBlOiAnc3RkaW8nIH0pO1xuICAgICAgbW9ja1ZhbGlkYXRlVHJhbnNwb3J0Q29uZmlnLm1vY2tSZXR1cm5WYWx1ZSh7IHR5cGU6ICdzdGRpbycgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN0YXJ0IHNlcnZlciB3aXRoIHN0ZGlvIHRyYW5zcG9ydCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGltcG9ydCgnLi4vLi4vc3JjL2luZGV4LWZhc3RtY3AuanMnKTtcblxuICAgICAgLy8gV2FpdCBmb3IgYXN5bmMgb3BlcmF0aW9ucyB0byBjb21wbGV0ZVxuICAgICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKCk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ29uc29sZUxvZykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ/CfmoAgU3RhcnRpbmcgbjhuIE1DUCBTZXJ2ZXIuLi4nKTtcbiAgICAgIGV4cGVjdChtb2NrQ29uc29sZUxvZykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ/Cfk6EgVHJhbnNwb3J0IHR5cGU6IHN0ZGlvJyk7XG4gICAgICBleHBlY3QobW9ja0Zhc3RNQ1Auc3RhcnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHsgdHJhbnNwb3J0VHlwZTogJ3N0ZGlvJyB9KTtcbiAgICAgIGV4cGVjdChtb2NrQ29uc29sZUxvZykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ/Cfk58gU2VydmVyIHN0YXJ0ZWQgd2l0aCBzdGRpbyB0cmFuc3BvcnQnKTtcbiAgICAgIGV4cGVjdChtb2NrQ29uc29sZUxvZykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ+KchSBuOG4gTUNQIFNlcnZlciBpcyByZWFkeSEnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsbCB0cmFuc3BvcnQgZGV0ZWN0aW9uIGFuZCB2YWxpZGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgaW1wb3J0KCcuLi8uLi9zcmMvaW5kZXgtZmFzdG1jcC5qcycpO1xuXG4gICAgICBhd2FpdCBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgICAgZXhwZWN0KG1vY2tEZXRlY3RUcmFuc3BvcnRDb25maWcpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrVmFsaWRhdGVUcmFuc3BvcnRDb25maWcpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NlcnZlciBTdGFydHVwIHdpdGggU1NFIFRyYW5zcG9ydCcsICgpID0+IHtcbiAgICBjb25zdCBtb2NrU1NFVHJhbnNwb3J0ID0ge1xuICAgICAgc3RhcnQ6IGplc3QuZm48KCkgPT4gUHJvbWlzZTx2b2lkPj4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpLFxuICAgIH07XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIG1vY2tEZXRlY3RUcmFuc3BvcnRDb25maWcubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdHlwZTogJ3NzZScsXG4gICAgICAgIHBvcnQ6IDMwMDAsXG4gICAgICAgIGhvc3Q6ICdsb2NhbGhvc3QnLFxuICAgICAgfSk7XG4gICAgICBtb2NrVmFsaWRhdGVUcmFuc3BvcnRDb25maWcubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdHlwZTogJ3NzZScsXG4gICAgICAgIHBvcnQ6IDMwMDAsXG4gICAgICAgIGhvc3Q6ICdsb2NhbGhvc3QnLFxuICAgICAgfSk7XG4gICAgICBtb2NrU1NFVXRpbHMudmFsaWRhdGVDb25maWcubW9ja1JldHVyblZhbHVlKHRydWUpO1xuICAgICAgbW9ja0NyZWF0ZVNTRVRyYW5zcG9ydC5tb2NrUmV0dXJuVmFsdWUobW9ja1NTRVRyYW5zcG9ydCk7XG4gICAgICBtb2NrR2V0U2VydmVyVXJsLm1vY2tSZXR1cm5WYWx1ZSgnaHR0cDovL2xvY2FsaG9zdDozMDAwJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN0YXJ0IHNlcnZlciB3aXRoIFNTRSB0cmFuc3BvcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBpbXBvcnQoJy4uLy4uL3NyYy9pbmRleC1mYXN0bWNwLmpzJyk7XG5cbiAgICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgICBleHBlY3QobW9ja0NvbnNvbGVMb2cpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCfwn5qAIFN0YXJ0aW5nIG44biBNQ1AgU2VydmVyLi4uJyk7XG4gICAgICBleHBlY3QobW9ja0NvbnNvbGVMb2cpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCfwn5OhIFRyYW5zcG9ydCB0eXBlOiBzc2UnKTtcbiAgICAgIGV4cGVjdChtb2NrU1NFVXRpbHMudmFsaWRhdGVDb25maWcpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrQ3JlYXRlU1NFVHJhbnNwb3J0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtb2NrRmFzdE1DUCwge1xuICAgICAgICB0eXBlOiAnc3NlJyxcbiAgICAgICAgcG9ydDogMzAwMCxcbiAgICAgICAgaG9zdDogJ2xvY2FsaG9zdCcsXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChtb2NrU1NFVHJhbnNwb3J0LnN0YXJ0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja0NvbnNvbGVMb2cpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCfwn4yQIFNlcnZlciBVUkw6IGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcpO1xuICAgICAgZXhwZWN0KG1vY2tDb25zb2xlTG9nKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgn4pyFIG44biBNQ1AgU2VydmVyIGlzIHJlYWR5IScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCBTU0UgY29uZmlndXJhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTU0VVdGlscy52YWxpZGF0ZUNvbmZpZy5tb2NrUmV0dXJuVmFsdWUoZmFsc2UpO1xuXG4gICAgICBhd2FpdCBpbXBvcnQoJy4uLy4uL3NyYy9pbmRleC1mYXN0bWNwLmpzJyk7XG5cbiAgICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgICBleHBlY3QobW9ja0NvbnNvbGVFcnJvcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ+KdjCBJbnZhbGlkIFNTRSBjb25maWd1cmF0aW9uJyk7XG4gICAgICBleHBlY3QocHJvY2Vzcy5leGl0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1pc3Npbmcgc2VydmVyIFVSTCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tHZXRTZXJ2ZXJVcmwubW9ja1JldHVyblZhbHVlKG51bGwpO1xuXG4gICAgICBhd2FpdCBpbXBvcnQoJy4uLy4uL3NyYy9pbmRleC1mYXN0bWNwLmpzJyk7XG5cbiAgICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgICBleHBlY3QobW9ja1NTRVRyYW5zcG9ydC5zdGFydCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tDb25zb2xlTG9nKS5ub3QudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ/CfjJAgU2VydmVyIFVSTDonKSk7XG4gICAgICBleHBlY3QobW9ja0NvbnNvbGVMb2cpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCfinIUgbjhuIE1DUCBTZXJ2ZXIgaXMgcmVhZHkhJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTZXJ2ZXIgU3RhcnR1cCBFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIG1vY2tEZXRlY3RUcmFuc3BvcnRDb25maWcubW9ja1JldHVyblZhbHVlKHsgdHlwZTogJ3N0ZGlvJyB9KTtcbiAgICAgIG1vY2tWYWxpZGF0ZVRyYW5zcG9ydENvbmZpZy5tb2NrUmV0dXJuVmFsdWUoeyB0eXBlOiAnc3RkaW8nIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmVyIHN0YXJ0dXAgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0Zhc3RNQ1Auc3RhcnQubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignU2VydmVyIHN0YXJ0dXAgZmFpbGVkJykpO1xuXG4gICAgICBhd2FpdCBpbXBvcnQoJy4uLy4uL3NyYy9pbmRleC1mYXN0bWNwLmpzJyk7XG5cbiAgICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgICBleHBlY3QobW9ja0NvbnNvbGVFcnJvcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICfinYwgRmFpbGVkIHRvIHN0YXJ0IHNlcnZlcjonLFxuICAgICAgICBleHBlY3QuYW55KEVycm9yKVxuICAgICAgKTtcbiAgICAgIGV4cGVjdChwcm9jZXNzLmV4aXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgU1NFIHRyYW5zcG9ydCBzdGFydHVwIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tEZXRlY3RUcmFuc3BvcnRDb25maWcubW9ja1JldHVyblZhbHVlKHsgdHlwZTogJ3NzZScsIHBvcnQ6IDMwMDAgfSk7XG4gICAgICBtb2NrVmFsaWRhdGVUcmFuc3BvcnRDb25maWcubW9ja1JldHVyblZhbHVlKHsgdHlwZTogJ3NzZScsIHBvcnQ6IDMwMDAgfSk7XG4gICAgICBtb2NrU1NFVXRpbHMudmFsaWRhdGVDb25maWcubW9ja1JldHVyblZhbHVlKHRydWUpO1xuXG4gICAgICBjb25zdCBtb2NrU1NFVHJhbnNwb3J0ID0ge1xuICAgICAgICBzdGFydDogamVzdC5mbjwoKSA9PiBQcm9taXNlPHZvaWQ+PigpLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ1NTRSBzdGFydHVwIGZhaWxlZCcpKSxcbiAgICAgIH07XG4gICAgICBtb2NrQ3JlYXRlU1NFVHJhbnNwb3J0Lm1vY2tSZXR1cm5WYWx1ZShtb2NrU1NFVHJhbnNwb3J0KTtcblxuICAgICAgYXdhaXQgaW1wb3J0KCcuLi8uLi9zcmMvaW5kZXgtZmFzdG1jcC5qcycpO1xuXG4gICAgICBhd2FpdCBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgICAgZXhwZWN0KG1vY2tDb25zb2xlRXJyb3IpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAn4p2MIEZhaWxlZCB0byBzdGFydCBzZXJ2ZXI6JyxcbiAgICAgICAgZXhwZWN0LmFueShFcnJvcilcbiAgICAgICk7XG4gICAgICBleHBlY3QocHJvY2Vzcy5leGl0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgxKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Byb2Nlc3MgU2lnbmFsIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgaW1wb3J0KCcuLi8uLi9zcmMvaW5kZXgtZmFzdG1jcC5qcycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWdpc3RlciBTSUdJTlQgaGFuZGxlcicsICgpID0+IHtcbiAgICAgIGV4cGVjdChwcm9jZXNzLm9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnU0lHSU5UJywgZXhwZWN0LmFueShGdW5jdGlvbikpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWdpc3RlciBTSUdURVJNIGhhbmRsZXInLCAoKSA9PiB7XG4gICAgICBleHBlY3QocHJvY2Vzcy5vbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ1NJR1RFUk0nLCBleHBlY3QuYW55KEZ1bmN0aW9uKSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBTSUdJTlQgZ3JhY2VmdWxseScsICgpID0+IHtcbiAgICAgIGNvbnN0IHNpZ2ludENhbGwgPSAocHJvY2Vzcy5vbiBhcyBqZXN0Lk1vY2spLm1vY2suY2FsbHMuZmluZChjYWxsID0+IGNhbGxbMF0gPT09ICdTSUdJTlQnKTtcblxuICAgICAgaWYgKHNpZ2ludENhbGwpIHtcbiAgICAgICAgY29uc3Qgc2lnaW50SGFuZGxlciA9IHNpZ2ludENhbGxbMV0gYXMgKCkgPT4gdm9pZDtcbiAgICAgICAgc2lnaW50SGFuZGxlcigpO1xuXG4gICAgICAgIGV4cGVjdChtb2NrQ29uc29sZUVycm9yKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAnUmVjZWl2ZWQgU0lHSU5ULCBzaHV0dGluZyBkb3duIGdyYWNlZnVsbHkuLi4nXG4gICAgICAgICk7XG4gICAgICAgIGV4cGVjdChwcm9jZXNzLmV4aXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgU0lHVEVSTSBncmFjZWZ1bGx5JywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2lndGVybUNhbGwgPSAocHJvY2Vzcy5vbiBhcyBqZXN0Lk1vY2spLm1vY2suY2FsbHMuZmluZChjYWxsID0+IGNhbGxbMF0gPT09ICdTSUdURVJNJyk7XG5cbiAgICAgIGlmIChzaWd0ZXJtQ2FsbCkge1xuICAgICAgICBjb25zdCBzaWd0ZXJtSGFuZGxlciA9IHNpZ3Rlcm1DYWxsWzFdIGFzICgpID0+IHZvaWQ7XG4gICAgICAgIHNpZ3Rlcm1IYW5kbGVyKCk7XG5cbiAgICAgICAgZXhwZWN0KG1vY2tDb25zb2xlRXJyb3IpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICdSZWNlaXZlZCBTSUdURVJNLCBzaHV0dGluZyBkb3duIGdyYWNlZnVsbHkuLi4nXG4gICAgICAgICk7XG4gICAgICAgIGV4cGVjdChwcm9jZXNzLmV4aXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDApO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR2xvYmFsIENsaWVudCBTdGF0ZSBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIGxldCBjbGllbnRHZXR0ZXI6ICgpID0+IGFueTtcblxuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgaW1wb3J0KCcuLi8uLi9zcmMvaW5kZXgtZmFzdG1jcC5qcycpO1xuICAgICAgY2xpZW50R2V0dGVyID0gbW9ja0NyZWF0ZVdvcmtmbG93VG9vbHMubW9jay5jYWxsc1swXVswXSBhcyAoKSA9PiBhbnk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN0YXJ0IHdpdGggbnVsbCBjbGllbnQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoY2xpZW50R2V0dGVyKCkpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBnbG9iYWwgY2xpZW50IGFmdGVyIHN1Y2Nlc3NmdWwgaW5pdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgTjhuQ2xpZW50IH0gPSBqZXN0LnJlcXVpcmVNb2NrKCcuLi8uLi9zcmMvY2xpZW50L244bkNsaWVudC5qcycpIGFzIGFueTtcbiAgICAgIE44bkNsaWVudC5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gbW9ja044bkNsaWVudCk7XG5cbiAgICAgIGNvbnN0IGluaXRUb29sID0gbW9ja0Zhc3RNQ1AuYWRkVG9vbC5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS5uYW1lID09PSAnaW5pdC1uOG4nXG4gICAgICApPy5bMF07XG5cbiAgICAgIGlmIChpbml0VG9vbCkge1xuICAgICAgICBhd2FpdCBpbml0VG9vbC5leGVjdXRlKHtcbiAgICAgICAgICBiYXNlVXJsOiAnaHR0cDovL2xvY2FsaG9zdDo1Njc4JyxcbiAgICAgICAgICBhcGlLZXk6ICd0ZXN0LWFwaS1rZXknLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZXhwZWN0KGNsaWVudEdldHRlcigpKS50b0JlKG1vY2tOOG5DbGllbnQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBtYWludGFpbiBjbGllbnQgc3RhdGUgYWNyb3NzIG11bHRpcGxlIHRvb2wgcmVnaXN0cmF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgTjhuQ2xpZW50IH0gPSBqZXN0LnJlcXVpcmVNb2NrKCcuLi8uLi9zcmMvY2xpZW50L244bkNsaWVudC5qcycpIGFzIGFueTtcbiAgICAgIE44bkNsaWVudC5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gbW9ja044bkNsaWVudCk7XG5cbiAgICAgIGNvbnN0IGluaXRUb29sID0gbW9ja0Zhc3RNQ1AuYWRkVG9vbC5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS5uYW1lID09PSAnaW5pdC1uOG4nXG4gICAgICApPy5bMF07XG5cbiAgICAgIGlmIChpbml0VG9vbCkge1xuICAgICAgICBhd2FpdCBpbml0VG9vbC5leGVjdXRlKHtcbiAgICAgICAgICBiYXNlVXJsOiAnaHR0cDovL2xvY2FsaG9zdDo1Njc4JyxcbiAgICAgICAgICBhcGlLZXk6ICd0ZXN0LWFwaS1rZXknLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgdGhhdCBhbGwgdG9vbCBjYXRlZ29yaWVzIGdldCB0aGUgc2FtZSBjbGllbnRcbiAgICAgIGNvbnN0IGFsbENsaWVudEdldHRlcnMgPSBbXG4gICAgICAgIG1vY2tDcmVhdGVXb3JrZmxvd1Rvb2xzLm1vY2suY2FsbHNbMF1bMF0sXG4gICAgICAgIG1vY2tDcmVhdGVQcm9qZWN0VG9vbHMubW9jay5jYWxsc1swXVswXSxcbiAgICAgICAgbW9ja0NyZWF0ZVVzZXJUb29scy5tb2NrLmNhbGxzWzBdWzBdLFxuICAgICAgICBtb2NrQ3JlYXRlVmFyaWFibGVUb29scy5tb2NrLmNhbGxzWzBdWzBdLFxuICAgICAgICBtb2NrQ3JlYXRlRXhlY3V0aW9uVG9vbHMubW9jay5jYWxsc1swXVswXSxcbiAgICAgICAgbW9ja0NyZWF0ZVRhZ1Rvb2xzLm1vY2suY2FsbHNbMF1bMF0sXG4gICAgICAgIG1vY2tDcmVhdGVDcmVkZW50aWFsVG9vbHMubW9jay5jYWxsc1swXVswXSxcbiAgICAgICAgbW9ja0NyZWF0ZUF1ZGl0VG9vbHMubW9jay5jYWxsc1swXVswXSxcbiAgICAgIF07XG5cbiAgICAgIGFsbENsaWVudEdldHRlcnMuZm9yRWFjaChnZXR0ZXIgPT4ge1xuICAgICAgICBleHBlY3QoKGdldHRlciBhcyBhbnkpKCkpLnRvQmUobW9ja044bkNsaWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BhcmFtZXRlciBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdXNlIFpvZCBmb3IgaW5pdC1uOG4gcGFyYW1ldGVyIHZhbGlkYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBpbXBvcnQoJy4uLy4uL3NyYy9pbmRleC1mYXN0bWNwLmpzJyk7XG5cbiAgICAgIGNvbnN0IGluaXRUb29sID0gbW9ja0Zhc3RNQ1AuYWRkVG9vbC5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS5uYW1lID09PSAnaW5pdC1uOG4nXG4gICAgICApPy5bMF07XG5cbiAgICAgIGV4cGVjdChpbml0VG9vbCkudG9CZURlZmluZWQoKTtcbiAgICAgIGlmIChpbml0VG9vbCkge1xuICAgICAgICAvLyBUaGUgcGFyYW1ldGVycyBzaG91bGQgYmUgYSB6Lm9iamVjdCByZXN1bHRcbiAgICAgICAgZXhwZWN0KGluaXRUb29sLnBhcmFtZXRlcnMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIC8vIFdlIGNhbid0IGVhc2lseSB0ZXN0IHRoZSBhY3R1YWwgWm9kIHNjaGVtYSBzdHJ1Y3R1cmUgaW4gbW9ja2VkIGVudmlyb25tZW50LFxuICAgICAgICAvLyBidXQgd2UgY2FuIHZlcmlmeSBpdCB3YXMgY2FsbGVkIHRvIGNyZWF0ZSB0aGUgcGFyYW1ldGVyc1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2UgZW1wdHkgWm9kIG9iamVjdCBmb3Igc3RhdHVzIHBhcmFtZXRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBpbXBvcnQoJy4uLy4uL3NyYy9pbmRleC1mYXN0bWNwLmpzJyk7XG5cbiAgICAgIGNvbnN0IHN0YXR1c1Rvb2wgPSBtb2NrRmFzdE1DUC5hZGRUb29sLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLm5hbWUgPT09ICdzdGF0dXMnXG4gICAgICApPy5bMF07XG5cbiAgICAgIGV4cGVjdChzdGF0dXNUb29sKS50b0JlRGVmaW5lZCgpO1xuICAgICAgaWYgKHN0YXR1c1Rvb2wpIHtcbiAgICAgICAgZXhwZWN0KHN0YXR1c1Rvb2wucGFyYW1ldGVycykudG9CZURlZmluZWQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIHdpdGggVG9vbCBNb2R1bGVzJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgaW1wb3J0KCcuLi8uLi9zcmMvaW5kZXgtZmFzdG1jcC5qcycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwYXNzIGNvbnNpc3RlbnQgc2VydmVyIGluc3RhbmNlIHRvIGFsbCB0b29scycsICgpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZlckluc3RhbmNlcyA9IFtcbiAgICAgICAgbW9ja0NyZWF0ZVdvcmtmbG93VG9vbHMubW9jay5jYWxsc1swXVsxXSxcbiAgICAgICAgbW9ja0NyZWF0ZVByb2plY3RUb29scy5tb2NrLmNhbGxzWzBdWzFdLFxuICAgICAgICBtb2NrQ3JlYXRlVXNlclRvb2xzLm1vY2suY2FsbHNbMF1bMV0sXG4gICAgICAgIG1vY2tDcmVhdGVWYXJpYWJsZVRvb2xzLm1vY2suY2FsbHNbMF1bMV0sXG4gICAgICAgIG1vY2tDcmVhdGVFeGVjdXRpb25Ub29scy5tb2NrLmNhbGxzWzBdWzFdLFxuICAgICAgICBtb2NrQ3JlYXRlVGFnVG9vbHMubW9jay5jYWxsc1swXVsxXSxcbiAgICAgICAgbW9ja0NyZWF0ZUNyZWRlbnRpYWxUb29scy5tb2NrLmNhbGxzWzBdWzFdLFxuICAgICAgICBtb2NrQ3JlYXRlQXVkaXRUb29scy5tb2NrLmNhbGxzWzBdWzFdLFxuICAgICAgXTtcblxuICAgICAgLy8gQWxsIHRvb2xzIHNob3VsZCByZWNlaXZlIHRoZSBzYW1lIEZhc3RNQ1AgaW5zdGFuY2VcbiAgICAgIHNlcnZlckluc3RhbmNlcy5mb3JFYWNoKGluc3RhbmNlID0+IHtcbiAgICAgICAgZXhwZWN0KGluc3RhbmNlKS50b0JlKG1vY2tGYXN0TUNQKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBlbnN1cmUgdG9vbCByZWdpc3RyYXRpb24gaGFwcGVucyBiZWZvcmUgc2VydmVyIHN0YXJ0JywgKCkgPT4ge1xuICAgICAgLy8gVmVyaWZ5IGFsbCB0b29sIGNyZWF0aW9uIGZ1bmN0aW9ucyB3ZXJlIGNhbGxlZCBiZWZvcmUgc2VydmVyLnN0YXJ0XG4gICAgICBleHBlY3QobW9ja0NyZWF0ZVdvcmtmbG93VG9vbHMpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrQ3JlYXRlUHJvamVjdFRvb2xzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja0NyZWF0ZVVzZXJUb29scykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tDcmVhdGVWYXJpYWJsZVRvb2xzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja0NyZWF0ZUV4ZWN1dGlvblRvb2xzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja0NyZWF0ZVRhZ1Rvb2xzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja0NyZWF0ZUNyZWRlbnRpYWxUb29scykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tDcmVhdGVBdWRpdFRvb2xzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG5cbiAgICAgIC8vIFRoZSBjdXN0b20gdG9vbHMgc2hvdWxkIGFsc28gYmUgcmVnaXN0ZXJlZFxuICAgICAgZXhwZWN0KG1vY2tGYXN0TUNQLmFkZFRvb2wpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IG5hbWU6ICdpbml0LW44bicgfSlcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja0Zhc3RNQ1AuYWRkVG9vbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyBuYW1lOiAnc3RhdHVzJyB9KSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=