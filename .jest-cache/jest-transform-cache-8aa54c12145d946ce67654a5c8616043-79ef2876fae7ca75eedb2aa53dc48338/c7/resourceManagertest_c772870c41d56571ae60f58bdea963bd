c10ad97db8aca570b2f44cf5604f9ce5
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
// Mock dependencies
globals_1.jest.mock('fastmcp');
globals_1.jest.mock('../../../src/client/n8nClient');
globals_1.jest.mock('../../../src/resources/workflowResources');
globals_1.jest.mock('../../../src/resources/executionResources');
const resourceManager_1 = require("../../../src/resources/resourceManager");
// Mock console methods to avoid test output pollution
const mockConsoleLog = globals_1.jest.fn();
globals_1.jest.spyOn(console, 'log').mockImplementation(mockConsoleLog);
(0, globals_1.describe)('ResourceManager', () => {
    let resourceManager;
    let mockServer;
    let mockClient;
    let getClientFn;
    (0, globals_1.beforeEach)(() => {
        // Create mock instances
        mockServer = {
            addResource: globals_1.jest.fn(),
            addResourceTemplate: globals_1.jest.fn(),
        };
        mockClient = {
            getWorkflows: globals_1.jest.fn(),
            getExecutions: globals_1.jest.fn(),
            getProjects: globals_1.jest.fn(),
            getUsers: globals_1.jest.fn(),
            getVariables: globals_1.jest.fn(),
        };
        getClientFn = globals_1.jest.fn().mockReturnValue(mockClient);
        // Clear all mocks
        globals_1.jest.clearAllMocks();
        mockConsoleLog.mockClear();
    });
    (0, globals_1.afterEach)(() => {
        globals_1.jest.clearAllMocks();
    });
    (0, globals_1.describe)('Constructor and Configuration', () => {
        (0, globals_1.it)('should initialize with default configuration', () => {
            resourceManager = new resourceManager_1.ResourceManager();
            (0, globals_1.expect)(resourceManager).toBeInstanceOf(resourceManager_1.ResourceManager);
        });
        (0, globals_1.it)('should initialize with custom configuration', () => {
            const config = {
                baseUri: 'custom://n8n',
                enableWorkflows: false,
                enableExecutions: false,
                enableCredentials: true,
                enableNodes: false,
                globalCacheDuration: 10000,
                maxItems: 50,
            };
            resourceManager = new resourceManager_1.ResourceManager(config);
            (0, globals_1.expect)(resourceManager).toBeInstanceOf(resourceManager_1.ResourceManager);
        });
        (0, globals_1.it)('should merge custom config with defaults', () => {
            const config = {
                maxItems: 200,
                enableCredentials: true,
            };
            resourceManager = new resourceManager_1.ResourceManager(config);
            (0, globals_1.expect)(resourceManager).toBeInstanceOf(resourceManager_1.ResourceManager);
        });
    });
    (0, globals_1.describe)('Resource Registration', () => {
        (0, globals_1.beforeEach)(() => {
            resourceManager = new resourceManager_1.ResourceManager();
        });
        (0, globals_1.it)('should register all enabled resources with default config', () => {
            resourceManager.register(mockServer, getClientFn);
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('📚 Registering n8n MCP resources...');
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('✅ All n8n MCP resources registered');
        });
        (0, globals_1.it)('should register workflow resources when enabled', () => {
            const config = { enableWorkflows: true };
            resourceManager = new resourceManager_1.ResourceManager(config);
            resourceManager.register(mockServer, getClientFn);
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('📚 Registering n8n MCP resources...');
        });
        (0, globals_1.it)('should register execution resources when enabled', () => {
            const config = { enableExecutions: true };
            resourceManager = new resourceManager_1.ResourceManager(config);
            resourceManager.register(mockServer, getClientFn);
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('📚 Registering n8n MCP resources...');
        });
        (0, globals_1.it)('should register node resources when enabled', () => {
            const config = { enableNodes: true };
            resourceManager = new resourceManager_1.ResourceManager(config);
            resourceManager.register(mockServer, getClientFn);
            (0, globals_1.expect)(mockServer.addResource).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                uri: 'n8n://nodes/available',
                name: 'n8n Available Nodes',
                mimeType: 'application/json',
            }));
            (0, globals_1.expect)(mockServer.addResourceTemplate).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                uriTemplate: 'n8n://nodes/{nodeType}',
                name: 'n8n Node Documentation',
                mimeType: 'application/json',
            }));
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('📦 Node resources registered');
        });
        (0, globals_1.it)('should register credential resources when enabled', () => {
            const config = { enableCredentials: true };
            resourceManager = new resourceManager_1.ResourceManager(config);
            resourceManager.register(mockServer, getClientFn);
            (0, globals_1.expect)(mockServer.addResource).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                uri: 'n8n://credentials/types',
                name: 'n8n Credential Types',
                mimeType: 'application/json',
            }));
            (0, globals_1.expect)(mockServer.addResourceTemplate).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                uriTemplate: 'n8n://credentials/template/{credType}',
                name: 'n8n Credential Template',
                mimeType: 'application/json',
            }));
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('🔐 Credential resources registered');
        });
        (0, globals_1.it)('should register general resources', () => {
            resourceManager.register(mockServer, getClientFn);
            (0, globals_1.expect)(mockServer.addResource).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                uri: 'n8n://info',
                name: 'n8n Instance Information',
                mimeType: 'application/json',
            }));
            (0, globals_1.expect)(mockServer.addResource).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                uri: 'n8n://index',
                name: 'n8n Resource Directory',
                mimeType: 'application/json',
            }));
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('ℹ️  General resources registered');
        });
        (0, globals_1.it)('should skip resources when disabled', () => {
            const config = {
                enableWorkflows: false,
                enableExecutions: false,
                enableCredentials: false,
                enableNodes: false,
            };
            resourceManager = new resourceManager_1.ResourceManager(config);
            resourceManager.register(mockServer, getClientFn);
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('📚 Registering n8n MCP resources...');
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('ℹ️  General resources registered');
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('✅ All n8n MCP resources registered');
        });
    });
    (0, globals_1.describe)('Node Resources', () => {
        (0, globals_1.beforeEach)(() => {
            resourceManager = new resourceManager_1.ResourceManager({ enableNodes: true });
            resourceManager.register(mockServer, getClientFn);
        });
        (0, globals_1.it)('should load available nodes resource', async () => {
            const addResourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://nodes/available');
            (0, globals_1.expect)(addResourceCall).toBeDefined();
            if (!addResourceCall)
                throw new Error('Resource call not found');
            const resource = addResourceCall[0];
            const result = await resource.load();
            (0, globals_1.expect)(result.text).toBeDefined();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.nodes).toBeDefined();
            (0, globals_1.expect)(data.metadata).toBeDefined();
            (0, globals_1.expect)(data.resourceInfo).toBeDefined();
            (0, globals_1.expect)(data.resourceInfo.uri).toBe('n8n://nodes/available');
            (0, globals_1.expect)(data.resourceInfo.type).toBe('n8n-available-nodes');
        });
        (0, globals_1.it)('should load node documentation template', async () => {
            const addTemplateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://nodes/{nodeType}');
            (0, globals_1.expect)(addTemplateCall).toBeDefined();
            if (!addTemplateCall)
                throw new Error('Template call not found');
            const template = addTemplateCall[0];
            const result = await template.load({ nodeType: 'n8n-nodes-base.httpRequest' });
            (0, globals_1.expect)(result.text).toBeDefined();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.nodeType).toBe('n8n-nodes-base.httpRequest');
            (0, globals_1.expect)(data.name).toBe('httpRequest');
            (0, globals_1.expect)(data.resourceInfo).toBeDefined();
            (0, globals_1.expect)(data.resourceInfo.type).toBe('n8n-node-documentation');
        });
        (0, globals_1.it)('should validate node template arguments', () => {
            const addTemplateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://nodes/{nodeType}');
            (0, globals_1.expect)(addTemplateCall).toBeDefined();
            if (!addTemplateCall)
                throw new Error('Template call not found');
            const template = addTemplateCall[0];
            (0, globals_1.expect)(template.arguments).toHaveLength(1);
            (0, globals_1.expect)(template.arguments[0]).toEqual({
                name: 'nodeType',
                description: 'The type of n8n node (e.g., "n8n-nodes-base.httpRequest")',
                required: true,
            });
        });
    });
    (0, globals_1.describe)('Credential Resources', () => {
        (0, globals_1.beforeEach)(() => {
            resourceManager = new resourceManager_1.ResourceManager({ enableCredentials: true });
            resourceManager.register(mockServer, getClientFn);
        });
        (0, globals_1.it)('should load credential types resource', async () => {
            const addResourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://credentials/types');
            (0, globals_1.expect)(addResourceCall).toBeDefined();
            if (!addResourceCall)
                throw new Error('Resource call not found');
            const resource = addResourceCall[0];
            const result = await resource.load();
            (0, globals_1.expect)(result.text).toBeDefined();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.credentialTypes).toBeDefined();
            (0, globals_1.expect)(data.metadata).toBeDefined();
            (0, globals_1.expect)(data.resourceInfo).toBeDefined();
            (0, globals_1.expect)(data.resourceInfo.type).toBe('n8n-credential-types');
        });
        (0, globals_1.it)('should load credential template', async () => {
            const addTemplateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://credentials/template/{credType}');
            (0, globals_1.expect)(addTemplateCall).toBeDefined();
            if (!addTemplateCall)
                throw new Error('Template call not found');
            const template = addTemplateCall[0];
            const result = await template.load({ credType: 'httpBasicAuth' });
            (0, globals_1.expect)(result.text).toBeDefined();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.credentialType).toBe('httpBasicAuth');
            (0, globals_1.expect)(data.template).toBeDefined();
            (0, globals_1.expect)(data.resourceInfo).toBeDefined();
            (0, globals_1.expect)(data.resourceInfo.type).toBe('n8n-credential-template');
        });
        (0, globals_1.it)('should validate credential template arguments', () => {
            const addTemplateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://credentials/template/{credType}');
            (0, globals_1.expect)(addTemplateCall).toBeDefined();
            if (!addTemplateCall)
                throw new Error('Template call not found');
            const template = addTemplateCall[0];
            (0, globals_1.expect)(template.arguments).toHaveLength(1);
            (0, globals_1.expect)(template.arguments[0]).toEqual({
                name: 'credType',
                description: 'The credential type name',
                required: true,
            });
        });
    });
    (0, globals_1.describe)('General Resources', () => {
        (0, globals_1.beforeEach)(() => {
            resourceManager = new resourceManager_1.ResourceManager();
            resourceManager.register(mockServer, getClientFn);
        });
        (0, globals_1.it)('should load instance info resource successfully', async () => {
            mockClient.getWorkflows.mockResolvedValue({
                data: [{ id: '1', name: 'Test Workflow' }],
            });
            mockClient.getExecutions.mockResolvedValue({
                data: [{ id: '1', workflowId: '1' }],
            });
            mockClient.getProjects.mockResolvedValue({
                data: [{ id: '1', name: 'Test Project' }],
            });
            mockClient.getUsers.mockResolvedValue({
                data: [{ id: '1', email: 'test@example.com' }],
            });
            mockClient.getVariables.mockResolvedValue({
                data: [{ id: '1', key: 'test' }],
            });
            const addResourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://info');
            (0, globals_1.expect)(addResourceCall).toBeDefined();
            if (!addResourceCall)
                throw new Error('Resource call not found');
            const resource = addResourceCall[0];
            const result = await resource.load();
            (0, globals_1.expect)(result.text).toBeDefined();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.status).toBe('connected');
            (0, globals_1.expect)(data.features).toBeDefined();
            (0, globals_1.expect)(data.statistics).toBeDefined();
            (0, globals_1.expect)(data.resourceInfo).toBeDefined();
            (0, globals_1.expect)(data.resourceInfo.type).toBe('n8n-instance-info');
        });
        (0, globals_1.it)('should handle instance info resource errors', async () => {
            mockClient.getWorkflows.mockRejectedValue(new Error('API Error'));
            const addResourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://info');
            (0, globals_1.expect)(addResourceCall).toBeDefined();
            if (!addResourceCall)
                throw new Error('Resource call not found');
            const resource = addResourceCall[0];
            const result = await resource.load();
            (0, globals_1.expect)(result.text).toBeDefined();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.status).toBe('error');
            (0, globals_1.expect)(data.error).toBe('API Error');
            (0, globals_1.expect)(data.resourceInfo).toBeDefined();
        });
        (0, globals_1.it)('should throw error when client not initialized', async () => {
            getClientFn.mockReturnValue(null);
            const addResourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://info');
            (0, globals_1.expect)(addResourceCall).toBeDefined();
            if (!addResourceCall)
                throw new Error('Resource call not found');
            const resource = addResourceCall[0];
            await (0, globals_1.expect)(resource.load()).rejects.toThrow('n8n client not initialized. Run init-n8n first.');
        });
        (0, globals_1.it)('should load resource directory', async () => {
            const addResourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://index');
            (0, globals_1.expect)(addResourceCall).toBeDefined();
            if (!addResourceCall)
                throw new Error('Resource call not found');
            const resource = addResourceCall[0];
            const result = await resource.load();
            (0, globals_1.expect)(result.text).toBeDefined();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.resources).toBeDefined();
            (0, globals_1.expect)(data.metadata).toBeDefined();
            (0, globals_1.expect)(data.resourceInfo).toBeDefined();
            (0, globals_1.expect)(data.resourceInfo.type).toBe('n8n-resource-directory');
            (0, globals_1.expect)(Array.isArray(data.resources)).toBe(true);
        });
        (0, globals_1.it)('should include enabled resources in directory', () => {
            const config = {
                enableWorkflows: true,
                enableExecutions: true,
                enableNodes: true,
                enableCredentials: false,
            };
            resourceManager = new resourceManager_1.ResourceManager(config);
            resourceManager.register(mockServer, getClientFn);
            const addResourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://index');
            (0, globals_1.expect)(addResourceCall).toBeDefined();
            if (!addResourceCall)
                throw new Error('Resource call not found');
            const resource = addResourceCall[0];
            return resource.load().then((result) => {
                const data = JSON.parse(result.text);
                const resourceNames = data.resources.map((r) => r.name);
                (0, globals_1.expect)(resourceNames).toContain('Workflows');
                (0, globals_1.expect)(resourceNames).toContain('Executions');
                (0, globals_1.expect)(resourceNames).toContain('Nodes');
                (0, globals_1.expect)(resourceNames).not.toContain('Credentials');
            });
        });
    });
    (0, globals_1.describe)('Cache Management', () => {
        (0, globals_1.beforeEach)(() => {
            resourceManager = new resourceManager_1.ResourceManager();
        });
        (0, globals_1.it)('should clear all caches', () => {
            resourceManager.clearAllCaches();
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('🧹 All resource caches cleared');
        });
        (0, globals_1.it)('should get cache statistics', () => {
            const stats = resourceManager.getAllCacheStats();
            (0, globals_1.expect)(stats).toBeDefined();
            (0, globals_1.expect)(stats.workflows).toBeDefined();
            (0, globals_1.expect)(stats.executions).toBeDefined();
            (0, globals_1.expect)(typeof stats.workflows.size).toBe('number');
            (0, globals_1.expect)(Array.isArray(stats.workflows.keys)).toBe(true);
        });
    });
    (0, globals_1.describe)('Feature Testing', () => {
        (0, globals_1.beforeEach)(() => {
            resourceManager = new resourceManager_1.ResourceManager();
        });
        (0, globals_1.it)('should test features that succeed', async () => {
            mockClient.getProjects.mockResolvedValue({ data: [] });
            resourceManager.register(mockServer, getClientFn);
            const addResourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://info');
            if (!addResourceCall)
                throw new Error('Resource call not found');
            const resource = addResourceCall[0];
            const result = await resource.load();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.features.projects).toBe(true);
        });
        (0, globals_1.it)('should test features that fail', async () => {
            mockClient.getProjects.mockRejectedValue(new Error('Feature not available'));
            resourceManager.register(mockServer, getClientFn);
            const addResourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://info');
            if (!addResourceCall)
                throw new Error('Resource call not found');
            const resource = addResourceCall[0];
            const result = await resource.load();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.features.projects).toBe(false);
        });
    });
    (0, globals_1.describe)('Factory Functions', () => {
        (0, globals_1.it)('should create resource manager with factory function', () => {
            const manager = (0, resourceManager_1.createResourceManager)();
            (0, globals_1.expect)(manager).toBeInstanceOf(resourceManager_1.ResourceManager);
        });
        (0, globals_1.it)('should create resource manager with config via factory', () => {
            const config = { maxItems: 50 };
            const manager = (0, resourceManager_1.createResourceManager)(config);
            (0, globals_1.expect)(manager).toBeInstanceOf(resourceManager_1.ResourceManager);
        });
    });
    (0, globals_1.describe)('Environment Configuration', () => {
        const originalEnv = process.env;
        (0, globals_1.beforeEach)(() => {
            globals_1.jest.resetModules();
            process.env = { ...originalEnv };
        });
        (0, globals_1.afterEach)(() => {
            process.env = originalEnv;
        });
        (0, globals_1.it)('should parse default configuration from empty environment', () => {
            const config = (0, resourceManager_1.parseResourceConfigFromEnv)();
            (0, globals_1.expect)(config.enableWorkflows).toBe(true);
            (0, globals_1.expect)(config.enableExecutions).toBe(true);
            (0, globals_1.expect)(config.enableCredentials).toBe(false);
            (0, globals_1.expect)(config.enableNodes).toBe(true);
        });
        (0, globals_1.it)('should parse configuration from environment variables', () => {
            process.env[resourceManager_1.RESOURCE_ENV_CONFIG.BASE_URI] = 'custom://n8n';
            process.env[resourceManager_1.RESOURCE_ENV_CONFIG.ENABLE_WORKFLOWS] = 'false';
            process.env[resourceManager_1.RESOURCE_ENV_CONFIG.ENABLE_CREDENTIALS] = 'true';
            process.env[resourceManager_1.RESOURCE_ENV_CONFIG.CACHE_DURATION] = '10000';
            process.env[resourceManager_1.RESOURCE_ENV_CONFIG.MAX_ITEMS] = '200';
            const config = (0, resourceManager_1.parseResourceConfigFromEnv)();
            (0, globals_1.expect)(config.baseUri).toBe('custom://n8n');
            (0, globals_1.expect)(config.enableWorkflows).toBe(false);
            (0, globals_1.expect)(config.enableCredentials).toBe(true);
            (0, globals_1.expect)(config.globalCacheDuration).toBe(10000);
            (0, globals_1.expect)(config.maxItems).toBe(200);
        });
        (0, globals_1.it)('should handle invalid numeric environment variables', () => {
            process.env[resourceManager_1.RESOURCE_ENV_CONFIG.CACHE_DURATION] = 'invalid';
            process.env[resourceManager_1.RESOURCE_ENV_CONFIG.MAX_ITEMS] = 'not-a-number';
            const config = (0, resourceManager_1.parseResourceConfigFromEnv)();
            (0, globals_1.expect)(config.globalCacheDuration).toBeNaN();
            (0, globals_1.expect)(config.maxItems).toBeNaN();
        });
        (0, globals_1.it)('should validate environment variable constants', () => {
            (0, globals_1.expect)(resourceManager_1.RESOURCE_ENV_CONFIG.BASE_URI).toBe('N8N_MCP_RESOURCE_BASE_URI');
            (0, globals_1.expect)(resourceManager_1.RESOURCE_ENV_CONFIG.ENABLE_WORKFLOWS).toBe('N8N_MCP_ENABLE_WORKFLOW_RESOURCES');
            (0, globals_1.expect)(resourceManager_1.RESOURCE_ENV_CONFIG.ENABLE_EXECUTIONS).toBe('N8N_MCP_ENABLE_EXECUTION_RESOURCES');
            (0, globals_1.expect)(resourceManager_1.RESOURCE_ENV_CONFIG.ENABLE_CREDENTIALS).toBe('N8N_MCP_ENABLE_CREDENTIAL_RESOURCES');
            (0, globals_1.expect)(resourceManager_1.RESOURCE_ENV_CONFIG.ENABLE_NODES).toBe('N8N_MCP_ENABLE_NODE_RESOURCES');
            (0, globals_1.expect)(resourceManager_1.RESOURCE_ENV_CONFIG.CACHE_DURATION).toBe('N8N_MCP_RESOURCE_CACHE_DURATION');
            (0, globals_1.expect)(resourceManager_1.RESOURCE_ENV_CONFIG.MAX_ITEMS).toBe('N8N_MCP_RESOURCE_MAX_ITEMS');
        });
    });
    (0, globals_1.describe)('Edge Cases and Error Handling', () => {
        (0, globals_1.beforeEach)(() => {
            resourceManager = new resourceManager_1.ResourceManager();
        });
        (0, globals_1.it)('should handle client function that returns null', async () => {
            const nullClientFn = globals_1.jest.fn().mockReturnValue(null);
            resourceManager.register(mockServer, nullClientFn);
            const addResourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://info');
            if (!addResourceCall)
                throw new Error('Resource call not found');
            const resource = addResourceCall[0];
            await (0, globals_1.expect)(resource.load()).rejects.toThrow('n8n client not initialized. Run init-n8n first.');
        });
        (0, globals_1.it)('should handle undefined values in configuration', () => {
            const config = {
                baseUri: undefined,
                enableWorkflows: undefined,
                globalCacheDuration: undefined,
                maxItems: undefined,
            };
            (0, globals_1.expect)(() => new resourceManager_1.ResourceManager(config)).not.toThrow();
        });
        (0, globals_1.it)('should handle empty string values in node type parameters', async () => {
            resourceManager = new resourceManager_1.ResourceManager({ enableNodes: true });
            resourceManager.register(mockServer, getClientFn);
            const addTemplateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://nodes/{nodeType}');
            if (!addTemplateCall)
                throw new Error('Template call not found');
            const template = addTemplateCall[0];
            const result = await template.load({ nodeType: '' });
            (0, globals_1.expect)(result.text).toBeDefined();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.nodeType).toBe('');
            (0, globals_1.expect)(data.name).toBe('');
        });
        (0, globals_1.it)('should handle special characters in credential type parameters', async () => {
            resourceManager = new resourceManager_1.ResourceManager({ enableCredentials: true });
            resourceManager.register(mockServer, getClientFn);
            const addTemplateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://credentials/template/{credType}');
            if (!addTemplateCall)
                throw new Error('Template call not found');
            const template = addTemplateCall[0];
            const result = await template.load({ credType: 'special@chars!type' });
            (0, globals_1.expect)(result.text).toBeDefined();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.credentialType).toBe('special@chars!type');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2plcmVteXBhcmtlci9EZXNrdG9wL0NsYXVkZSBDb2RpbmcgUHJvamVjdHMvbjhuLW1jcC1zZXJ2ZXIvdGVzdHMvdW5pdC9yZXNvdXJjZXMvcmVzb3VyY2VNYW5hZ2VyLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSwyQ0FBa0Y7QUFVbEYsb0JBQW9CO0FBQ3BCLGNBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDckIsY0FBSSxDQUFDLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO0FBQzNDLGNBQUksQ0FBQyxJQUFJLENBQUMsMENBQTBDLENBQUMsQ0FBQztBQUN0RCxjQUFJLENBQUMsSUFBSSxDQUFDLDJDQUEyQyxDQUFDLENBQUM7QUFadkQsNEVBS2dEO0FBU2hELHNEQUFzRDtBQUN0RCxNQUFNLGNBQWMsR0FBRyxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDakMsY0FBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUMsa0JBQWtCLENBQUMsY0FBYyxDQUFDLENBQUM7QUFFOUQsSUFBQSxrQkFBUSxFQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtJQUMvQixJQUFJLGVBQWdDLENBQUM7SUFDckMsSUFBSSxVQUFnQyxDQUFDO0lBQ3JDLElBQUksVUFBa0MsQ0FBQztJQUN2QyxJQUFJLFdBQW1DLENBQUM7SUFFeEMsSUFBQSxvQkFBVSxFQUFDLEdBQUcsRUFBRTtRQUNkLHdCQUF3QjtRQUN4QixVQUFVLEdBQUc7WUFDWCxXQUFXLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtZQUN0QixtQkFBbUIsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1NBQ0ksQ0FBQztRQUVyQyxVQUFVLEdBQUc7WUFDWCxZQUFZLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtZQUN2QixhQUFhLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtZQUN4QixXQUFXLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtZQUN0QixRQUFRLEVBQUUsY0FBSSxD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LEVBQUUsQ0FBQyxDQUFDO1lBQ25FLGVBQWUsQ0FBQyxRQUFRLENBQUMsVUFBVSxFQUFFLFdBQVcsQ0FBQyxDQUFDO1lBRWxELE1BQU0sZUFBZSxHQUFHLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FDcEUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxLQUFLLHVDQUF1QyxDQUN4RSxDQUFDO1lBQ0YsSUFBSSxDQUFDLGVBQWU7Z0JBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO1lBQ2pFLE1BQU0sUUFBUSxHQUFHLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwQyxNQUFNLE1BQU0sR0FBRyxNQUFNLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLEVBQUUsb0JBQW9CLEVBQUUsQ0FBQyxDQUFDO1lBRXZFLElBQUEsZ0JBQU0sRUFBRSxNQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDM0MsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBRSxNQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDOUMsSUFBQSxnQkFBTSxFQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUN6RCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2plcmVteXBhcmtlci9EZXNrdG9wL0NsYXVkZSBDb2RpbmcgUHJvamVjdHMvbjhuLW1jcC1zZXJ2ZXIvdGVzdHMvdW5pdC9yZXNvdXJjZXMvcmVzb3VyY2VNYW5hZ2VyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGJlZm9yZUVhY2gsIGplc3QsIGFmdGVyRWFjaCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuaW1wb3J0IHsgRmFzdE1DUCB9IGZyb20gJ2Zhc3RtY3AnO1xuaW1wb3J0IHtcbiAgUmVzb3VyY2VNYW5hZ2VyLFxuICBjcmVhdGVSZXNvdXJjZU1hbmFnZXIsXG4gIHBhcnNlUmVzb3VyY2VDb25maWdGcm9tRW52LFxuICBSRVNPVVJDRV9FTlZfQ09ORklHLFxufSBmcm9tICcuLi8uLi8uLi9zcmMvcmVzb3VyY2VzL3Jlc291cmNlTWFuYWdlcic7XG5pbXBvcnQgeyBOOG5DbGllbnQgfSBmcm9tICcuLi8uLi8uLi9zcmMvY2xpZW50L244bkNsaWVudCc7XG5cbi8vIE1vY2sgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJ2Zhc3RtY3AnKTtcbmplc3QubW9jaygnLi4vLi4vLi4vc3JjL2NsaWVudC9uOG5DbGllbnQnKTtcbmplc3QubW9jaygnLi4vLi4vLi4vc3JjL3Jlc291cmNlcy93b3JrZmxvd1Jlc291cmNlcycpO1xuamVzdC5tb2NrKCcuLi8uLi8uLi9zcmMvcmVzb3VyY2VzL2V4ZWN1dGlvblJlc291cmNlcycpO1xuXG4vLyBNb2NrIGNvbnNvbGUgbWV0aG9kcyB0byBhdm9pZCB0ZXN0IG91dHB1dCBwb2xsdXRpb25cbmNvbnN0IG1vY2tDb25zb2xlTG9nID0gamVzdC5mbigpO1xuamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJykubW9ja0ltcGxlbWVudGF0aW9uKG1vY2tDb25zb2xlTG9nKTtcblxuZGVzY3JpYmUoJ1Jlc291cmNlTWFuYWdlcicsICgpID0+IHtcbiAgbGV0IHJlc291cmNlTWFuYWdlcjogUmVzb3VyY2VNYW5hZ2VyO1xuICBsZXQgbW9ja1NlcnZlcjogamVzdC5Nb2NrZWQ8RmFzdE1DUD47XG4gIGxldCBtb2NrQ2xpZW50OiBqZXN0Lk1vY2tlZDxOOG5DbGllbnQ+O1xuICBsZXQgZ2V0Q2xpZW50Rm46ICgpID0+IE44bkNsaWVudCB8IG51bGw7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gQ3JlYXRlIG1vY2sgaW5zdGFuY2VzXG4gICAgbW9ja1NlcnZlciA9IHtcbiAgICAgIGFkZFJlc291cmNlOiBqZXN0LmZuKCksXG4gICAgICBhZGRSZXNvdXJjZVRlbXBsYXRlOiBqZXN0LmZuKCksXG4gICAgfSBhcyB1bmtub3duIGFzIGplc3QuTW9ja2VkPEZhc3RNQ1A+O1xuXG4gICAgbW9ja0NsaWVudCA9IHtcbiAgICAgIGdldFdvcmtmbG93czogamVzdC5mbigpLFxuICAgICAgZ2V0RXhlY3V0aW9uczogamVzdC5mbigpLFxuICAgICAgZ2V0UHJvamVjdHM6IGplc3QuZm4oKSxcbiAgICAgIGdldFVzZXJzOiBqZXN0LmZuKCksXG4gICAgICBnZXRWYXJpYWJsZXM6IGplc3QuZm4oKSxcbiAgICB9IGFzIHVua25vd24gYXMgamVzdC5Nb2NrZWQ8TjhuQ2xpZW50PjtcblxuICAgIGdldENsaWVudEZuID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShtb2NrQ2xpZW50KSBhcyAoKSA9PiBOOG5DbGllbnQgfCBudWxsO1xuXG4gICAgLy8gQ2xlYXIgYWxsIG1vY2tzXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgbW9ja0NvbnNvbGVMb2cubW9ja0NsZWFyKCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb25zdHJ1Y3RvciBhbmQgQ29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgd2l0aCBkZWZhdWx0IGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgICByZXNvdXJjZU1hbmFnZXIgPSBuZXcgUmVzb3VyY2VNYW5hZ2VyKCk7XG4gICAgICBleHBlY3QocmVzb3VyY2VNYW5hZ2VyKS50b0JlSW5zdGFuY2VPZihSZXNvdXJjZU1hbmFnZXIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHdpdGggY3VzdG9tIGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgIGJhc2VVcmk6ICdjdXN0b206Ly9uOG4nLFxuICAgICAgICBlbmFibGVXb3JrZmxvd3M6IGZhbHNlLFxuICAgICAgICBlbmFibGVFeGVjdXRpb25zOiBmYWxzZSxcbiAgICAgICAgZW5hYmxlQ3JlZGVudGlhbHM6IHRydWUsXG4gICAgICAgIGVuYWJsZU5vZGVzOiBmYWxzZSxcbiAgICAgICAgZ2xvYmFsQ2FjaGVEdXJhdGlvbjogMTAwMDAsXG4gICAgICAgIG1heEl0ZW1zOiA1MCxcbiAgICAgIH07XG5cbiAgICAgIHJlc291cmNlTWFuYWdlciA9IG5ldyBSZXNvdXJjZU1hbmFnZXIoY29uZmlnKTtcbiAgICAgIGV4cGVjdChyZXNvdXJjZU1hbmFnZXIpLnRvQmVJbnN0YW5jZU9mKFJlc291cmNlTWFuYWdlcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1lcmdlIGN1c3RvbSBjb25maWcgd2l0aCBkZWZhdWx0cycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgbWF4SXRlbXM6IDIwMCxcbiAgICAgICAgZW5hYmxlQ3JlZGVudGlhbHM6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICByZXNvdXJjZU1hbmFnZXIgPSBuZXcgUmVzb3VyY2VNYW5hZ2VyKGNvbmZpZyk7XG4gICAgICBleHBlY3QocmVzb3VyY2VNYW5hZ2VyKS50b0JlSW5zdGFuY2VPZihSZXNvdXJjZU1hbmFnZXIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVzb3VyY2UgUmVnaXN0cmF0aW9uJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgcmVzb3VyY2VNYW5hZ2VyID0gbmV3IFJlc291cmNlTWFuYWdlcigpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWdpc3RlciBhbGwgZW5hYmxlZCByZXNvdXJjZXMgd2l0aCBkZWZhdWx0IGNvbmZpZycsICgpID0+IHtcbiAgICAgIHJlc291cmNlTWFuYWdlci5yZWdpc3Rlcihtb2NrU2VydmVyLCBnZXRDbGllbnRGbik7XG5cbiAgICAgIGV4cGVjdChtb2NrQ29uc29sZUxvZykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ/Cfk5ogUmVnaXN0ZXJpbmcgbjhuIE1DUCByZXNvdXJjZXMuLi4nKTtcbiAgICAgIGV4cGVjdChtb2NrQ29uc29sZUxvZykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ+KchSBBbGwgbjhuIE1DUCByZXNvdXJjZXMgcmVnaXN0ZXJlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWdpc3RlciB3b3JrZmxvdyByZXNvdXJjZXMgd2hlbiBlbmFibGVkJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29uZmlnID0geyBlbmFibGVXb3JrZmxvd3M6IHRydWUgfTtcbiAgICAgIHJlc291cmNlTWFuYWdlciA9IG5ldyBSZXNvdXJjZU1hbmFnZXIoY29uZmlnKTtcblxuICAgICAgcmVzb3VyY2VNYW5hZ2VyLnJlZ2lzdGVyKG1vY2tTZXJ2ZXIsIGdldENsaWVudEZuKTtcblxuICAgICAgZXhwZWN0KG1vY2tDb25zb2xlTG9nKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgn8J+TmiBSZWdpc3RlcmluZyBuOG4gTUNQIHJlc291cmNlcy4uLicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWdpc3RlciBleGVjdXRpb24gcmVzb3VyY2VzIHdoZW4gZW5hYmxlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHsgZW5hYmxlRXhlY3V0aW9uczogdHJ1ZSB9O1xuICAgICAgcmVzb3VyY2VNYW5hZ2VyID0gbmV3IFJlc291cmNlTWFuYWdlcihjb25maWcpO1xuXG4gICAgICByZXNvdXJjZU1hbmFnZXIucmVnaXN0ZXIobW9ja1NlcnZlciwgZ2V0Q2xpZW50Rm4pO1xuXG4gICAgICBleHBlY3QobW9ja0NvbnNvbGVMb2cpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCfwn5OaIFJlZ2lzdGVyaW5nIG44biBNQ1AgcmVzb3VyY2VzLi4uJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlZ2lzdGVyIG5vZGUgcmVzb3VyY2VzIHdoZW4gZW5hYmxlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHsgZW5hYmxlTm9kZXM6IHRydWUgfTtcbiAgICAgIHJlc291cmNlTWFuYWdlciA9IG5ldyBSZXNvdXJjZU1hbmFnZXIoY29uZmlnKTtcblxuICAgICAgcmVzb3VyY2VNYW5hZ2VyLnJlZ2lzdGVyKG1vY2tTZXJ2ZXIsIGdldENsaWVudEZuKTtcblxuICAgICAgZXhwZWN0KG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdXJpOiAnbjhuOi8vbm9kZXMvYXZhaWxhYmxlJyxcbiAgICAgICAgICBuYW1lOiAnbjhuIEF2YWlsYWJsZSBOb2RlcycsXG4gICAgICAgICAgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrU2VydmVyLmFkZFJlc291cmNlVGVtcGxhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdXJpVGVtcGxhdGU6ICduOG46Ly9ub2Rlcy97bm9kZVR5cGV9JyxcbiAgICAgICAgICBuYW1lOiAnbjhuIE5vZGUgRG9jdW1lbnRhdGlvbicsXG4gICAgICAgICAgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ29uc29sZUxvZykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ/Cfk6YgTm9kZSByZXNvdXJjZXMgcmVnaXN0ZXJlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWdpc3RlciBjcmVkZW50aWFsIHJlc291cmNlcyB3aGVuIGVuYWJsZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25maWcgPSB7IGVuYWJsZUNyZWRlbnRpYWxzOiB0cnVlIH07XG4gICAgICByZXNvdXJjZU1hbmFnZXIgPSBuZXcgUmVzb3VyY2VNYW5hZ2VyKGNvbmZpZyk7XG5cbiAgICAgIHJlc291cmNlTWFuYWdlci5yZWdpc3Rlcihtb2NrU2VydmVyLCBnZXRDbGllbnRGbik7XG5cbiAgICAgIGV4cGVjdChtb2NrU2VydmVyLmFkZFJlc291cmNlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHVyaTogJ244bjovL2NyZWRlbnRpYWxzL3R5cGVzJyxcbiAgICAgICAgICBuYW1lOiAnbjhuIENyZWRlbnRpYWwgVHlwZXMnLFxuICAgICAgICAgIG1pbWVUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBleHBlY3QobW9ja1NlcnZlci5hZGRSZXNvdXJjZVRlbXBsYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHVyaVRlbXBsYXRlOiAnbjhuOi8vY3JlZGVudGlhbHMvdGVtcGxhdGUve2NyZWRUeXBlfScsXG4gICAgICAgICAgbmFtZTogJ244biBDcmVkZW50aWFsIFRlbXBsYXRlJyxcbiAgICAgICAgICBtaW1lVHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tDb25zb2xlTG9nKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgn8J+UkCBDcmVkZW50aWFsIHJlc291cmNlcyByZWdpc3RlcmVkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlZ2lzdGVyIGdlbmVyYWwgcmVzb3VyY2VzJywgKCkgPT4ge1xuICAgICAgcmVzb3VyY2VNYW5hZ2VyLnJlZ2lzdGVyKG1vY2tTZXJ2ZXIsIGdldENsaWVudEZuKTtcblxuICAgICAgZXhwZWN0KG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdXJpOiAnbjhuOi8vaW5mbycsXG4gICAgICAgICAgbmFtZTogJ244biBJbnN0YW5jZSBJbmZvcm1hdGlvbicsXG4gICAgICAgICAgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrU2VydmVyLmFkZFJlc291cmNlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHVyaTogJ244bjovL2luZGV4JyxcbiAgICAgICAgICBuYW1lOiAnbjhuIFJlc291cmNlIERpcmVjdG9yeScsXG4gICAgICAgICAgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ29uc29sZUxvZykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ+KEue+4jyAgR2VuZXJhbCByZXNvdXJjZXMgcmVnaXN0ZXJlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBza2lwIHJlc291cmNlcyB3aGVuIGRpc2FibGVkJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICBlbmFibGVXb3JrZmxvd3M6IGZhbHNlLFxuICAgICAgICBlbmFibGVFeGVjdXRpb25zOiBmYWxzZSxcbiAgICAgICAgZW5hYmxlQ3JlZGVudGlhbHM6IGZhbHNlLFxuICAgICAgICBlbmFibGVOb2RlczogZmFsc2UsXG4gICAgICB9O1xuICAgICAgcmVzb3VyY2VNYW5hZ2VyID0gbmV3IFJlc291cmNlTWFuYWdlcihjb25maWcpO1xuXG4gICAgICByZXNvdXJjZU1hbmFnZXIucmVnaXN0ZXIobW9ja1NlcnZlciwgZ2V0Q2xpZW50Rm4pO1xuXG4gICAgICBleHBlY3QobW9ja0NvbnNvbGVMb2cpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCfwn5OaIFJlZ2lzdGVyaW5nIG44biBNQ1AgcmVzb3VyY2VzLi4uJyk7XG4gICAgICBleHBlY3QobW9ja0NvbnNvbGVMb2cpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCfihLnvuI8gIEdlbmVyYWwgcmVzb3VyY2VzIHJlZ2lzdGVyZWQnKTtcbiAgICAgIGV4cGVjdChtb2NrQ29uc29sZUxvZykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ+KchSBBbGwgbjhuIE1DUCByZXNvdXJjZXMgcmVnaXN0ZXJlZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTm9kZSBSZXNvdXJjZXMnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICByZXNvdXJjZU1hbmFnZXIgPSBuZXcgUmVzb3VyY2VNYW5hZ2VyKHsgZW5hYmxlTm9kZXM6IHRydWUgfSk7XG4gICAgICByZXNvdXJjZU1hbmFnZXIucmVnaXN0ZXIobW9ja1NlcnZlciwgZ2V0Q2xpZW50Rm4pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2FkIGF2YWlsYWJsZSBub2RlcyByZXNvdXJjZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFkZFJlc291cmNlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2UubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpID09PSAnbjhuOi8vbm9kZXMvYXZhaWxhYmxlJ1xuICAgICAgKTtcbiAgICAgIGV4cGVjdChhZGRSZXNvdXJjZUNhbGwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBpZiAoIWFkZFJlc291cmNlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdSZXNvdXJjZSBjYWxsIG5vdCBmb3VuZCcpO1xuXG4gICAgICBjb25zdCByZXNvdXJjZSA9IGFkZFJlc291cmNlQ2FsbFswXTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc291cmNlLmxvYWQoKTtcblxuICAgICAgZXhwZWN0KChyZXN1bHQgYXMgYW55KS50ZXh0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoKHJlc3VsdCBhcyBhbnkpLnRleHQpO1xuICAgICAgZXhwZWN0KGRhdGEubm9kZXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGF0YS5tZXRhZGF0YSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkYXRhLnJlc291cmNlSW5mbykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkYXRhLnJlc291cmNlSW5mby51cmkpLnRvQmUoJ244bjovL25vZGVzL2F2YWlsYWJsZScpO1xuICAgICAgZXhwZWN0KGRhdGEucmVzb3VyY2VJbmZvLnR5cGUpLnRvQmUoJ244bi1hdmFpbGFibGUtbm9kZXMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9hZCBub2RlIGRvY3VtZW50YXRpb24gdGVtcGxhdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhZGRUZW1wbGF0ZUNhbGwgPSBtb2NrU2VydmVyLmFkZFJlc291cmNlVGVtcGxhdGUubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpVGVtcGxhdGUgPT09ICduOG46Ly9ub2Rlcy97bm9kZVR5cGV9J1xuICAgICAgKTtcbiAgICAgIGV4cGVjdChhZGRUZW1wbGF0ZUNhbGwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBpZiAoIWFkZFRlbXBsYXRlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdUZW1wbGF0ZSBjYWxsIG5vdCBmb3VuZCcpO1xuXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGFkZFRlbXBsYXRlQ2FsbFswXTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRlbXBsYXRlLmxvYWQoeyBub2RlVHlwZTogJ244bi1ub2Rlcy1iYXNlLmh0dHBSZXF1ZXN0JyB9KTtcblxuICAgICAgZXhwZWN0KChyZXN1bHQgYXMgYW55KS50ZXh0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoKHJlc3VsdCBhcyBhbnkpLnRleHQpO1xuICAgICAgZXhwZWN0KGRhdGEubm9kZVR5cGUpLnRvQmUoJ244bi1ub2Rlcy1iYXNlLmh0dHBSZXF1ZXN0Jyk7XG4gICAgICBleHBlY3QoZGF0YS5uYW1lKS50b0JlKCdodHRwUmVxdWVzdCcpO1xuICAgICAgZXhwZWN0KGRhdGEucmVzb3VyY2VJbmZvKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRhdGEucmVzb3VyY2VJbmZvLnR5cGUpLnRvQmUoJ244bi1ub2RlLWRvY3VtZW50YXRpb24nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgbm9kZSB0ZW1wbGF0ZSBhcmd1bWVudHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBhZGRUZW1wbGF0ZUNhbGwgPSBtb2NrU2VydmVyLmFkZFJlc291cmNlVGVtcGxhdGUubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpVGVtcGxhdGUgPT09ICduOG46Ly9ub2Rlcy97bm9kZVR5cGV9J1xuICAgICAgKTtcbiAgICAgIGV4cGVjdChhZGRUZW1wbGF0ZUNhbGwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBpZiAoIWFkZFRlbXBsYXRlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdUZW1wbGF0ZSBjYWxsIG5vdCBmb3VuZCcpO1xuXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGFkZFRlbXBsYXRlQ2FsbFswXTtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5hcmd1bWVudHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5hcmd1bWVudHNbMF0pLnRvRXF1YWwoe1xuICAgICAgICBuYW1lOiAnbm9kZVR5cGUnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSB0eXBlIG9mIG44biBub2RlIChlLmcuLCBcIm44bi1ub2Rlcy1iYXNlLmh0dHBSZXF1ZXN0XCIpJyxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NyZWRlbnRpYWwgUmVzb3VyY2VzJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgcmVzb3VyY2VNYW5hZ2VyID0gbmV3IFJlc291cmNlTWFuYWdlcih7IGVuYWJsZUNyZWRlbnRpYWxzOiB0cnVlIH0pO1xuICAgICAgcmVzb3VyY2VNYW5hZ2VyLnJlZ2lzdGVyKG1vY2tTZXJ2ZXIsIGdldENsaWVudEZuKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9hZCBjcmVkZW50aWFsIHR5cGVzIHJlc291cmNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYWRkUmVzb3VyY2VDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmkgPT09ICduOG46Ly9jcmVkZW50aWFscy90eXBlcydcbiAgICAgICk7XG4gICAgICBleHBlY3QoYWRkUmVzb3VyY2VDYWxsKS50b0JlRGVmaW5lZCgpO1xuICAgICAgaWYgKCFhZGRSZXNvdXJjZUNhbGwpIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UgY2FsbCBub3QgZm91bmQnKTtcblxuICAgICAgY29uc3QgcmVzb3VyY2UgPSBhZGRSZXNvdXJjZUNhbGxbMF07XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNvdXJjZS5sb2FkKCk7XG5cbiAgICAgIGV4cGVjdCgocmVzdWx0IGFzIGFueSkudGV4dCkudG9CZURlZmluZWQoKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKChyZXN1bHQgYXMgYW55KS50ZXh0KTtcbiAgICAgIGV4cGVjdChkYXRhLmNyZWRlbnRpYWxUeXBlcykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkYXRhLm1ldGFkYXRhKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRhdGEucmVzb3VyY2VJbmZvKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRhdGEucmVzb3VyY2VJbmZvLnR5cGUpLnRvQmUoJ244bi1jcmVkZW50aWFsLXR5cGVzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvYWQgY3JlZGVudGlhbCB0ZW1wbGF0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFkZFRlbXBsYXRlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2VUZW1wbGF0ZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmlUZW1wbGF0ZSA9PT0gJ244bjovL2NyZWRlbnRpYWxzL3RlbXBsYXRlL3tjcmVkVHlwZX0nXG4gICAgICApO1xuICAgICAgZXhwZWN0KGFkZFRlbXBsYXRlQ2FsbCkudG9CZURlZmluZWQoKTtcbiAgICAgIGlmICghYWRkVGVtcGxhdGVDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1RlbXBsYXRlIGNhbGwgbm90IGZvdW5kJyk7XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gYWRkVGVtcGxhdGVDYWxsWzBdO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGVtcGxhdGUubG9hZCh7IGNyZWRUeXBlOiAnaHR0cEJhc2ljQXV0aCcgfSk7XG5cbiAgICAgIGV4cGVjdCgocmVzdWx0IGFzIGFueSkudGV4dCkudG9CZURlZmluZWQoKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKChyZXN1bHQgYXMgYW55KS50ZXh0KTtcbiAgICAgIGV4cGVjdChkYXRhLmNyZWRlbnRpYWxUeXBlKS50b0JlKCdodHRwQmFzaWNBdXRoJyk7XG4gICAgICBleHBlY3QoZGF0YS50ZW1wbGF0ZSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkYXRhLnJlc291cmNlSW5mbykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkYXRhLnJlc291cmNlSW5mby50eXBlKS50b0JlKCduOG4tY3JlZGVudGlhbC10ZW1wbGF0ZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBjcmVkZW50aWFsIHRlbXBsYXRlIGFyZ3VtZW50cycsICgpID0+IHtcbiAgICAgIGNvbnN0IGFkZFRlbXBsYXRlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2VUZW1wbGF0ZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmlUZW1wbGF0ZSA9PT0gJ244bjovL2NyZWRlbnRpYWxzL3RlbXBsYXRlL3tjcmVkVHlwZX0nXG4gICAgICApO1xuICAgICAgZXhwZWN0KGFkZFRlbXBsYXRlQ2FsbCkudG9CZURlZmluZWQoKTtcbiAgICAgIGlmICghYWRkVGVtcGxhdGVDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1RlbXBsYXRlIGNhbGwgbm90IGZvdW5kJyk7XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gYWRkVGVtcGxhdGVDYWxsWzBdO1xuICAgICAgZXhwZWN0KHRlbXBsYXRlLmFyZ3VtZW50cykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHRlbXBsYXRlLmFyZ3VtZW50c1swXSkudG9FcXVhbCh7XG4gICAgICAgIG5hbWU6ICdjcmVkVHlwZScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIGNyZWRlbnRpYWwgdHlwZSBuYW1lJyxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dlbmVyYWwgUmVzb3VyY2VzJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgcmVzb3VyY2VNYW5hZ2VyID0gbmV3IFJlc291cmNlTWFuYWdlcigpO1xuICAgICAgcmVzb3VyY2VNYW5hZ2VyLnJlZ2lzdGVyKG1vY2tTZXJ2ZXIsIGdldENsaWVudEZuKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9hZCBpbnN0YW5jZSBpbmZvIHJlc291cmNlIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGllbnQuZ2V0V29ya2Zsb3dzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogW3sgaWQ6ICcxJywgbmFtZTogJ1Rlc3QgV29ya2Zsb3cnIH1dLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgbW9ja0NsaWVudC5nZXRFeGVjdXRpb25zLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogW3sgaWQ6ICcxJywgd29ya2Zsb3dJZDogJzEnIH1dLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgbW9ja0NsaWVudC5nZXRQcm9qZWN0cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IFt7IGlkOiAnMScsIG5hbWU6ICdUZXN0IFByb2plY3QnIH1dLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgbW9ja0NsaWVudC5nZXRVc2Vycy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IFt7IGlkOiAnMScsIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScgfV0sXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBtb2NrQ2xpZW50LmdldFZhcmlhYmxlcy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IFt7IGlkOiAnMScsIGtleTogJ3Rlc3QnIH1dLFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCBhZGRSZXNvdXJjZUNhbGwgPSBtb2NrU2VydmVyLmFkZFJlc291cmNlLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLnVyaSA9PT0gJ244bjovL2luZm8nXG4gICAgICApO1xuICAgICAgZXhwZWN0KGFkZFJlc291cmNlQ2FsbCkudG9CZURlZmluZWQoKTtcbiAgICAgIGlmICghYWRkUmVzb3VyY2VDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlIGNhbGwgbm90IGZvdW5kJyk7XG5cbiAgICAgIGNvbnN0IHJlc291cmNlID0gYWRkUmVzb3VyY2VDYWxsWzBdO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzb3VyY2UubG9hZCgpO1xuXG4gICAgICBleHBlY3QoKHJlc3VsdCBhcyBhbnkpLnRleHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgocmVzdWx0IGFzIGFueSkudGV4dCk7XG4gICAgICBleHBlY3QoZGF0YS5zdGF0dXMpLnRvQmUoJ2Nvbm5lY3RlZCcpO1xuICAgICAgZXhwZWN0KGRhdGEuZmVhdHVyZXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGF0YS5zdGF0aXN0aWNzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRhdGEucmVzb3VyY2VJbmZvKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRhdGEucmVzb3VyY2VJbmZvLnR5cGUpLnRvQmUoJ244bi1pbnN0YW5jZS1pbmZvJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnN0YW5jZSBpbmZvIHJlc291cmNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGllbnQuZ2V0V29ya2Zsb3dzLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignQVBJIEVycm9yJykpO1xuXG4gICAgICBjb25zdCBhZGRSZXNvdXJjZUNhbGwgPSBtb2NrU2VydmVyLmFkZFJlc291cmNlLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLnVyaSA9PT0gJ244bjovL2luZm8nXG4gICAgICApO1xuICAgICAgZXhwZWN0KGFkZFJlc291cmNlQ2FsbCkudG9CZURlZmluZWQoKTtcbiAgICAgIGlmICghYWRkUmVzb3VyY2VDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlIGNhbGwgbm90IGZvdW5kJyk7XG5cbiAgICAgIGNvbnN0IHJlc291cmNlID0gYWRkUmVzb3VyY2VDYWxsWzBdO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzb3VyY2UubG9hZCgpO1xuXG4gICAgICBleHBlY3QoKHJlc3VsdCBhcyBhbnkpLnRleHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgocmVzdWx0IGFzIGFueSkudGV4dCk7XG4gICAgICBleHBlY3QoZGF0YS5zdGF0dXMpLnRvQmUoJ2Vycm9yJyk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvcikudG9CZSgnQVBJIEVycm9yJyk7XG4gICAgICBleHBlY3QoZGF0YS5yZXNvdXJjZUluZm8pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIHdoZW4gY2xpZW50IG5vdCBpbml0aWFsaXplZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIChnZXRDbGllbnRGbiBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShudWxsKTtcblxuICAgICAgY29uc3QgYWRkUmVzb3VyY2VDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmkgPT09ICduOG46Ly9pbmZvJ1xuICAgICAgKTtcbiAgICAgIGV4cGVjdChhZGRSZXNvdXJjZUNhbGwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBpZiAoIWFkZFJlc291cmNlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdSZXNvdXJjZSBjYWxsIG5vdCBmb3VuZCcpO1xuXG4gICAgICBjb25zdCByZXNvdXJjZSA9IGFkZFJlc291cmNlQ2FsbFswXTtcbiAgICAgIGF3YWl0IGV4cGVjdChyZXNvdXJjZS5sb2FkKCkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ244biBjbGllbnQgbm90IGluaXRpYWxpemVkLiBSdW4gaW5pdC1uOG4gZmlyc3QuJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9hZCByZXNvdXJjZSBkaXJlY3RvcnknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhZGRSZXNvdXJjZUNhbGwgPSBtb2NrU2VydmVyLmFkZFJlc291cmNlLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLnVyaSA9PT0gJ244bjovL2luZGV4J1xuICAgICAgKTtcbiAgICAgIGV4cGVjdChhZGRSZXNvdXJjZUNhbGwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBpZiAoIWFkZFJlc291cmNlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdSZXNvdXJjZSBjYWxsIG5vdCBmb3VuZCcpO1xuXG4gICAgICBjb25zdCByZXNvdXJjZSA9IGFkZFJlc291cmNlQ2FsbFswXTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc291cmNlLmxvYWQoKTtcblxuICAgICAgZXhwZWN0KChyZXN1bHQgYXMgYW55KS50ZXh0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoKHJlc3VsdCBhcyBhbnkpLnRleHQpO1xuICAgICAgZXhwZWN0KGRhdGEucmVzb3VyY2VzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRhdGEubWV0YWRhdGEpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGF0YS5yZXNvdXJjZUluZm8pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGF0YS5yZXNvdXJjZUluZm8udHlwZSkudG9CZSgnbjhuLXJlc291cmNlLWRpcmVjdG9yeScpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoZGF0YS5yZXNvdXJjZXMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIGVuYWJsZWQgcmVzb3VyY2VzIGluIGRpcmVjdG9yeScsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgZW5hYmxlV29ya2Zsb3dzOiB0cnVlLFxuICAgICAgICBlbmFibGVFeGVjdXRpb25zOiB0cnVlLFxuICAgICAgICBlbmFibGVOb2RlczogdHJ1ZSxcbiAgICAgICAgZW5hYmxlQ3JlZGVudGlhbHM6IGZhbHNlLFxuICAgICAgfTtcbiAgICAgIHJlc291cmNlTWFuYWdlciA9IG5ldyBSZXNvdXJjZU1hbmFnZXIoY29uZmlnKTtcbiAgICAgIHJlc291cmNlTWFuYWdlci5yZWdpc3Rlcihtb2NrU2VydmVyLCBnZXRDbGllbnRGbik7XG5cbiAgICAgIGNvbnN0IGFkZFJlc291cmNlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2UubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpID09PSAnbjhuOi8vaW5kZXgnXG4gICAgICApO1xuICAgICAgZXhwZWN0KGFkZFJlc291cmNlQ2FsbCkudG9CZURlZmluZWQoKTtcbiAgICAgIGlmICghYWRkUmVzb3VyY2VDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlIGNhbGwgbm90IGZvdW5kJyk7XG5cbiAgICAgIGNvbnN0IHJlc291cmNlID0gYWRkUmVzb3VyY2VDYWxsWzBdO1xuICAgICAgcmV0dXJuIHJlc291cmNlLmxvYWQoKS50aGVuKChyZXN1bHQ6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgocmVzdWx0IGFzIGFueSkudGV4dCk7XG4gICAgICAgIGNvbnN0IHJlc291cmNlTmFtZXMgPSBkYXRhLnJlc291cmNlcy5tYXAoKHI6IGFueSkgPT4gci5uYW1lKTtcbiAgICAgICAgZXhwZWN0KHJlc291cmNlTmFtZXMpLnRvQ29udGFpbignV29ya2Zsb3dzJyk7XG4gICAgICAgIGV4cGVjdChyZXNvdXJjZU5hbWVzKS50b0NvbnRhaW4oJ0V4ZWN1dGlvbnMnKTtcbiAgICAgICAgZXhwZWN0KHJlc291cmNlTmFtZXMpLnRvQ29udGFpbignTm9kZXMnKTtcbiAgICAgICAgZXhwZWN0KHJlc291cmNlTmFtZXMpLm5vdC50b0NvbnRhaW4oJ0NyZWRlbnRpYWxzJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NhY2hlIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICByZXNvdXJjZU1hbmFnZXIgPSBuZXcgUmVzb3VyY2VNYW5hZ2VyKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNsZWFyIGFsbCBjYWNoZXMnLCAoKSA9PiB7XG4gICAgICByZXNvdXJjZU1hbmFnZXIuY2xlYXJBbGxDYWNoZXMoKTtcbiAgICAgIGV4cGVjdChtb2NrQ29uc29sZUxvZykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ/Cfp7kgQWxsIHJlc291cmNlIGNhY2hlcyBjbGVhcmVkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdldCBjYWNoZSBzdGF0aXN0aWNzJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdHMgPSByZXNvdXJjZU1hbmFnZXIuZ2V0QWxsQ2FjaGVTdGF0cygpO1xuICAgICAgZXhwZWN0KHN0YXRzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHN0YXRzLndvcmtmbG93cykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChzdGF0cy5leGVjdXRpb25zKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBzdGF0cy53b3JrZmxvd3Muc2l6ZSkudG9CZSgnbnVtYmVyJyk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShzdGF0cy53b3JrZmxvd3Mua2V5cykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGZWF0dXJlIFRlc3RpbmcnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICByZXNvdXJjZU1hbmFnZXIgPSBuZXcgUmVzb3VyY2VNYW5hZ2VyKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRlc3QgZmVhdHVyZXMgdGhhdCBzdWNjZWVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudC5nZXRQcm9qZWN0cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IFtdIH0pO1xuICAgICAgcmVzb3VyY2VNYW5hZ2VyLnJlZ2lzdGVyKG1vY2tTZXJ2ZXIsIGdldENsaWVudEZuKTtcblxuICAgICAgY29uc3QgYWRkUmVzb3VyY2VDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmkgPT09ICduOG46Ly9pbmZvJ1xuICAgICAgKTtcbiAgICAgIGlmICghYWRkUmVzb3VyY2VDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlIGNhbGwgbm90IGZvdW5kJyk7XG4gICAgICBjb25zdCByZXNvdXJjZSA9IGFkZFJlc291cmNlQ2FsbFswXTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc291cmNlLmxvYWQoKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKChyZXN1bHQgYXMgYW55KS50ZXh0KTtcblxuICAgICAgZXhwZWN0KGRhdGEuZmVhdHVyZXMucHJvamVjdHMpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRlc3QgZmVhdHVyZXMgdGhhdCBmYWlsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudC5nZXRQcm9qZWN0cy5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0ZlYXR1cmUgbm90IGF2YWlsYWJsZScpKTtcbiAgICAgIHJlc291cmNlTWFuYWdlci5yZWdpc3Rlcihtb2NrU2VydmVyLCBnZXRDbGllbnRGbik7XG5cbiAgICAgIGNvbnN0IGFkZFJlc291cmNlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2UubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpID09PSAnbjhuOi8vaW5mbydcbiAgICAgICk7XG4gICAgICBpZiAoIWFkZFJlc291cmNlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdSZXNvdXJjZSBjYWxsIG5vdCBmb3VuZCcpO1xuICAgICAgY29uc3QgcmVzb3VyY2UgPSBhZGRSZXNvdXJjZUNhbGxbMF07XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNvdXJjZS5sb2FkKCk7XG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgocmVzdWx0IGFzIGFueSkudGV4dCk7XG5cbiAgICAgIGV4cGVjdChkYXRhLmZlYXR1cmVzLnByb2plY3RzKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZhY3RvcnkgRnVuY3Rpb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIHJlc291cmNlIG1hbmFnZXIgd2l0aCBmYWN0b3J5IGZ1bmN0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWFuYWdlciA9IGNyZWF0ZVJlc291cmNlTWFuYWdlcigpO1xuICAgICAgZXhwZWN0KG1hbmFnZXIpLnRvQmVJbnN0YW5jZU9mKFJlc291cmNlTWFuYWdlcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSByZXNvdXJjZSBtYW5hZ2VyIHdpdGggY29uZmlnIHZpYSBmYWN0b3J5JywgKCkgPT4ge1xuICAgICAgY29uc3QgY29uZmlnID0geyBtYXhJdGVtczogNTAgfTtcbiAgICAgIGNvbnN0IG1hbmFnZXIgPSBjcmVhdGVSZXNvdXJjZU1hbmFnZXIoY29uZmlnKTtcbiAgICAgIGV4cGVjdChtYW5hZ2VyKS50b0JlSW5zdGFuY2VPZihSZXNvdXJjZU1hbmFnZXIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRW52aXJvbm1lbnQgQ29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICBjb25zdCBvcmlnaW5hbEVudiA9IHByb2Nlc3MuZW52O1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBqZXN0LnJlc2V0TW9kdWxlcygpO1xuICAgICAgcHJvY2Vzcy5lbnYgPSB7IC4uLm9yaWdpbmFsRW52IH07XG4gICAgfSk7XG5cbiAgICBhZnRlckVhY2goKCkgPT4ge1xuICAgICAgcHJvY2Vzcy5lbnYgPSBvcmlnaW5hbEVudjtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcGFyc2UgZGVmYXVsdCBjb25maWd1cmF0aW9uIGZyb20gZW1wdHkgZW52aXJvbm1lbnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25maWcgPSBwYXJzZVJlc291cmNlQ29uZmlnRnJvbUVudigpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5lbmFibGVXb3JrZmxvd3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoY29uZmlnLmVuYWJsZUV4ZWN1dGlvbnMpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoY29uZmlnLmVuYWJsZUNyZWRlbnRpYWxzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChjb25maWcuZW5hYmxlTm9kZXMpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHBhcnNlIGNvbmZpZ3VyYXRpb24gZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXMnLCAoKSA9PiB7XG4gICAgICBwcm9jZXNzLmVudltSRVNPVVJDRV9FTlZfQ09ORklHLkJBU0VfVVJJXSA9ICdjdXN0b206Ly9uOG4nO1xuICAgICAgcHJvY2Vzcy5lbnZbUkVTT1VSQ0VfRU5WX0NPTkZJRy5FTkFCTEVfV09SS0ZMT1dTXSA9ICdmYWxzZSc7XG4gICAgICBwcm9jZXNzLmVudltSRVNPVVJDRV9FTlZfQ09ORklHLkVOQUJMRV9DUkVERU5USUFMU10gPSAndHJ1ZSc7XG4gICAgICBwcm9jZXNzLmVudltSRVNPVVJDRV9FTlZfQ09ORklHLkNBQ0hFX0RVUkFUSU9OXSA9ICcxMDAwMCc7XG4gICAgICBwcm9jZXNzLmVudltSRVNPVVJDRV9FTlZfQ09ORklHLk1BWF9JVEVNU10gPSAnMjAwJztcblxuICAgICAgY29uc3QgY29uZmlnID0gcGFyc2VSZXNvdXJjZUNvbmZpZ0Zyb21FbnYoKTtcblxuICAgICAgZXhwZWN0KGNvbmZpZy5iYXNlVXJpKS50b0JlKCdjdXN0b206Ly9uOG4nKTtcbiAgICAgIGV4cGVjdChjb25maWcuZW5hYmxlV29ya2Zsb3dzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChjb25maWcuZW5hYmxlQ3JlZGVudGlhbHMpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoY29uZmlnLmdsb2JhbENhY2hlRHVyYXRpb24pLnRvQmUoMTAwMDApO1xuICAgICAgZXhwZWN0KGNvbmZpZy5tYXhJdGVtcykudG9CZSgyMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCBudW1lcmljIGVudmlyb25tZW50IHZhcmlhYmxlcycsICgpID0+IHtcbiAgICAgIHByb2Nlc3MuZW52W1JFU09VUkNFX0VOVl9DT05GSUcuQ0FDSEVfRFVSQVRJT05dID0gJ2ludmFsaWQnO1xuICAgICAgcHJvY2Vzcy5lbnZbUkVTT1VSQ0VfRU5WX0NPTkZJRy5NQVhfSVRFTVNdID0gJ25vdC1hLW51bWJlcic7XG5cbiAgICAgIGNvbnN0IGNvbmZpZyA9IHBhcnNlUmVzb3VyY2VDb25maWdGcm9tRW52KCk7XG5cbiAgICAgIGV4cGVjdChjb25maWcuZ2xvYmFsQ2FjaGVEdXJhdGlvbikudG9CZU5hTigpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5tYXhJdGVtcykudG9CZU5hTigpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBjb25zdGFudHMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoUkVTT1VSQ0VfRU5WX0NPTkZJRy5CQVNFX1VSSSkudG9CZSgnTjhOX01DUF9SRVNPVVJDRV9CQVNFX1VSSScpO1xuICAgICAgZXhwZWN0KFJFU09VUkNFX0VOVl9DT05GSUcuRU5BQkxFX1dPUktGTE9XUykudG9CZSgnTjhOX01DUF9FTkFCTEVfV09SS0ZMT1dfUkVTT1VSQ0VTJyk7XG4gICAgICBleHBlY3QoUkVTT1VSQ0VfRU5WX0NPTkZJRy5FTkFCTEVfRVhFQ1VUSU9OUykudG9CZSgnTjhOX01DUF9FTkFCTEVfRVhFQ1VUSU9OX1JFU09VUkNFUycpO1xuICAgICAgZXhwZWN0KFJFU09VUkNFX0VOVl9DT05GSUcuRU5BQkxFX0NSRURFTlRJQUxTKS50b0JlKCdOOE5fTUNQX0VOQUJMRV9DUkVERU5USUFMX1JFU09VUkNFUycpO1xuICAgICAgZXhwZWN0KFJFU09VUkNFX0VOVl9DT05GSUcuRU5BQkxFX05PREVTKS50b0JlKCdOOE5fTUNQX0VOQUJMRV9OT0RFX1JFU09VUkNFUycpO1xuICAgICAgZXhwZWN0KFJFU09VUkNFX0VOVl9DT05GSUcuQ0FDSEVfRFVSQVRJT04pLnRvQmUoJ044Tl9NQ1BfUkVTT1VSQ0VfQ0FDSEVfRFVSQVRJT04nKTtcbiAgICAgIGV4cGVjdChSRVNPVVJDRV9FTlZfQ09ORklHLk1BWF9JVEVNUykudG9CZSgnTjhOX01DUF9SRVNPVVJDRV9NQVhfSVRFTVMnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VkZ2UgQ2FzZXMgYW5kIEVycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgcmVzb3VyY2VNYW5hZ2VyID0gbmV3IFJlc291cmNlTWFuYWdlcigpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY2xpZW50IGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBudWxsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbnVsbENsaWVudEZuID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShudWxsKSBhcyAoKSA9PiBOOG5DbGllbnQgfCBudWxsO1xuICAgICAgcmVzb3VyY2VNYW5hZ2VyLnJlZ2lzdGVyKG1vY2tTZXJ2ZXIsIG51bGxDbGllbnRGbik7XG5cbiAgICAgIGNvbnN0IGFkZFJlc291cmNlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2UubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpID09PSAnbjhuOi8vaW5mbydcbiAgICAgICk7XG4gICAgICBpZiAoIWFkZFJlc291cmNlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdSZXNvdXJjZSBjYWxsIG5vdCBmb3VuZCcpO1xuICAgICAgY29uc3QgcmVzb3VyY2UgPSBhZGRSZXNvdXJjZUNhbGxbMF07XG5cbiAgICAgIGF3YWl0IGV4cGVjdChyZXNvdXJjZS5sb2FkKCkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ244biBjbGllbnQgbm90IGluaXRpYWxpemVkLiBSdW4gaW5pdC1uOG4gZmlyc3QuJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHVuZGVmaW5lZCB2YWx1ZXMgaW4gY29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgYmFzZVVyaTogdW5kZWZpbmVkLFxuICAgICAgICBlbmFibGVXb3JrZmxvd3M6IHVuZGVmaW5lZCxcbiAgICAgICAgZ2xvYmFsQ2FjaGVEdXJhdGlvbjogdW5kZWZpbmVkLFxuICAgICAgICBtYXhJdGVtczogdW5kZWZpbmVkLFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KCgpID0+IG5ldyBSZXNvdXJjZU1hbmFnZXIoY29uZmlnIGFzIGFueSkpLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBzdHJpbmcgdmFsdWVzIGluIG5vZGUgdHlwZSBwYXJhbWV0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVzb3VyY2VNYW5hZ2VyID0gbmV3IFJlc291cmNlTWFuYWdlcih7IGVuYWJsZU5vZGVzOiB0cnVlIH0pO1xuICAgICAgcmVzb3VyY2VNYW5hZ2VyLnJlZ2lzdGVyKG1vY2tTZXJ2ZXIsIGdldENsaWVudEZuKTtcblxuICAgICAgY29uc3QgYWRkVGVtcGxhdGVDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZVRlbXBsYXRlLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLnVyaVRlbXBsYXRlID09PSAnbjhuOi8vbm9kZXMve25vZGVUeXBlfSdcbiAgICAgICk7XG4gICAgICBpZiAoIWFkZFRlbXBsYXRlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdUZW1wbGF0ZSBjYWxsIG5vdCBmb3VuZCcpO1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSBhZGRUZW1wbGF0ZUNhbGxbMF07XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0ZW1wbGF0ZS5sb2FkKHsgbm9kZVR5cGU6ICcnIH0pO1xuXG4gICAgICBleHBlY3QoKHJlc3VsdCBhcyBhbnkpLnRleHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgocmVzdWx0IGFzIGFueSkudGV4dCk7XG4gICAgICBleHBlY3QoZGF0YS5ub2RlVHlwZSkudG9CZSgnJyk7XG4gICAgICBleHBlY3QoZGF0YS5uYW1lKS50b0JlKCcnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNwZWNpYWwgY2hhcmFjdGVycyBpbiBjcmVkZW50aWFsIHR5cGUgcGFyYW1ldGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlc291cmNlTWFuYWdlciA9IG5ldyBSZXNvdXJjZU1hbmFnZXIoeyBlbmFibGVDcmVkZW50aWFsczogdHJ1ZSB9KTtcbiAgICAgIHJlc291cmNlTWFuYWdlci5yZWdpc3Rlcihtb2NrU2VydmVyLCBnZXRDbGllbnRGbik7XG5cbiAgICAgIGNvbnN0IGFkZFRlbXBsYXRlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2VUZW1wbGF0ZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmlUZW1wbGF0ZSA9PT0gJ244bjovL2NyZWRlbnRpYWxzL3RlbXBsYXRlL3tjcmVkVHlwZX0nXG4gICAgICApO1xuICAgICAgaWYgKCFhZGRUZW1wbGF0ZUNhbGwpIHRocm93IG5ldyBFcnJvcignVGVtcGxhdGUgY2FsbCBub3QgZm91bmQnKTtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gYWRkVGVtcGxhdGVDYWxsWzBdO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGVtcGxhdGUubG9hZCh7IGNyZWRUeXBlOiAnc3BlY2lhbEBjaGFycyF0eXBlJyB9KTtcblxuICAgICAgZXhwZWN0KChyZXN1bHQgYXMgYW55KS50ZXh0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoKHJlc3VsdCBhcyBhbnkpLnRleHQpO1xuICAgICAgZXhwZWN0KGRhdGEuY3JlZGVudGlhbFR5cGUpLnRvQmUoJ3NwZWNpYWxAY2hhcnMhdHlwZScpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9