7a4c6992ba912f9329444e7cdac8392b
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
const workflow_1 = require("../../../src/tools/workflow");
(0, globals_1.describe)('Workflow Tools', () => {
    let mockClient;
    let mockServer;
    let getClient;
    (0, globals_1.beforeEach)(() => {
        mockClient = global.testUtils.createMockClient();
        getClient = globals_1.jest.fn(() => mockClient);
        mockServer = {
            addTool: globals_1.jest.fn(),
        };
        // Register workflow tools
        (0, workflow_1.createWorkflowTools)(getClient, mockServer);
    });
    (0, globals_1.it)('should register all workflow tools', () => {
        (0, globals_1.expect)(mockServer.addTool).toHaveBeenCalledTimes(7);
        const toolNames = mockServer.addTool.mock.calls.map((call) => call[0].name);
        (0, globals_1.expect)(toolNames).toContain('list-workflows');
        (0, globals_1.expect)(toolNames).toContain('get-workflow');
        (0, globals_1.expect)(toolNames).toContain('create-workflow');
        (0, globals_1.expect)(toolNames).toContain('update-workflow');
        (0, globals_1.expect)(toolNames).toContain('delete-workflow');
        (0, globals_1.expect)(toolNames).toContain('activate-workflow');
        (0, globals_1.expect)(toolNames).toContain('deactivate-workflow');
    });
    (0, globals_1.describe)('list-workflows tool', () => {
        let listWorkflowsTool;
        (0, globals_1.beforeEach)(() => {
            listWorkflowsTool = mockServer.addTool.mock.calls.find((call) => call[0].name === 'list-workflows')[0];
        });
        (0, globals_1.it)('should list workflows successfully', async () => {
            const mockWorkflows = [
                global.testUtils.createMockWorkflow({ id: '1', name: 'Workflow 1', active: true }),
                global.testUtils.createMockWorkflow({ id: '2', name: 'Workflow 2', active: false }),
            ];
            mockClient.getWorkflows.mockResolvedValue(global.testUtils.createMockApiResponse(mockWorkflows));
            const result = await listWorkflowsTool.execute({ limit: 10 });
            (0, globals_1.expect)(mockClient.getWorkflows).toHaveBeenCalledWith({ limit: 10 });
            (0, globals_1.expect)(result).toContain('Found 2 workflow(s)');
            (0, globals_1.expect)(result).toContain('Workflow 1');
            (0, globals_1.expect)(result).toContain('Workflow 2');
            (0, globals_1.expect)(result).toContain('ðŸŸ¢ Active');
            (0, globals_1.expect)(result).toContain('ðŸ”´ Inactive');
        });
        (0, globals_1.it)('should list workflows with tags and pagination', async () => {
            const mockWorkflows = [
                global.testUtils.createMockWorkflow({
                    id: '1',
                    name: 'Tagged Workflow',
                    tags: ['production', 'automation'],
                    createdAt: '2023-01-01T00:00:00.000Z'
                }),
            ];
            mockClient.getWorkflows.mockResolvedValue({
                ...global.testUtils.createMockApiResponse(mockWorkflows),
                nextCursor: 'next-page-cursor'
            });
            const result = await listWorkflowsTool.execute({ cursor: 'current-cursor' });
            (0, globals_1.expect)(mockClient.getWorkflows).toHaveBeenCalledWith({ cursor: 'current-cursor' });
            (0, globals_1.expect)(result).toContain('Tagged Workflow');
            (0, globals_1.expect)(result).toContain('Tags: production, automation');
            (0, globals_1.expect)(result).toContain('ðŸ“„ Use cursor "next-page-cursor" to get the next page.');
        });
        (0, globals_1.it)('should handle empty workflow list', async () => {
            mockClient.getWorkflows.mockResolvedValue(global.testUtils.createMockApiResponse([]));
            const result = await listWorkflowsTool.execute({});
            (0, globals_1.expect)(result).toBe('No workflows found in the n8n instance.');
        });
        (0, globals_1.it)('should handle API errors with Error instance', async () => {
            mockClient.getWorkflows.mockRejectedValue(new Error('API connection failed'));
            await (0, globals_1.expect)(listWorkflowsTool.execute({})).rejects.toThrow('Failed to list workflows: API connection failed');
        });
        (0, globals_1.it)('should handle unknown errors', async () => {
            mockClient.getWorkflows.mockRejectedValue('Unknown error type');
            await (0, globals_1.expect)(listWorkflowsTool.execute({})).rejects.toThrow('Failed to list workflows with unknown error');
        });
        (0, globals_1.it)('should throw UserError when client is not initialized', async () => {
            const uninitializedGetClient = globals_1.jest.fn(() => null);
            const uninitializedServer = { addTool: globals_1.jest.fn() };
            (0, workflow_1.createWorkflowTools)(uninitializedGetClient, uninitializedServer);
            const tool = uninitializedServer.addTool.mock.calls.find((call) => call[0].name === 'list-workflows')?.[0];
            (0, globals_1.expect)(tool).toBeDefined();
            (0, globals_1.expect)(tool).toHaveProperty('execute');
            await (0, globals_1.expect)(tool.execute({})).rejects.toThrow('n8n client not initialized. Please run init-n8n first.');
        });
    });
    (0, globals_1.describe)('get-workflow tool', () => {
        let getWorkflowTool;
        (0, globals_1.beforeEach)(() => {
            getWorkflowTool = mockServer.addTool.mock.calls.find((call) => call[0].name === 'get-workflow')[0];
        });
        (0, globals_1.it)('should get workflow details successfully', async () => {
            const mockWorkflow = global.testUtils.createMockWorkflow({
                id: 'workflow-123',
                name: 'Test Workflow',
                active: true,
            });
            mockClient.getWorkflow.mockResolvedValue(mockWorkflow);
            const result = await getWorkflowTool.execute({ workflowId: 'workflow-123' });
            (0, globals_1.expect)(mockClient.getWorkflow).toHaveBeenCalledWith('workflow-123');
            (0, globals_1.expect)(result).toContain('# Workflow: Test Workflow');
            (0, globals_1.expect)(result).toContain('**ID:** workflow-123');
            (0, globals_1.expect)(result).toContain('**Status:** ðŸŸ¢ Active');
        });
        (0, globals_1.it)('should get workflow details with tags and dates', async () => {
            const mockWorkflow = global.testUtils.createMockWorkflow({
                id: 'workflow-456',
                name: 'Complex Workflow',
                active: false,
                tags: ['test', 'automation'],
                createdAt: '2023-01-01T12:00:00.000Z',
                updatedAt: '2023-01-02T15:30:00.000Z',
                nodes: [
                    { name: 'Start Node', type: 'manual' },
                    { name: undefined, type: undefined } // Test fallback values
                ]
            });
            mockClient.getWorkflow.mockResolvedValue(mockWorkflow);
            const result = await getWorkflowTool.execute({ workflowId: 'workflow-456' });
            (0, globals_1.expect)(result).toContain('**Tags:** test, automation');
            (0, globals_1.expect)(result).toContain('**Created:**');
            (0, globals_1.expect)(result).toContain('**Updated:**');
            (0, globals_1.expect)(result).toContain('**Status:** ðŸ”´ Inactive');
            (0, globals_1.expect)(result).toContain('Start Node');
            (0, globals_1.expect)(result).toContain('Unnamed Node');
            (0, globals_1.expect)(result).toContain('Unknown Type');
        });
        (0, globals_1.it)('should throw UserError when client is not initialized', async () => {
            const uninitializedGetClient = globals_1.jest.fn(() => null);
            const uninitializedServer = { addTool: globals_1.jest.fn() };
            (0, workflow_1.createWorkflowTools)(uninitializedGetClient, uninitializedServer);
            const tool = uninitializedServer.addTool.mock.calls.find((call) => call[0].name === 'get-workflow')?.[0];
            await (0, globals_1.expect)(tool.execute({ workflowId: 'test' })).rejects.toThrow('n8n client not initialized. Please run init-n8n first.');
        });
        (0, globals_1.it)('should handle workflow not found error', async () => {
            mockClient.getWorkflow.mockRejectedValue(new Error('Workflow not found'));
            await (0, globals_1.expect)(getWorkflowTool.execute({ workflowId: 'nonexistent' })).rejects.toThrow('Failed to get workflow: Workflow not found');
        });
        (0, globals_1.it)('should handle unknown errors', async () => {
            mockClient.getWorkflow.mockRejectedValue('Unknown error type');
            await (0, globals_1.expect)(getWorkflowTool.execute({ workflowId: 'test' })).rejects.toThrow('Failed to get workflow with unknown error');
        });
    });
    (0, globals_1.describe)('create-workflow tool', () => {
        let createWorkflowTool;
        (0, globals_1.beforeEach)(() => {
            createWorkflowTool = mockServer.addTool.mock.calls.find((call) => call[0].name === 'create-workflow')[0];
        });
        (0, globals_1.it)('should create workflow successfully', async () => {
            const mockWorkflow = global.testUtils.createMockWorkflow({
                id: 'new-workflow-123',
                name: 'New Workflow',
                active: false,
            });
            mockClient.createWorkflow.mockResolvedValue(mockWorkflow);
            const workflowData = {
                name: 'New Workflow',
                nodes: [{ name: 'Start', type: 'manual' }],
                connections: {},
                active: false,
            };
            const result = await createWorkflowTool.execute(workflowData);
            (0, globals_1.expect)(mockClient.createWorkflow).toHaveBeenCalledWith(workflowData);
            (0, globals_1.expect)(result).toContain('âœ… Successfully created workflow "New Workflow"');
            (0, globals_1.expect)(result).toContain('ID: new-workflow-123');
            (0, globals_1.expect)(result).toContain('ðŸ”´ Inactive');
        });
        (0, globals_1.it)('should throw UserError when client is not initialized', async () => {
            const uninitializedGetClient = globals_1.jest.fn(() => null);
            const uninitializedServer = { addTool: globals_1.jest.fn() };
            (0, workflow_1.createWorkflowTools)(uninitializedGetClient, uninitializedServer);
            const tool = uninitializedServer.addTool.mock.calls.find((call) => call[0].name === 'create-workflow')?.[0];
            const workflowData = {
                name: 'Test Workflow',
                nodes: [{ name: 'Start', type: 'manual' }],
                connections: {},
            };
            await (0, globals_1.expect)(tool.execute(workflowData)).rejects.toThrow('n8n client not initialized. Please run init-n8n first.');
        });
        (0, globals_1.it)('should handle creation errors with Error instance', async () => {
            mockClient.createWorkflow.mockRejectedValue(new Error('Invalid workflow data'));
            const workflowData = {
                name: 'Invalid Workflow',
                nodes: [{ name: 'Start', type: 'manual' }],
                connections: {},
            };
            await (0, globals_1.expect)(createWorkflowTool.execute(workflowData)).rejects.toThrow('Failed to create workflow: Invalid workflow data');
        });
        (0, globals_1.it)('should handle unknown creation errors', async () => {
            mockClient.createWorkflow.mockRejectedValue('Unknown error type');
            const workflowData = {
                name: 'Test Workflow',
                nodes: [{ name: 'Start', type: 'manual' }],
                connections: {},
            };
            await (0, globals_1.expect)(createWorkflowTool.execute(workflowData)).rejects.toThrow('Failed to create workflow with unknown error');
        });
        (0, globals_1.it)('should create active workflow successfully', async () => {
            const mockWorkflow = global.testUtils.createMockWorkflow({
                id: 'active-workflow-123',
                name: 'Active Workflow',
                active: true,
            });
            mockClient.createWorkflow.mockResolvedValue(mockWorkflow);
            const workflowData = {
                name: 'Active Workflow',
                nodes: [{ name: 'Start', type: 'manual' }],
                connections: {},
                active: true,
            };
            const result = await createWorkflowTool.execute(workflowData);
            (0, globals_1.expect)(result).toContain('âœ… Successfully created workflow "Active Workflow"');
            (0, globals_1.expect)(result).toContain('ðŸŸ¢ Active');
        });
    });
    (0, globals_1.describe)('update-workflow tool', () => {
        let updateWorkflowTool;
        (0, globals_1.beforeEach)(() => {
            updateWorkflowTool = mockServer.addTool.mock.calls.find((call) => call[0].name === 'update-workflow')[0];
        });
        (0, globals_1.it)('should update workflow successfully', async () => {
            const mockWorkflow = global.testUtils.createMockWorkflow({
                id: 'workflow-123',
                name: 'Updated Workflow',
                active: false,
            });
            mockClient.updateWorkflow.mockResolvedValue(mockWorkflow);
            const updateData = {
                workflowId: 'workflow-123',
                name: 'Updated Workflow',
                active: false,
            };
            const result = await updateWorkflowTool.execute(updateData);
            (0, globals_1.expect)(mockClient.updateWorkflow).toHaveBeenCalledWith('workflow-123', {
                name: 'Updated Workflow',
                active: false,
            });
            (0, globals_1.expect)(result).toContain('âœ… Successfully updated workflow "Updated Workflow"');
            (0, globals_1.expect)(result).toContain('ID: workflow-123');
            (0, globals_1.expect)(result).toContain('Status: ðŸ”´ Inactive');
        });
        (0, globals_1.it)('should throw UserError when client is not initialized', async () => {
            const uninitializedGetClient = globals_1.jest.fn(() => null);
            const uninitializedServer = { addTool: globals_1.jest.fn() };
            (0, workflow_1.createWorkflowTools)(uninitializedGetClient, uninitializedServer);
            const tool = uninitializedServer.addTool.mock.calls.find((call) => call[0].name === 'update-workflow')?.[0];
            const updateData = {
                workflowId: 'test-id',
                name: 'Test Update',
            };
            await (0, globals_1.expect)(tool.execute(updateData)).rejects.toThrow('n8n client not initialized. Please run init-n8n first.');
        });
        (0, globals_1.it)('should handle update errors with Error instance', async () => {
            mockClient.updateWorkflow.mockRejectedValue(new Error('Workflow not found'));
            const updateData = {
                workflowId: 'nonexistent-id',
                name: 'Updated Name',
            };
            await (0, globals_1.expect)(updateWorkflowTool.execute(updateData)).rejects.toThrow('Failed to update workflow: Workflow not found');
        });
        (0, globals_1.it)('should handle unknown update errors', async () => {
            mockClient.updateWorkflow.mockRejectedValue('Unknown error type');
            const updateData = {
                workflowId: 'test-id',
                name: 'Test Update',
            };
            await (0, globals_1.expect)(updateWorkflowTool.execute(updateData)).rejects.toThrow('Failed to update workflow with unknown error');
        });
        (0, globals_1.it)('should update workflow to active status successfully', async () => {
            const mockWorkflow = global.testUtils.createMockWorkflow({
                id: 'workflow-456',
                name: 'Activated Workflow',
                active: true,
            });
            mockClient.updateWorkflow.mockResolvedValue(mockWorkflow);
            const updateData = {
                workflowId: 'workflow-456',
                name: 'Activated Workflow',
                active: true,
            };
            const result = await updateWorkflowTool.execute(updateData);
            (0, globals_1.expect)(result).toContain('âœ… Successfully updated workflow "Activated Workflow"');
            (0, globals_1.expect)(result).toContain('Status: ðŸŸ¢ Active');
        });
    });
    (0, globals_1.describe)('delete-workflow tool', () => {
        let deleteWorkflowTool;
        (0, globals_1.beforeEach)(() => {
            deleteWorkflowTool = mockServer.addTool.mock.calls.find((call) => call[0].name === 'delete-workflow')[0];
        });
        (0, globals_1.it)('should delete workflow successfully', async () => {
            mockClient.deleteWorkflow.mockResolvedValue(undefined);
            const result = await deleteWorkflowTool.execute({ workflowId: 'workflow-123' });
            (0, globals_1.expect)(mockClient.deleteWorkflow).toHaveBeenCalledWith('workflow-123');
            (0, globals_1.expect)(result).toContain('âœ… Successfully deleted workflow with ID: workflow-123');
        });
        (0, globals_1.it)('should throw UserError when client is not initialized', async () => {
            const uninitializedGetClient = globals_1.jest.fn(() => null);
            const uninitializedServer = { addTool: globals_1.jest.fn() };
            (0, workflow_1.createWorkflowTools)(uninitializedGetClient, uninitializedServer);
            const tool = uninitializedServer.addTool.mock.calls.find((call) => call[0].name === 'delete-workflow')?.[0];
            await (0, globals_1.expect)(tool.execute({ workflowId: 'test-id' })).rejects.toThrow('n8n client not initialized. Please run init-n8n first.');
        });
        (0, globals_1.it)('should handle delete errors with Error instance', async () => {
            mockClient.deleteWorkflow.mockRejectedValue(new Error('Workflow not found'));
            await (0, globals_1.expect)(deleteWorkflowTool.execute({ workflowId: 'nonexistent' })).rejects.toThrow('Failed to delete workflow: Workflow not found');
        });
        (0, globals_1.it)('should handle unknown delete errors', async () => {
            mockClient.deleteWorkflow.mockRejectedValue('Unknown error type');
            await (0, globals_1.expect)(deleteWorkflowTool.execute({ workflowId: 'test-id' })).rejects.toThrow('Failed to delete workflow with unknown error');
        });
    });
    (0, globals_1.describe)('workflow activation tools', () => {
        let activateWorkflowTool;
        let deactivateWorkflowTool;
        (0, globals_1.beforeEach)(() => {
            activateWorkflowTool = mockServer.addTool.mock.calls.find((call) => call[0].name === 'activate-workflow')[0];
            deactivateWorkflowTool = mockServer.addTool.mock.calls.find((call) => call[0].name === 'deactivate-workflow')[0];
        });
        (0, globals_1.it)('should activate workflow successfully', async () => {
            const mockWorkflow = global.testUtils.createMockWorkflow({
                id: 'workflow-123',
                name: 'Test Workflow',
                active: true,
            });
            mockClient.activateWorkflow.mockResolvedValue(mockWorkflow);
            const result = await activateWorkflowTool.execute({ workflowId: 'workflow-123' });
            (0, globals_1.expect)(mockClient.activateWorkflow).toHaveBeenCalledWith('workflow-123');
            (0, globals_1.expect)(result).toContain('âœ… Successfully activated workflow "Test Workflow"');
            (0, globals_1.expect)(result).toContain('Status: ðŸŸ¢ Active');
        });
        (0, globals_1.it)('should throw UserError when client is not initialized for activation', async () => {
            const uninitializedGetClient = globals_1.jest.fn(() => null);
            const uninitializedServer = { addTool: globals_1.jest.fn() };
            (0, workflow_1.createWorkflowTools)(uninitializedGetClient, uninitializedServer);
            const tool = uninitializedServer.addTool.mock.calls.find((call) => call[0].name === 'activate-workflow')?.[0];
            await (0, globals_1.expect)(tool.execute({ workflowId: 'test-id' })).rejects.toThrow('n8n client not initialized. Please run init-n8n first.');
        });
        (0, globals_1.it)('should handle activation errors with Error instance', async () => {
            mockClient.activateWorkflow.mockRejectedValue(new Error('Workflow activation failed'));
            await (0, globals_1.expect)(activateWorkflowTool.execute({ workflowId: 'broken-workflow' })).rejects.toThrow('Failed to activate workflow: Workflow activation failed');
        });
        (0, globals_1.it)('should handle unknown activation errors', async () => {
            mockClient.activateWorkflow.mockRejectedValue('Unknown error type');
            await (0, globals_1.expect)(activateWorkflowTool.execute({ workflowId: 'test-id' })).rejects.toThrow('Failed to activate workflow with unknown error');
        });
        (0, globals_1.it)('should deactivate workflow successfully', async () => {
            const mockWorkflow = global.testUtils.createMockWorkflow({
                id: 'workflow-123',
                name: 'Test Workflow',
                active: false,
            });
            mockClient.deactivateWorkflow.mockResolvedValue(mockWorkflow);
            const result = await deactivateWorkflowTool.execute({ workflowId: 'workflow-123' });
            (0, globals_1.expect)(mockClient.deactivateWorkflow).toHaveBeenCalledWith('workflow-123');
            (0, globals_1.expect)(result).toContain('âœ… Successfully deactivated workflow "Test Workflow"');
            (0, globals_1.expect)(result).toContain('Status: ðŸ”´ Inactive');
        });
        (0, globals_1.it)('should throw UserError when client is not initialized for deactivation', async () => {
            const uninitializedGetClient = globals_1.jest.fn(() => null);
            const uninitializedServer = { addTool: globals_1.jest.fn() };
            (0, workflow_1.createWorkflowTools)(uninitializedGetClient, uninitializedServer);
            const tool = uninitializedServer.addTool.mock.calls.find((call) => call[0].name === 'deactivate-workflow')?.[0];
            await (0, globals_1.expect)(tool.execute({ workflowId: 'test-id' })).rejects.toThrow('n8n client not initialized. Please run init-n8n first.');
        });
        (0, globals_1.it)('should handle deactivation errors with Error instance', async () => {
            mockClient.deactivateWorkflow.mockRejectedValue(new Error('Workflow deactivation failed'));
            await (0, globals_1.expect)(deactivateWorkflowTool.execute({ workflowId: 'broken-workflow' })).rejects.toThrow('Failed to deactivate workflow: Workflow deactivation failed');
        });
        (0, globals_1.it)('should handle unknown deactivation errors', async () => {
            mockClient.deactivateWorkflow.mockRejectedValue('Unknown error type');
            await (0, globals_1.expect)(deactivateWorkflowTool.execute({ workflowId: 'test-id' })).rejects.toThrow('Failed to deactivate workflow with unknown error');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2plcmVteXBhcmtlci9EZXNrdG9wL0NsYXVkZSBDb2RpbmcgUHJvamVjdHMvbjhuLW1jcC1zZXJ2ZXIvdGVzdHMvdW5pdC90b29scy93b3JrZmxvdy50ZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBQUEsMkNBQXVFO0FBQ3ZFLDBEQUFrRTtBQUdsRSxJQUFBLGtCQUFRLEVBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO0lBQzlCLElBQUksVUFBa0MsQ0FBQztJQUN2QyxJQUFJLFVBQWUsQ0FBQztJQUNwQixJQUFJLFNBQWlDLENBQUM7SUFFdEMsSUFBQSxvQkFBVSxFQUFDLEdBQUcsRUFBRTtRQUNkLFVBQVUsR0FBSSxNQUFjLENBQUMsU0FBUyxDQUFDLGdCQUFnQixFQUE0QixDQUFDO1FBQ3BGLFNBQVMsR0FBRyxjQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3RDLFVBQVUsR0FBRztZQUNYLE9BQU8sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1NBQ25CLENBQUM7UUFFRiwwQkFBMEI7UUFDMUIsSUFBQSw4QkFBbUIsRUFBQyxTQUFTLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDN0MsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFBLFlBQUUsRUFBQyxvQ0FBb0MsRUFBRSxHQUFHLEVBQUU7UUFDNUMsSUFBQSxnQkFBTSxFQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVwRCxNQUFNLFNBQVMsR0FBRyxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBUyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDakYsSUFBQSxnQkFBTSxFQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQzlDLElBQUEsZ0JBQU0sRUFBQyxTQUFTLENBQUMs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QyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FDckYsa0RBQWtELENBQ25ELENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2plcmVteXBhcmtlci9EZXNrdG9wL0NsYXVkZSBDb2RpbmcgUHJvamVjdHMvbjhuLW1jcC1zZXJ2ZXIvdGVzdHMvdW5pdC90b29scy93b3JrZmxvdy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBiZWZvcmVFYWNoLCBqZXN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgeyBjcmVhdGVXb3JrZmxvd1Rvb2xzIH0gZnJvbSAnLi4vLi4vLi4vc3JjL3Rvb2xzL3dvcmtmbG93JztcbmltcG9ydCB7IE44bkNsaWVudCB9IGZyb20gJy4uLy4uLy4uL3NyYy9jbGllbnQvbjhuQ2xpZW50JztcblxuZGVzY3JpYmUoJ1dvcmtmbG93IFRvb2xzJywgKCkgPT4ge1xuICBsZXQgbW9ja0NsaWVudDogamVzdC5Nb2NrZWQ8TjhuQ2xpZW50PjtcbiAgbGV0IG1vY2tTZXJ2ZXI6IGFueTtcbiAgbGV0IGdldENsaWVudDogKCkgPT4gTjhuQ2xpZW50IHwgbnVsbDtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBtb2NrQ2xpZW50ID0gKGdsb2JhbCBhcyBhbnkpLnRlc3RVdGlscy5jcmVhdGVNb2NrQ2xpZW50KCkgYXMgamVzdC5Nb2NrZWQ8TjhuQ2xpZW50PjtcbiAgICBnZXRDbGllbnQgPSBqZXN0LmZuKCgpID0+IG1vY2tDbGllbnQpO1xuICAgIG1vY2tTZXJ2ZXIgPSB7XG4gICAgICBhZGRUb29sOiBqZXN0LmZuKCksXG4gICAgfTtcblxuICAgIC8vIFJlZ2lzdGVyIHdvcmtmbG93IHRvb2xzXG4gICAgY3JlYXRlV29ya2Zsb3dUb29scyhnZXRDbGllbnQsIG1vY2tTZXJ2ZXIpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJlZ2lzdGVyIGFsbCB3b3JrZmxvdyB0b29scycsICgpID0+IHtcbiAgICBleHBlY3QobW9ja1NlcnZlci5hZGRUb29sKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoNyk7XG5cbiAgICBjb25zdCB0b29sTmFtZXMgPSBtb2NrU2VydmVyLmFkZFRvb2wubW9jay5jYWxscy5tYXAoKGNhbGw6IGFueSkgPT4gY2FsbFswXS5uYW1lKTtcbiAgICBleHBlY3QodG9vbE5hbWVzKS50b0NvbnRhaW4oJ2xpc3Qtd29ya2Zsb3dzJyk7XG4gICAgZXhwZWN0KHRvb2xOYW1lcykudG9Db250YWluKCdnZXQtd29ya2Zsb3cnKTtcbiAgICBleHBlY3QodG9vbE5hbWVzKS50b0NvbnRhaW4oJ2NyZWF0ZS13b3JrZmxvdycpO1xuICAgIGV4cGVjdCh0b29sTmFtZXMpLnRvQ29udGFpbigndXBkYXRlLXdvcmtmbG93Jyk7XG4gICAgZXhwZWN0KHRvb2xOYW1lcykudG9Db250YWluKCdkZWxldGUtd29ya2Zsb3cnKTtcbiAgICBleHBlY3QodG9vbE5hbWVzKS50b0NvbnRhaW4oJ2FjdGl2YXRlLXdvcmtmbG93Jyk7XG4gICAgZXhwZWN0KHRvb2xOYW1lcykudG9Db250YWluKCdkZWFjdGl2YXRlLXdvcmtmbG93Jyk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsaXN0LXdvcmtmbG93cyB0b29sJywgKCkgPT4ge1xuICAgIGxldCBsaXN0V29ya2Zsb3dzVG9vbDogYW55O1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBsaXN0V29ya2Zsb3dzVG9vbCA9IG1vY2tTZXJ2ZXIuYWRkVG9vbC5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIChjYWxsOiBhbnkpID0+IGNhbGxbMF0ubmFtZSA9PT0gJ2xpc3Qtd29ya2Zsb3dzJ1xuICAgICAgKVswXTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbGlzdCB3b3JrZmxvd3Mgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1dvcmtmbG93cyA9IFtcbiAgICAgICAgKGdsb2JhbCBhcyBhbnkpLnRlc3RVdGlscy5jcmVhdGVNb2NrV29ya2Zsb3coeyBpZDogJzEnLCBuYW1lOiAnV29ya2Zsb3cgMScsIGFjdGl2ZTogdHJ1ZSB9KSxcbiAgICAgICAgKGdsb2JhbCBhcyBhbnkpLnRlc3RVdGlscy5jcmVhdGVNb2NrV29ya2Zsb3coeyBpZDogJzInLCBuYW1lOiAnV29ya2Zsb3cgMicsIGFjdGl2ZTogZmFsc2UgfSksXG4gICAgICBdO1xuXG4gICAgICBtb2NrQ2xpZW50LmdldFdvcmtmbG93cy5tb2NrUmVzb2x2ZWRWYWx1ZShcbiAgICAgICAgKGdsb2JhbCBhcyBhbnkpLnRlc3RVdGlscy5jcmVhdGVNb2NrQXBpUmVzcG9uc2UobW9ja1dvcmtmbG93cylcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGxpc3RXb3JrZmxvd3NUb29sLmV4ZWN1dGUoeyBsaW1pdDogMTAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ2xpZW50LmdldFdvcmtmbG93cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoeyBsaW1pdDogMTAgfSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJ0ZvdW5kIDIgd29ya2Zsb3cocyknKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQ29udGFpbignV29ya2Zsb3cgMScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9Db250YWluKCdXb3JrZmxvdyAyJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJ/Cfn6IgQWN0aXZlJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJ/CflLQgSW5hY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbGlzdCB3b3JrZmxvd3Mgd2l0aCB0YWdzIGFuZCBwYWdpbmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1dvcmtmbG93cyA9IFtcbiAgICAgICAgKGdsb2JhbCBhcyBhbnkpLnRlc3RVdGlscy5jcmVhdGVNb2NrV29ya2Zsb3coeyBcbiAgICAgICAgICBpZDogJzEnLCBcbiAgICAgICAgICBuYW1lOiAnVGFnZ2VkIFdvcmtmbG93JyxcbiAgICAgICAgICB0YWdzOiBbJ3Byb2R1Y3Rpb24nLCAnYXV0b21hdGlvbiddLFxuICAgICAgICAgIGNyZWF0ZWRBdDogJzIwMjMtMDEtMDFUMDA6MDA6MDAuMDAwWidcbiAgICAgICAgfSksXG4gICAgICBdO1xuXG4gICAgICBtb2NrQ2xpZW50LmdldFdvcmtmbG93cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIC4uLihnbG9iYWwgYXMgYW55KS50ZXN0VXRpbHMuY3JlYXRlTW9ja0FwaVJlc3BvbnNlKG1vY2tXb3JrZmxvd3MpLFxuICAgICAgICBuZXh0Q3Vyc29yOiAnbmV4dC1wYWdlLWN1cnNvcidcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBsaXN0V29ya2Zsb3dzVG9vbC5leGVjdXRlKHsgY3Vyc29yOiAnY3VycmVudC1jdXJzb3InIH0pO1xuXG4gICAgICBleHBlY3QobW9ja0NsaWVudC5nZXRXb3JrZmxvd3MpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHsgY3Vyc29yOiAnY3VycmVudC1jdXJzb3InIH0pO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9Db250YWluKCdUYWdnZWQgV29ya2Zsb3cnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQ29udGFpbignVGFnczogcHJvZHVjdGlvbiwgYXV0b21hdGlvbicpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9Db250YWluKCfwn5OEIFVzZSBjdXJzb3IgXCJuZXh0LXBhZ2UtY3Vyc29yXCIgdG8gZ2V0IHRoZSBuZXh0IHBhZ2UuJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSB3b3JrZmxvdyBsaXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudC5nZXRXb3JrZmxvd3MubW9ja1Jlc29sdmVkVmFsdWUoXG4gICAgICAgIChnbG9iYWwgYXMgYW55KS50ZXN0VXRpbHMuY3JlYXRlTW9ja0FwaVJlc3BvbnNlKFtdKVxuICAgICAgKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbGlzdFdvcmtmbG93c1Rvb2wuZXhlY3V0ZSh7fSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ05vIHdvcmtmbG93cyBmb3VuZCBpbiB0aGUgbjhuIGluc3RhbmNlLicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgQVBJIGVycm9ycyB3aXRoIEVycm9yIGluc3RhbmNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudC5nZXRXb3JrZmxvd3MubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdBUEkgY29ubmVjdGlvbiBmYWlsZWQnKSk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChsaXN0V29ya2Zsb3dzVG9vbC5leGVjdXRlKHt9KSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAnRmFpbGVkIHRvIGxpc3Qgd29ya2Zsb3dzOiBBUEkgY29ubmVjdGlvbiBmYWlsZWQnXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdW5rbm93biBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2xpZW50LmdldFdvcmtmbG93cy5tb2NrUmVqZWN0ZWRWYWx1ZSgnVW5rbm93biBlcnJvciB0eXBlJyk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChsaXN0V29ya2Zsb3dzVG9vbC5leGVjdXRlKHt9KSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAnRmFpbGVkIHRvIGxpc3Qgd29ya2Zsb3dzIHdpdGggdW5rbm93biBlcnJvcidcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IFVzZXJFcnJvciB3aGVuIGNsaWVudCBpcyBub3QgaW5pdGlhbGl6ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1bmluaXRpYWxpemVkR2V0Q2xpZW50ID0gamVzdC5mbigoKSA9PiBudWxsKTtcbiAgICAgIGNvbnN0IHVuaW5pdGlhbGl6ZWRTZXJ2ZXIgPSB7IGFkZFRvb2w6IGplc3QuZm4oKSB9O1xuXG4gICAgICBjcmVhdGVXb3JrZmxvd1Rvb2xzKHVuaW5pdGlhbGl6ZWRHZXRDbGllbnQsIHVuaW5pdGlhbGl6ZWRTZXJ2ZXIpO1xuICAgICAgY29uc3QgdG9vbCA9IHVuaW5pdGlhbGl6ZWRTZXJ2ZXIuYWRkVG9vbC5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIChjYWxsOiBhbnkpID0+IGNhbGxbMF0ubmFtZSA9PT0gJ2xpc3Qtd29ya2Zsb3dzJ1xuICAgICAgKT8uWzBdO1xuXG4gICAgICBleHBlY3QodG9vbCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh0b29sKS50b0hhdmVQcm9wZXJ0eSgnZXhlY3V0ZScpO1xuICAgICAgYXdhaXQgZXhwZWN0KCh0b29sIGFzIGFueSkuZXhlY3V0ZSh7fSkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ244biBjbGllbnQgbm90IGluaXRpYWxpemVkLiBQbGVhc2UgcnVuIGluaXQtbjhuIGZpcnN0LidcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXQtd29ya2Zsb3cgdG9vbCcsICgpID0+IHtcbiAgICBsZXQgZ2V0V29ya2Zsb3dUb29sOiBhbnk7XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIGdldFdvcmtmbG93VG9vbCA9IG1vY2tTZXJ2ZXIuYWRkVG9vbC5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIChjYWxsOiBhbnkpID0+IGNhbGxbMF0ubmFtZSA9PT0gJ2dldC13b3JrZmxvdydcbiAgICAgIClbMF07XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdldCB3b3JrZmxvdyBkZXRhaWxzIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tXb3JrZmxvdyA9IChnbG9iYWwgYXMgYW55KS50ZXN0VXRpbHMuY3JlYXRlTW9ja1dvcmtmbG93KHtcbiAgICAgICAgaWQ6ICd3b3JrZmxvdy0xMjMnLFxuICAgICAgICBuYW1lOiAnVGVzdCBXb3JrZmxvdycsXG4gICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICBtb2NrQ2xpZW50LmdldFdvcmtmbG93Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tXb3JrZmxvdyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFdvcmtmbG93VG9vbC5leGVjdXRlKHsgd29ya2Zsb3dJZDogJ3dvcmtmbG93LTEyMycgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ2xpZW50LmdldFdvcmtmbG93KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnd29ya2Zsb3ctMTIzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJyMgV29ya2Zsb3c6IFRlc3QgV29ya2Zsb3cnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQ29udGFpbignKipJRDoqKiB3b3JrZmxvdy0xMjMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQ29udGFpbignKipTdGF0dXM6Kiog8J+foiBBY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2V0IHdvcmtmbG93IGRldGFpbHMgd2l0aCB0YWdzIGFuZCBkYXRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tXb3JrZmxvdyA9IChnbG9iYWwgYXMgYW55KS50ZXN0VXRpbHMuY3JlYXRlTW9ja1dvcmtmbG93KHtcbiAgICAgICAgaWQ6ICd3b3JrZmxvdy00NTYnLFxuICAgICAgICBuYW1lOiAnQ29tcGxleCBXb3JrZmxvdycsXG4gICAgICAgIGFjdGl2ZTogZmFsc2UsXG4gICAgICAgIHRhZ3M6IFsndGVzdCcsICdhdXRvbWF0aW9uJ10sXG4gICAgICAgIGNyZWF0ZWRBdDogJzIwMjMtMDEtMDFUMTI6MDA6MDAuMDAwWicsXG4gICAgICAgIHVwZGF0ZWRBdDogJzIwMjMtMDEtMDJUMTU6MzA6MDAuMDAwWicsXG4gICAgICAgIG5vZGVzOiBbXG4gICAgICAgICAgeyBuYW1lOiAnU3RhcnQgTm9kZScsIHR5cGU6ICdtYW51YWwnIH0sXG4gICAgICAgICAgeyBuYW1lOiB1bmRlZmluZWQsIHR5cGU6IHVuZGVmaW5lZCB9IC8vIFRlc3QgZmFsbGJhY2sgdmFsdWVzXG4gICAgICAgIF1cbiAgICAgIH0pO1xuXG4gICAgICBtb2NrQ2xpZW50LmdldFdvcmtmbG93Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tXb3JrZmxvdyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFdvcmtmbG93VG9vbC5leGVjdXRlKHsgd29ya2Zsb3dJZDogJ3dvcmtmbG93LTQ1NicgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQ29udGFpbignKipUYWdzOioqIHRlc3QsIGF1dG9tYXRpb24nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQ29udGFpbignKipDcmVhdGVkOioqJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJyoqVXBkYXRlZDoqKicpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9Db250YWluKCcqKlN0YXR1czoqKiDwn5S0IEluYWN0aXZlJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJ1N0YXJ0IE5vZGUnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQ29udGFpbignVW5uYW1lZCBOb2RlJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJ1Vua25vd24gVHlwZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBVc2VyRXJyb3Igd2hlbiBjbGllbnQgaXMgbm90IGluaXRpYWxpemVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdW5pbml0aWFsaXplZEdldENsaWVudCA9IGplc3QuZm4oKCkgPT4gbnVsbCk7XG4gICAgICBjb25zdCB1bmluaXRpYWxpemVkU2VydmVyID0geyBhZGRUb29sOiBqZXN0LmZuKCkgfTtcblxuICAgICAgY3JlYXRlV29ya2Zsb3dUb29scyh1bmluaXRpYWxpemVkR2V0Q2xpZW50LCB1bmluaXRpYWxpemVkU2VydmVyKTtcbiAgICAgIGNvbnN0IHRvb2wgPSB1bmluaXRpYWxpemVkU2VydmVyLmFkZFRvb2wubW9jay5jYWxscy5maW5kKFxuICAgICAgICAoY2FsbDogYW55KSA9PiBjYWxsWzBdLm5hbWUgPT09ICdnZXQtd29ya2Zsb3cnXG4gICAgICApPy5bMF07XG5cbiAgICAgIGF3YWl0IGV4cGVjdCgodG9vbCBhcyBhbnkpLmV4ZWN1dGUoeyB3b3JrZmxvd0lkOiAndGVzdCcgfSkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ244biBjbGllbnQgbm90IGluaXRpYWxpemVkLiBQbGVhc2UgcnVuIGluaXQtbjhuIGZpcnN0LidcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB3b3JrZmxvdyBub3QgZm91bmQgZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2xpZW50LmdldFdvcmtmbG93Lm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignV29ya2Zsb3cgbm90IGZvdW5kJykpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoZ2V0V29ya2Zsb3dUb29sLmV4ZWN1dGUoeyB3b3JrZmxvd0lkOiAnbm9uZXhpc3RlbnQnIH0pKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgICdGYWlsZWQgdG8gZ2V0IHdvcmtmbG93OiBXb3JrZmxvdyBub3QgZm91bmQnXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdW5rbm93biBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2xpZW50LmdldFdvcmtmbG93Lm1vY2tSZWplY3RlZFZhbHVlKCdVbmtub3duIGVycm9yIHR5cGUnKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KGdldFdvcmtmbG93VG9vbC5leGVjdXRlKHsgd29ya2Zsb3dJZDogJ3Rlc3QnIH0pKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgICdGYWlsZWQgdG8gZ2V0IHdvcmtmbG93IHdpdGggdW5rbm93biBlcnJvcidcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjcmVhdGUtd29ya2Zsb3cgdG9vbCcsICgpID0+IHtcbiAgICBsZXQgY3JlYXRlV29ya2Zsb3dUb29sOiBhbnk7XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIGNyZWF0ZVdvcmtmbG93VG9vbCA9IG1vY2tTZXJ2ZXIuYWRkVG9vbC5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIChjYWxsOiBhbnkpID0+IGNhbGxbMF0ubmFtZSA9PT0gJ2NyZWF0ZS13b3JrZmxvdydcbiAgICAgIClbMF07XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3b3JrZmxvdyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrV29ya2Zsb3cgPSAoZ2xvYmFsIGFzIGFueSkudGVzdFV0aWxzLmNyZWF0ZU1vY2tXb3JrZmxvdyh7XG4gICAgICAgIGlkOiAnbmV3LXdvcmtmbG93LTEyMycsXG4gICAgICAgIG5hbWU6ICdOZXcgV29ya2Zsb3cnLFxuICAgICAgICBhY3RpdmU6IGZhbHNlLFxuICAgICAgfSk7XG5cbiAgICAgIG1vY2tDbGllbnQuY3JlYXRlV29ya2Zsb3cubW9ja1Jlc29sdmVkVmFsdWUobW9ja1dvcmtmbG93KTtcblxuICAgICAgY29uc3Qgd29ya2Zsb3dEYXRhID0ge1xuICAgICAgICBuYW1lOiAnTmV3IFdvcmtmbG93JyxcbiAgICAgICAgbm9kZXM6IFt7IG5hbWU6ICdTdGFydCcsIHR5cGU6ICdtYW51YWwnIH1dLFxuICAgICAgICBjb25uZWN0aW9uczoge30sXG4gICAgICAgIGFjdGl2ZTogZmFsc2UsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVXb3JrZmxvd1Rvb2wuZXhlY3V0ZSh3b3JrZmxvd0RhdGEpO1xuXG4gICAgICBleHBlY3QobW9ja0NsaWVudC5jcmVhdGVXb3JrZmxvdykudG9IYXZlQmVlbkNhbGxlZFdpdGgod29ya2Zsb3dEYXRhKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQ29udGFpbign4pyFIFN1Y2Nlc3NmdWxseSBjcmVhdGVkIHdvcmtmbG93IFwiTmV3IFdvcmtmbG93XCInKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQ29udGFpbignSUQ6IG5ldy13b3JrZmxvdy0xMjMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQ29udGFpbign8J+UtCBJbmFjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBVc2VyRXJyb3Igd2hlbiBjbGllbnQgaXMgbm90IGluaXRpYWxpemVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdW5pbml0aWFsaXplZEdldENsaWVudCA9IGplc3QuZm4oKCkgPT4gbnVsbCk7XG4gICAgICBjb25zdCB1bmluaXRpYWxpemVkU2VydmVyID0geyBhZGRUb29sOiBqZXN0LmZuKCkgfTtcblxuICAgICAgY3JlYXRlV29ya2Zsb3dUb29scyh1bmluaXRpYWxpemVkR2V0Q2xpZW50LCB1bmluaXRpYWxpemVkU2VydmVyKTtcbiAgICAgIGNvbnN0IHRvb2wgPSB1bmluaXRpYWxpemVkU2VydmVyLmFkZFRvb2wubW9jay5jYWxscy5maW5kKFxuICAgICAgICAoY2FsbDogYW55KSA9PiBjYWxsWzBdLm5hbWUgPT09ICdjcmVhdGUtd29ya2Zsb3cnXG4gICAgICApPy5bMF07XG5cbiAgICAgIGNvbnN0IHdvcmtmbG93RGF0YSA9IHtcbiAgICAgICAgbmFtZTogJ1Rlc3QgV29ya2Zsb3cnLFxuICAgICAgICBub2RlczogW3sgbmFtZTogJ1N0YXJ0JywgdHlwZTogJ21hbnVhbCcgfV0sXG4gICAgICAgIGNvbm5lY3Rpb25zOiB7fSxcbiAgICAgIH07XG5cbiAgICAgIGF3YWl0IGV4cGVjdCgodG9vbCBhcyBhbnkpLmV4ZWN1dGUod29ya2Zsb3dEYXRhKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAnbjhuIGNsaWVudCBub3QgaW5pdGlhbGl6ZWQuIFBsZWFzZSBydW4gaW5pdC1uOG4gZmlyc3QuJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNyZWF0aW9uIGVycm9ycyB3aXRoIEVycm9yIGluc3RhbmNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudC5jcmVhdGVXb3JrZmxvdy5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0ludmFsaWQgd29ya2Zsb3cgZGF0YScpKTtcblxuICAgICAgY29uc3Qgd29ya2Zsb3dEYXRhID0ge1xuICAgICAgICBuYW1lOiAnSW52YWxpZCBXb3JrZmxvdycsXG4gICAgICAgIG5vZGVzOiBbeyBuYW1lOiAnU3RhcnQnLCB0eXBlOiAnbWFudWFsJyB9XSxcbiAgICAgICAgY29ubmVjdGlvbnM6IHt9LFxuICAgICAgfTtcblxuICAgICAgYXdhaXQgZXhwZWN0KGNyZWF0ZVdvcmtmbG93VG9vbC5leGVjdXRlKHdvcmtmbG93RGF0YSkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ0ZhaWxlZCB0byBjcmVhdGUgd29ya2Zsb3c6IEludmFsaWQgd29ya2Zsb3cgZGF0YSdcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB1bmtub3duIGNyZWF0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGllbnQuY3JlYXRlV29ya2Zsb3cubW9ja1JlamVjdGVkVmFsdWUoJ1Vua25vd24gZXJyb3IgdHlwZScpO1xuXG4gICAgICBjb25zdCB3b3JrZmxvd0RhdGEgPSB7XG4gICAgICAgIG5hbWU6ICdUZXN0IFdvcmtmbG93JyxcbiAgICAgICAgbm9kZXM6IFt7IG5hbWU6ICdTdGFydCcsIHR5cGU6ICdtYW51YWwnIH1dLFxuICAgICAgICBjb25uZWN0aW9uczoge30sXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBleHBlY3QoY3JlYXRlV29ya2Zsb3dUb29sLmV4ZWN1dGUod29ya2Zsb3dEYXRhKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAnRmFpbGVkIHRvIGNyZWF0ZSB3b3JrZmxvdyB3aXRoIHVua25vd24gZXJyb3InXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgYWN0aXZlIHdvcmtmbG93IHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tXb3JrZmxvdyA9IChnbG9iYWwgYXMgYW55KS50ZXN0VXRpbHMuY3JlYXRlTW9ja1dvcmtmbG93KHtcbiAgICAgICAgaWQ6ICdhY3RpdmUtd29ya2Zsb3ctMTIzJyxcbiAgICAgICAgbmFtZTogJ0FjdGl2ZSBXb3JrZmxvdycsXG4gICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICBtb2NrQ2xpZW50LmNyZWF0ZVdvcmtmbG93Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tXb3JrZmxvdyk7XG5cbiAgICAgIGNvbnN0IHdvcmtmbG93RGF0YSA9IHtcbiAgICAgICAgbmFtZTogJ0FjdGl2ZSBXb3JrZmxvdycsXG4gICAgICAgIG5vZGVzOiBbeyBuYW1lOiAnU3RhcnQnLCB0eXBlOiAnbWFudWFsJyB9XSxcbiAgICAgICAgY29ubmVjdGlvbnM6IHt9LFxuICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVXb3JrZmxvd1Rvb2wuZXhlY3V0ZSh3b3JrZmxvd0RhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJ+KchSBTdWNjZXNzZnVsbHkgY3JlYXRlZCB3b3JrZmxvdyBcIkFjdGl2ZSBXb3JrZmxvd1wiJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJ/Cfn6IgQWN0aXZlJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd1cGRhdGUtd29ya2Zsb3cgdG9vbCcsICgpID0+IHtcbiAgICBsZXQgdXBkYXRlV29ya2Zsb3dUb29sOiBhbnk7XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIHVwZGF0ZVdvcmtmbG93VG9vbCA9IG1vY2tTZXJ2ZXIuYWRkVG9vbC5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIChjYWxsOiBhbnkpID0+IGNhbGxbMF0ubmFtZSA9PT0gJ3VwZGF0ZS13b3JrZmxvdydcbiAgICAgIClbMF07XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSB3b3JrZmxvdyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrV29ya2Zsb3cgPSAoZ2xvYmFsIGFzIGFueSkudGVzdFV0aWxzLmNyZWF0ZU1vY2tXb3JrZmxvdyh7XG4gICAgICAgIGlkOiAnd29ya2Zsb3ctMTIzJyxcbiAgICAgICAgbmFtZTogJ1VwZGF0ZWQgV29ya2Zsb3cnLFxuICAgICAgICBhY3RpdmU6IGZhbHNlLFxuICAgICAgfSk7XG5cbiAgICAgIG1vY2tDbGllbnQudXBkYXRlV29ya2Zsb3cubW9ja1Jlc29sdmVkVmFsdWUobW9ja1dvcmtmbG93KTtcblxuICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHtcbiAgICAgICAgd29ya2Zsb3dJZDogJ3dvcmtmbG93LTEyMycsXG4gICAgICAgIG5hbWU6ICdVcGRhdGVkIFdvcmtmbG93JyxcbiAgICAgICAgYWN0aXZlOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVwZGF0ZVdvcmtmbG93VG9vbC5leGVjdXRlKHVwZGF0ZURhdGEpO1xuXG4gICAgICBleHBlY3QobW9ja0NsaWVudC51cGRhdGVXb3JrZmxvdykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3dvcmtmbG93LTEyMycsIHtcbiAgICAgICAgbmFtZTogJ1VwZGF0ZWQgV29ya2Zsb3cnLFxuICAgICAgICBhY3RpdmU6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJ+KchSBTdWNjZXNzZnVsbHkgdXBkYXRlZCB3b3JrZmxvdyBcIlVwZGF0ZWQgV29ya2Zsb3dcIicpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9Db250YWluKCdJRDogd29ya2Zsb3ctMTIzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJ1N0YXR1czog8J+UtCBJbmFjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBVc2VyRXJyb3Igd2hlbiBjbGllbnQgaXMgbm90IGluaXRpYWxpemVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdW5pbml0aWFsaXplZEdldENsaWVudCA9IGplc3QuZm4oKCkgPT4gbnVsbCk7XG4gICAgICBjb25zdCB1bmluaXRpYWxpemVkU2VydmVyID0geyBhZGRUb29sOiBqZXN0LmZuKCkgfTtcblxuICAgICAgY3JlYXRlV29ya2Zsb3dUb29scyh1bmluaXRpYWxpemVkR2V0Q2xpZW50LCB1bmluaXRpYWxpemVkU2VydmVyKTtcbiAgICAgIGNvbnN0IHRvb2wgPSB1bmluaXRpYWxpemVkU2VydmVyLmFkZFRvb2wubW9jay5jYWxscy5maW5kKFxuICAgICAgICAoY2FsbDogYW55KSA9PiBjYWxsWzBdLm5hbWUgPT09ICd1cGRhdGUtd29ya2Zsb3cnXG4gICAgICApPy5bMF07XG5cbiAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7XG4gICAgICAgIHdvcmtmbG93SWQ6ICd0ZXN0LWlkJyxcbiAgICAgICAgbmFtZTogJ1Rlc3QgVXBkYXRlJyxcbiAgICAgIH07XG5cbiAgICAgIGF3YWl0IGV4cGVjdCgodG9vbCBhcyBhbnkpLmV4ZWN1dGUodXBkYXRlRGF0YSkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ244biBjbGllbnQgbm90IGluaXRpYWxpemVkLiBQbGVhc2UgcnVuIGluaXQtbjhuIGZpcnN0LidcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB1cGRhdGUgZXJyb3JzIHdpdGggRXJyb3IgaW5zdGFuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2xpZW50LnVwZGF0ZVdvcmtmbG93Lm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignV29ya2Zsb3cgbm90IGZvdW5kJykpO1xuXG4gICAgICBjb25zdCB1cGRhdGVEYXRhID0ge1xuICAgICAgICB3b3JrZmxvd0lkOiAnbm9uZXhpc3RlbnQtaWQnLFxuICAgICAgICBuYW1lOiAnVXBkYXRlZCBOYW1lJyxcbiAgICAgIH07XG5cbiAgICAgIGF3YWl0IGV4cGVjdCh1cGRhdGVXb3JrZmxvd1Rvb2wuZXhlY3V0ZSh1cGRhdGVEYXRhKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAnRmFpbGVkIHRvIHVwZGF0ZSB3b3JrZmxvdzogV29ya2Zsb3cgbm90IGZvdW5kJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHVua25vd24gdXBkYXRlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGllbnQudXBkYXRlV29ya2Zsb3cubW9ja1JlamVjdGVkVmFsdWUoJ1Vua25vd24gZXJyb3IgdHlwZScpO1xuXG4gICAgICBjb25zdCB1cGRhdGVEYXRhID0ge1xuICAgICAgICB3b3JrZmxvd0lkOiAndGVzdC1pZCcsXG4gICAgICAgIG5hbWU6ICdUZXN0IFVwZGF0ZScsXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBleHBlY3QodXBkYXRlV29ya2Zsb3dUb29sLmV4ZWN1dGUodXBkYXRlRGF0YSkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ0ZhaWxlZCB0byB1cGRhdGUgd29ya2Zsb3cgd2l0aCB1bmtub3duIGVycm9yJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXBkYXRlIHdvcmtmbG93IHRvIGFjdGl2ZSBzdGF0dXMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1dvcmtmbG93ID0gKGdsb2JhbCBhcyBhbnkpLnRlc3RVdGlscy5jcmVhdGVNb2NrV29ya2Zsb3coe1xuICAgICAgICBpZDogJ3dvcmtmbG93LTQ1NicsXG4gICAgICAgIG5hbWU6ICdBY3RpdmF0ZWQgV29ya2Zsb3cnLFxuICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgbW9ja0NsaWVudC51cGRhdGVXb3JrZmxvdy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrV29ya2Zsb3cpO1xuXG4gICAgICBjb25zdCB1cGRhdGVEYXRhID0ge1xuICAgICAgICB3b3JrZmxvd0lkOiAnd29ya2Zsb3ctNDU2JyxcbiAgICAgICAgbmFtZTogJ0FjdGl2YXRlZCBXb3JrZmxvdycsXG4gICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVwZGF0ZVdvcmtmbG93VG9vbC5leGVjdXRlKHVwZGF0ZURhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJ+KchSBTdWNjZXNzZnVsbHkgdXBkYXRlZCB3b3JrZmxvdyBcIkFjdGl2YXRlZCBXb3JrZmxvd1wiJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJ1N0YXR1czog8J+foiBBY3RpdmUnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2RlbGV0ZS13b3JrZmxvdyB0b29sJywgKCkgPT4ge1xuICAgIGxldCBkZWxldGVXb3JrZmxvd1Rvb2w6IGFueTtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgZGVsZXRlV29ya2Zsb3dUb29sID0gbW9ja1NlcnZlci5hZGRUb29sLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgKGNhbGw6IGFueSkgPT4gY2FsbFswXS5uYW1lID09PSAnZGVsZXRlLXdvcmtmbG93J1xuICAgICAgKVswXTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGVsZXRlIHdvcmtmbG93IHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGllbnQuZGVsZXRlV29ya2Zsb3cubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGVsZXRlV29ya2Zsb3dUb29sLmV4ZWN1dGUoeyB3b3JrZmxvd0lkOiAnd29ya2Zsb3ctMTIzJyB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tDbGllbnQuZGVsZXRlV29ya2Zsb3cpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd3b3JrZmxvdy0xMjMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQ29udGFpbign4pyFIFN1Y2Nlc3NmdWxseSBkZWxldGVkIHdvcmtmbG93IHdpdGggSUQ6IHdvcmtmbG93LTEyMycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBVc2VyRXJyb3Igd2hlbiBjbGllbnQgaXMgbm90IGluaXRpYWxpemVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdW5pbml0aWFsaXplZEdldENsaWVudCA9IGplc3QuZm4oKCkgPT4gbnVsbCk7XG4gICAgICBjb25zdCB1bmluaXRpYWxpemVkU2VydmVyID0geyBhZGRUb29sOiBqZXN0LmZuKCkgfTtcblxuICAgICAgY3JlYXRlV29ya2Zsb3dUb29scyh1bmluaXRpYWxpemVkR2V0Q2xpZW50LCB1bmluaXRpYWxpemVkU2VydmVyKTtcbiAgICAgIGNvbnN0IHRvb2wgPSB1bmluaXRpYWxpemVkU2VydmVyLmFkZFRvb2wubW9jay5jYWxscy5maW5kKFxuICAgICAgICAoY2FsbDogYW55KSA9PiBjYWxsWzBdLm5hbWUgPT09ICdkZWxldGUtd29ya2Zsb3cnXG4gICAgICApPy5bMF07XG5cbiAgICAgIGF3YWl0IGV4cGVjdCgodG9vbCBhcyBhbnkpLmV4ZWN1dGUoeyB3b3JrZmxvd0lkOiAndGVzdC1pZCcgfSkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ244biBjbGllbnQgbm90IGluaXRpYWxpemVkLiBQbGVhc2UgcnVuIGluaXQtbjhuIGZpcnN0LidcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkZWxldGUgZXJyb3JzIHdpdGggRXJyb3IgaW5zdGFuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2xpZW50LmRlbGV0ZVdvcmtmbG93Lm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignV29ya2Zsb3cgbm90IGZvdW5kJykpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoZGVsZXRlV29ya2Zsb3dUb29sLmV4ZWN1dGUoeyB3b3JrZmxvd0lkOiAnbm9uZXhpc3RlbnQnIH0pKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgICdGYWlsZWQgdG8gZGVsZXRlIHdvcmtmbG93OiBXb3JrZmxvdyBub3QgZm91bmQnXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdW5rbm93biBkZWxldGUgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudC5kZWxldGVXb3JrZmxvdy5tb2NrUmVqZWN0ZWRWYWx1ZSgnVW5rbm93biBlcnJvciB0eXBlJyk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChkZWxldGVXb3JrZmxvd1Rvb2wuZXhlY3V0ZSh7IHdvcmtmbG93SWQ6ICd0ZXN0LWlkJyB9KSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAnRmFpbGVkIHRvIGRlbGV0ZSB3b3JrZmxvdyB3aXRoIHVua25vd24gZXJyb3InXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnd29ya2Zsb3cgYWN0aXZhdGlvbiB0b29scycsICgpID0+IHtcbiAgICBsZXQgYWN0aXZhdGVXb3JrZmxvd1Rvb2w6IGFueTtcbiAgICBsZXQgZGVhY3RpdmF0ZVdvcmtmbG93VG9vbDogYW55O1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBhY3RpdmF0ZVdvcmtmbG93VG9vbCA9IG1vY2tTZXJ2ZXIuYWRkVG9vbC5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIChjYWxsOiBhbnkpID0+IGNhbGxbMF0ubmFtZSA9PT0gJ2FjdGl2YXRlLXdvcmtmbG93J1xuICAgICAgKVswXTtcbiAgICAgIGRlYWN0aXZhdGVXb3JrZmxvd1Rvb2wgPSBtb2NrU2VydmVyLmFkZFRvb2wubW9jay5jYWxscy5maW5kKFxuICAgICAgICAoY2FsbDogYW55KSA9PiBjYWxsWzBdLm5hbWUgPT09ICdkZWFjdGl2YXRlLXdvcmtmbG93J1xuICAgICAgKVswXTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWN0aXZhdGUgd29ya2Zsb3cgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1dvcmtmbG93ID0gKGdsb2JhbCBhcyBhbnkpLnRlc3RVdGlscy5jcmVhdGVNb2NrV29ya2Zsb3coe1xuICAgICAgICBpZDogJ3dvcmtmbG93LTEyMycsXG4gICAgICAgIG5hbWU6ICdUZXN0IFdvcmtmbG93JyxcbiAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIG1vY2tDbGllbnQuYWN0aXZhdGVXb3JrZmxvdy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrV29ya2Zsb3cpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhY3RpdmF0ZVdvcmtmbG93VG9vbC5leGVjdXRlKHsgd29ya2Zsb3dJZDogJ3dvcmtmbG93LTEyMycgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ2xpZW50LmFjdGl2YXRlV29ya2Zsb3cpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd3b3JrZmxvdy0xMjMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQ29udGFpbign4pyFIFN1Y2Nlc3NmdWxseSBhY3RpdmF0ZWQgd29ya2Zsb3cgXCJUZXN0IFdvcmtmbG93XCInKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQ29udGFpbignU3RhdHVzOiDwn5+iIEFjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBVc2VyRXJyb3Igd2hlbiBjbGllbnQgaXMgbm90IGluaXRpYWxpemVkIGZvciBhY3RpdmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdW5pbml0aWFsaXplZEdldENsaWVudCA9IGplc3QuZm4oKCkgPT4gbnVsbCk7XG4gICAgICBjb25zdCB1bmluaXRpYWxpemVkU2VydmVyID0geyBhZGRUb29sOiBqZXN0LmZuKCkgfTtcblxuICAgICAgY3JlYXRlV29ya2Zsb3dUb29scyh1bmluaXRpYWxpemVkR2V0Q2xpZW50LCB1bmluaXRpYWxpemVkU2VydmVyKTtcbiAgICAgIGNvbnN0IHRvb2wgPSB1bmluaXRpYWxpemVkU2VydmVyLmFkZFRvb2wubW9jay5jYWxscy5maW5kKFxuICAgICAgICAoY2FsbDogYW55KSA9PiBjYWxsWzBdLm5hbWUgPT09ICdhY3RpdmF0ZS13b3JrZmxvdydcbiAgICAgICk/LlswXTtcblxuICAgICAgYXdhaXQgZXhwZWN0KCh0b29sIGFzIGFueSkuZXhlY3V0ZSh7IHdvcmtmbG93SWQ6ICd0ZXN0LWlkJyB9KSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAnbjhuIGNsaWVudCBub3QgaW5pdGlhbGl6ZWQuIFBsZWFzZSBydW4gaW5pdC1uOG4gZmlyc3QuJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGFjdGl2YXRpb24gZXJyb3JzIHdpdGggRXJyb3IgaW5zdGFuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2xpZW50LmFjdGl2YXRlV29ya2Zsb3cubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdXb3JrZmxvdyBhY3RpdmF0aW9uIGZhaWxlZCcpKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KGFjdGl2YXRlV29ya2Zsb3dUb29sLmV4ZWN1dGUoeyB3b3JrZmxvd0lkOiAnYnJva2VuLXdvcmtmbG93JyB9KSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAnRmFpbGVkIHRvIGFjdGl2YXRlIHdvcmtmbG93OiBXb3JrZmxvdyBhY3RpdmF0aW9uIGZhaWxlZCdcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB1bmtub3duIGFjdGl2YXRpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudC5hY3RpdmF0ZVdvcmtmbG93Lm1vY2tSZWplY3RlZFZhbHVlKCdVbmtub3duIGVycm9yIHR5cGUnKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KGFjdGl2YXRlV29ya2Zsb3dUb29sLmV4ZWN1dGUoeyB3b3JrZmxvd0lkOiAndGVzdC1pZCcgfSkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ0ZhaWxlZCB0byBhY3RpdmF0ZSB3b3JrZmxvdyB3aXRoIHVua25vd24gZXJyb3InXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkZWFjdGl2YXRlIHdvcmtmbG93IHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tXb3JrZmxvdyA9IChnbG9iYWwgYXMgYW55KS50ZXN0VXRpbHMuY3JlYXRlTW9ja1dvcmtmbG93KHtcbiAgICAgICAgaWQ6ICd3b3JrZmxvdy0xMjMnLFxuICAgICAgICBuYW1lOiAnVGVzdCBXb3JrZmxvdycsXG4gICAgICAgIGFjdGl2ZTogZmFsc2UsXG4gICAgICB9KTtcblxuICAgICAgbW9ja0NsaWVudC5kZWFjdGl2YXRlV29ya2Zsb3cubW9ja1Jlc29sdmVkVmFsdWUobW9ja1dvcmtmbG93KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGVhY3RpdmF0ZVdvcmtmbG93VG9vbC5leGVjdXRlKHsgd29ya2Zsb3dJZDogJ3dvcmtmbG93LTEyMycgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ2xpZW50LmRlYWN0aXZhdGVXb3JrZmxvdykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3dvcmtmbG93LTEyMycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9Db250YWluKCfinIUgU3VjY2Vzc2Z1bGx5IGRlYWN0aXZhdGVkIHdvcmtmbG93IFwiVGVzdCBXb3JrZmxvd1wiJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJ1N0YXR1czog8J+UtCBJbmFjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBVc2VyRXJyb3Igd2hlbiBjbGllbnQgaXMgbm90IGluaXRpYWxpemVkIGZvciBkZWFjdGl2YXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1bmluaXRpYWxpemVkR2V0Q2xpZW50ID0gamVzdC5mbigoKSA9PiBudWxsKTtcbiAgICAgIGNvbnN0IHVuaW5pdGlhbGl6ZWRTZXJ2ZXIgPSB7IGFkZFRvb2w6IGplc3QuZm4oKSB9O1xuXG4gICAgICBjcmVhdGVXb3JrZmxvd1Rvb2xzKHVuaW5pdGlhbGl6ZWRHZXRDbGllbnQsIHVuaW5pdGlhbGl6ZWRTZXJ2ZXIpO1xuICAgICAgY29uc3QgdG9vbCA9IHVuaW5pdGlhbGl6ZWRTZXJ2ZXIuYWRkVG9vbC5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIChjYWxsOiBhbnkpID0+IGNhbGxbMF0ubmFtZSA9PT0gJ2RlYWN0aXZhdGUtd29ya2Zsb3cnXG4gICAgICApPy5bMF07XG5cbiAgICAgIGF3YWl0IGV4cGVjdCgodG9vbCBhcyBhbnkpLmV4ZWN1dGUoeyB3b3JrZmxvd0lkOiAndGVzdC1pZCcgfSkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ244biBjbGllbnQgbm90IGluaXRpYWxpemVkLiBQbGVhc2UgcnVuIGluaXQtbjhuIGZpcnN0LidcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkZWFjdGl2YXRpb24gZXJyb3JzIHdpdGggRXJyb3IgaW5zdGFuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2xpZW50LmRlYWN0aXZhdGVXb3JrZmxvdy5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1dvcmtmbG93IGRlYWN0aXZhdGlvbiBmYWlsZWQnKSk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChkZWFjdGl2YXRlV29ya2Zsb3dUb29sLmV4ZWN1dGUoeyB3b3JrZmxvd0lkOiAnYnJva2VuLXdvcmtmbG93JyB9KSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAnRmFpbGVkIHRvIGRlYWN0aXZhdGUgd29ya2Zsb3c6IFdvcmtmbG93IGRlYWN0aXZhdGlvbiBmYWlsZWQnXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdW5rbm93biBkZWFjdGl2YXRpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudC5kZWFjdGl2YXRlV29ya2Zsb3cubW9ja1JlamVjdGVkVmFsdWUoJ1Vua25vd24gZXJyb3IgdHlwZScpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoZGVhY3RpdmF0ZVdvcmtmbG93VG9vbC5leGVjdXRlKHsgd29ya2Zsb3dJZDogJ3Rlc3QtaWQnIH0pKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgICdGYWlsZWQgdG8gZGVhY3RpdmF0ZSB3b3JrZmxvdyB3aXRoIHVua25vd24gZXJyb3InXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9