2294abfb6d9fcf7b28b34e1675f728dd
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Test setup file - runs before all tests
require("@testing-library/jest-dom");
// Mock console methods to reduce noise in tests
const originalError = console.error;
const originalWarn = console.warn;
beforeEach(() => {
    // Reset console mocks before each test
    jest.clearAllMocks();
});
afterEach(() => {
    // Clean up any test artifacts
    jest.clearAllTimers();
});
// Global test utilities
global.testUtils = {
    // Create a mock n8n client
    createMockClient: () => ({
        getWorkflows: jest.fn(),
        getWorkflow: jest.fn(),
        createWorkflow: jest.fn(),
        updateWorkflow: jest.fn(),
        deleteWorkflow: jest.fn(),
        activateWorkflow: jest.fn(),
        deactivateWorkflow: jest.fn(),
        getUsers: jest.fn(),
        getUser: jest.fn(),
        createUser: jest.fn(),
        updateUser: jest.fn(),
        deleteUser: jest.fn(),
        getProjects: jest.fn(),
        createProject: jest.fn(),
        updateProject: jest.fn(),
        deleteProject: jest.fn(),
        getVariables: jest.fn(),
        createVariable: jest.fn(),
        deleteVariable: jest.fn(),
        getExecutions: jest.fn(),
        getExecution: jest.fn(),
        deleteExecution: jest.fn(),
        getTags: jest.fn(),
        getTag: jest.fn(),
        createTag: jest.fn(),
        updateTag: jest.fn(),
        deleteTag: jest.fn(),
        getWorkflowTags: jest.fn(),
        updateWorkflowTags: jest.fn(),
        getCredentials: jest.fn(),
        getCredential: jest.fn(),
        createCredential: jest.fn(),
        deleteCredential: jest.fn(),
        getCredentialSchema: jest.fn(),
        generateAuditReport: jest.fn(),
    }),
    // Create mock n8n API responses
    createMockApiResponse: (data, nextCursor) => ({
        data,
        nextCursor,
    }),
    // Create mock workflow data
    createMockWorkflow: (overrides = {}) => ({
        id: 'workflow-123',
        name: 'Test Workflow',
        active: false,
        nodes: [
            { name: 'Start', type: 'manual' },
            { name: 'End', type: 'set' },
        ],
        connections: {},
        createdAt: '2024-01-01T00:00:00Z',
        updatedAt: '2024-01-01T00:00:00Z',
        tags: [],
        ...overrides,
    }),
    // Create mock user data
    createMockUser: (overrides = {}) => ({
        id: 'user-123',
        email: 'test@example.com',
        firstName: 'Test',
        lastName: 'User',
        role: 'member',
        createdAt: '2024-01-01T00:00:00Z',
        updatedAt: '2024-01-01T00:00:00Z',
        ...overrides,
    }),
    // Create mock execution data
    createMockExecution: (overrides = {}) => ({
        id: 'execution-123',
        finished: true,
        mode: 'manual',
        startedAt: '2024-01-01T00:00:00Z',
        stoppedAt: '2024-01-01T00:01:00Z',
        workflowId: 'workflow-123',
        status: 'success',
        ...overrides,
    }),
    // Create mock credential data
    createMockCredential: (overrides = {}) => ({
        id: 'credential-123',
        name: 'Test Credential',
        type: 'httpBasicAuth',
        data: { username: 'test', password: 'pass' },
        createdAt: '2024-01-01T00:00:00Z',
        updatedAt: '2024-01-01T00:00:00Z',
        ...overrides,
    }),
    // Create mock project data
    createMockProject: (overrides = {}) => ({
        id: 'project-123',
        name: 'Test Project',
        type: 'team',
        createdAt: '2024-01-01T00:00:00Z',
        updatedAt: '2024-01-01T00:00:00Z',
        ...overrides,
    }),
    // Create mock variable data
    createMockVariable: (overrides = {}) => ({
        id: 'variable-123',
        key: 'TEST_VAR',
        value: 'test-value',
        type: 'string',
        createdAt: '2024-01-01T00:00:00Z',
        updatedAt: '2024-01-01T00:00:00Z',
        ...overrides,
    }),
    // Create mock tag data
    createMockTag: (overrides = {}) => ({
        id: 'tag-123',
        name: 'Test Tag',
        color: '#ff0000',
        createdAt: '2024-01-01T00:00:00Z',
        updatedAt: '2024-01-01T00:00:00Z',
        ...overrides,
    }),
    // Create mock audit report data
    createMockAuditReport: (overrides = {}) => ({
        riskLevel: 'medium',
        categories: [
            {
                name: 'security',
                score: 75,
                issues: [
                    {
                        level: 'warning',
                        message: 'Some credentials are not encrypted',
                        location: 'credentials',
                    },
                ],
            },
        ],
        generatedAt: '2024-01-01T00:00:00Z',
        ...overrides,
    }),
    // Suppress console output in tests
    suppressConsole: () => {
        console.error = jest.fn();
        console.warn = jest.fn();
        console.log = jest.fn();
    },
    // Restore console output
    restoreConsole: () => {
        console.error = originalError;
        console.warn = originalWarn;
    },
};
// Custom Jest matchers
expect.extend({
    toBeValidWorkflow(received) {
        const pass = received &&
            typeof received.id === 'string' &&
            typeof received.name === 'string' &&
            typeof received.active === 'boolean' &&
            Array.isArray(received.nodes);
        return {
            message: () => `expected ${received} to be a valid workflow object`,
            pass,
        };
    },
    toBeValidUser(received) {
        const pass = received &&
            typeof received.id === 'string' &&
            typeof received.email === 'string' &&
            typeof received.firstName === 'string' &&
            typeof received.lastName === 'string';
        return {
            message: () => `expected ${received} to be a valid user object`,
            pass,
        };
    },
    toBeValidExecution(received) {
        const pass = received &&
            typeof received.id === 'string' &&
            typeof received.workflowId === 'string' &&
            typeof received.finished === 'boolean' &&
            typeof received.startedAt === 'string';
        return {
            message: () => `expected ${received} to be a valid execution object`,
            pass,
        };
    },
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2plcmVteXBhcmtlci9EZXNrdG9wL0NsYXVkZSBDb2RpbmcgUHJvamVjdHMvbjhuLW1jcC1zZXJ2ZXIvdGVzdHMvc2V0dXAudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSwwQ0FBMEM7QUFDMUMscUNBQW1DO0FBRW5DLGdEQUFnRDtBQUNoRCxNQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDO0FBQ3BDLE1BQU0sWUFBWSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7QUFFbEMsVUFBVSxDQUFDLEdBQUcsRUFBRTtJQUNkLHVDQUF1QztJQUN2QyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7QUFDdkIsQ0FBQyxDQUFDLENBQUM7QUFFSCxTQUFTLENBQUMsR0FBRyxFQUFFO0lBQ2IsOEJBQThCO0lBQzlCLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUN4QixDQUFDLENBQUMsQ0FBQztBQUVILHdCQUF3QjtBQUN4QixNQUFNLENBQUMsU0FBUyxHQUFHO0lBQ2pCLDJCQUEyQjtJQUMzQixnQkFBZ0IsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBQ3ZCLFlBQVksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ3ZCLFdBQVcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ3RCLGNBQWMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ3pCLGNBQWMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ3pCLGNBQWMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ3pCLGdCQUFnQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDM0Isa0JBQWtCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUM3QixRQUFRLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNuQixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNsQixVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNyQixVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNyQixV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Q0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFaEMsT0FBTztZQUNMLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxZQUFZLFFBQVEsZ0NBQWdDO1lBQ25FLElBQUk7U0FDTCxDQUFDO0lBQ0osQ0FBQztJQUVELGFBQWEsQ0FBQyxRQUFRO1FBQ3BCLE1BQU0sSUFBSSxHQUNSLFFBQVE7WUFDUixPQUFPLFFBQVEsQ0FBQyxFQUFFLEtBQUssUUFBUTtZQUMvQixPQUFPLFFBQVEsQ0FBQyxLQUFLLEtBQUssUUFBUTtZQUNsQyxPQUFPLFFBQVEsQ0FBQyxTQUFTLEtBQUssUUFBUTtZQUN0QyxPQUFPLFFBQVEsQ0FBQyxRQUFRLEtBQUssUUFBUSxDQUFDO1FBRXhDLE9BQU87WUFDTCxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsWUFBWSxRQUFRLDRCQUE0QjtZQUMvRCxJQUFJO1NBQ0wsQ0FBQztJQUNKLENBQUM7SUFFRCxrQkFBa0IsQ0FBQyxRQUFRO1FBQ3pCLE1BQU0sSUFBSSxHQUNSLFFBQVE7WUFDUixPQUFPLFFBQVEsQ0FBQyxFQUFFLEtBQUssUUFBUTtZQUMvQixPQUFPLFFBQVEsQ0FBQyxVQUFVLEtBQUssUUFBUTtZQUN2QyxPQUFPLFFBQVEsQ0FBQyxRQUFRLEtBQUssU0FBUztZQUN0QyxPQUFPLFFBQVEsQ0FBQyxTQUFTLEtBQUssUUFBUSxDQUFDO1FBRXpDLE9BQU87WUFDTCxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsWUFBWSxRQUFRLGlDQUFpQztZQUNwRSxJQUFJO1NBQ0wsQ0FBQztJQUNKLENBQUM7Q0FDRixDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2plcmVteXBhcmtlci9EZXNrdG9wL0NsYXVkZSBDb2RpbmcgUHJvamVjdHMvbjhuLW1jcC1zZXJ2ZXIvdGVzdHMvc2V0dXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGVzdCBzZXR1cCBmaWxlIC0gcnVucyBiZWZvcmUgYWxsIHRlc3RzXG5pbXBvcnQgJ0B0ZXN0aW5nLWxpYnJhcnkvamVzdC1kb20nO1xuXG4vLyBNb2NrIGNvbnNvbGUgbWV0aG9kcyB0byByZWR1Y2Ugbm9pc2UgaW4gdGVzdHNcbmNvbnN0IG9yaWdpbmFsRXJyb3IgPSBjb25zb2xlLmVycm9yO1xuY29uc3Qgb3JpZ2luYWxXYXJuID0gY29uc29sZS53YXJuO1xuXG5iZWZvcmVFYWNoKCgpID0+IHtcbiAgLy8gUmVzZXQgY29uc29sZSBtb2NrcyBiZWZvcmUgZWFjaCB0ZXN0XG4gIGplc3QuY2xlYXJBbGxNb2NrcygpO1xufSk7XG5cbmFmdGVyRWFjaCgoKSA9PiB7XG4gIC8vIENsZWFuIHVwIGFueSB0ZXN0IGFydGlmYWN0c1xuICBqZXN0LmNsZWFyQWxsVGltZXJzKCk7XG59KTtcblxuLy8gR2xvYmFsIHRlc3QgdXRpbGl0aWVzXG5nbG9iYWwudGVzdFV0aWxzID0ge1xuICAvLyBDcmVhdGUgYSBtb2NrIG44biBjbGllbnRcbiAgY3JlYXRlTW9ja0NsaWVudDogKCkgPT4gKHtcbiAgICBnZXRXb3JrZmxvd3M6IGplc3QuZm4oKSxcbiAgICBnZXRXb3JrZmxvdzogamVzdC5mbigpLFxuICAgIGNyZWF0ZVdvcmtmbG93OiBqZXN0LmZuKCksXG4gICAgdXBkYXRlV29ya2Zsb3c6IGplc3QuZm4oKSxcbiAgICBkZWxldGVXb3JrZmxvdzogamVzdC5mbigpLFxuICAgIGFjdGl2YXRlV29ya2Zsb3c6IGplc3QuZm4oKSxcbiAgICBkZWFjdGl2YXRlV29ya2Zsb3c6IGplc3QuZm4oKSxcbiAgICBnZXRVc2VyczogamVzdC5mbigpLFxuICAgIGdldFVzZXI6IGplc3QuZm4oKSxcbiAgICBjcmVhdGVVc2VyOiBqZXN0LmZuKCksXG4gICAgdXBkYXRlVXNlcjogamVzdC5mbigpLFxuICAgIGRlbGV0ZVVzZXI6IGplc3QuZm4oKSxcbiAgICBnZXRQcm9qZWN0czogamVzdC5mbigpLFxuICAgIGNyZWF0ZVByb2plY3Q6IGplc3QuZm4oKSxcbiAgICB1cGRhdGVQcm9qZWN0OiBqZXN0LmZuKCksXG4gICAgZGVsZXRlUHJvamVjdDogamVzdC5mbigpLFxuICAgIGdldFZhcmlhYmxlczogamVzdC5mbigpLFxuICAgIGNyZWF0ZVZhcmlhYmxlOiBqZXN0LmZuKCksXG4gICAgZGVsZXRlVmFyaWFibGU6IGplc3QuZm4oKSxcbiAgICBnZXRFeGVjdXRpb25zOiBqZXN0LmZuKCksXG4gICAgZ2V0RXhlY3V0aW9uOiBqZXN0LmZuKCksXG4gICAgZGVsZXRlRXhlY3V0aW9uOiBqZXN0LmZuKCksXG4gICAgZ2V0VGFnczogamVzdC5mbigpLFxuICAgIGdldFRhZzogamVzdC5mbigpLFxuICAgIGNyZWF0ZVRhZzogamVzdC5mbigpLFxuICAgIHVwZGF0ZVRhZzogamVzdC5mbigpLFxuICAgIGRlbGV0ZVRhZzogamVzdC5mbigpLFxuICAgIGdldFdvcmtmbG93VGFnczogamVzdC5mbigpLFxuICAgIHVwZGF0ZVdvcmtmbG93VGFnczogamVzdC5mbigpLFxuICAgIGdldENyZWRlbnRpYWxzOiBqZXN0LmZuKCksXG4gICAgZ2V0Q3JlZGVudGlhbDogamVzdC5mbigpLFxuICAgIGNyZWF0ZUNyZWRlbnRpYWw6IGplc3QuZm4oKSxcbiAgICBkZWxldGVDcmVkZW50aWFsOiBqZXN0LmZuKCksXG4gICAgZ2V0Q3JlZGVudGlhbFNjaGVtYTogamVzdC5mbigpLFxuICAgIGdlbmVyYXRlQXVkaXRSZXBvcnQ6IGplc3QuZm4oKSxcbiAgfSksXG5cbiAgLy8gQ3JlYXRlIG1vY2sgbjhuIEFQSSByZXNwb25zZXNcbiAgY3JlYXRlTW9ja0FwaVJlc3BvbnNlOiA8VD4oZGF0YTogVCwgbmV4dEN1cnNvcj86IHN0cmluZykgPT4gKHtcbiAgICBkYXRhLFxuICAgIG5leHRDdXJzb3IsXG4gIH0pLFxuXG4gIC8vIENyZWF0ZSBtb2NrIHdvcmtmbG93IGRhdGFcbiAgY3JlYXRlTW9ja1dvcmtmbG93OiAob3ZlcnJpZGVzID0ge30pID0+ICh7XG4gICAgaWQ6ICd3b3JrZmxvdy0xMjMnLFxuICAgIG5hbWU6ICdUZXN0IFdvcmtmbG93JyxcbiAgICBhY3RpdmU6IGZhbHNlLFxuICAgIG5vZGVzOiBbXG4gICAgICB7IG5hbWU6ICdTdGFydCcsIHR5cGU6ICdtYW51YWwnIH0sXG4gICAgICB7IG5hbWU6ICdFbmQnLCB0eXBlOiAnc2V0JyB9LFxuICAgIF0sXG4gICAgY29ubmVjdGlvbnM6IHt9LFxuICAgIGNyZWF0ZWRBdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICB1cGRhdGVkQXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgdGFnczogW10sXG4gICAgLi4ub3ZlcnJpZGVzLFxuICB9KSxcblxuICAvLyBDcmVhdGUgbW9jayB1c2VyIGRhdGFcbiAgY3JlYXRlTW9ja1VzZXI6IChvdmVycmlkZXMgPSB7fSkgPT4gKHtcbiAgICBpZDogJ3VzZXItMTIzJyxcbiAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgIGxhc3ROYW1lOiAnVXNlcicsXG4gICAgcm9sZTogJ21lbWJlcicsXG4gICAgY3JlYXRlZEF0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgIHVwZGF0ZWRBdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAuLi5vdmVycmlkZXMsXG4gIH0pLFxuXG4gIC8vIENyZWF0ZSBtb2NrIGV4ZWN1dGlvbiBkYXRhXG4gIGNyZWF0ZU1vY2tFeGVjdXRpb246IChvdmVycmlkZXMgPSB7fSkgPT4gKHtcbiAgICBpZDogJ2V4ZWN1dGlvbi0xMjMnLFxuICAgIGZpbmlzaGVkOiB0cnVlLFxuICAgIG1vZGU6ICdtYW51YWwnLFxuICAgIHN0YXJ0ZWRBdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICBzdG9wcGVkQXQ6ICcyMDI0LTAxLTAxVDAwOjAxOjAwWicsXG4gICAgd29ya2Zsb3dJZDogJ3dvcmtmbG93LTEyMycsXG4gICAgc3RhdHVzOiAnc3VjY2VzcycgYXMgY29uc3QsXG4gICAgLi4ub3ZlcnJpZGVzLFxuICB9KSxcblxuICAvLyBDcmVhdGUgbW9jayBjcmVkZW50aWFsIGRhdGFcbiAgY3JlYXRlTW9ja0NyZWRlbnRpYWw6IChvdmVycmlkZXMgPSB7fSkgPT4gKHtcbiAgICBpZDogJ2NyZWRlbnRpYWwtMTIzJyxcbiAgICBuYW1lOiAnVGVzdCBDcmVkZW50aWFsJyxcbiAgICB0eXBlOiAnaHR0cEJhc2ljQXV0aCcsXG4gICAgZGF0YTogeyB1c2VybmFtZTogJ3Rlc3QnLCBwYXNzd29yZDogJ3Bhc3MnIH0sXG4gICAgY3JlYXRlZEF0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgIHVwZGF0ZWRBdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAuLi5vdmVycmlkZXMsXG4gIH0pLFxuXG4gIC8vIENyZWF0ZSBtb2NrIHByb2plY3QgZGF0YVxuICBjcmVhdGVNb2NrUHJvamVjdDogKG92ZXJyaWRlcyA9IHt9KSA9PiAoe1xuICAgIGlkOiAncHJvamVjdC0xMjMnLFxuICAgIG5hbWU6ICdUZXN0IFByb2plY3QnLFxuICAgIHR5cGU6ICd0ZWFtJyxcbiAgICBjcmVhdGVkQXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgdXBkYXRlZEF0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgIC4uLm92ZXJyaWRlcyxcbiAgfSksXG5cbiAgLy8gQ3JlYXRlIG1vY2sgdmFyaWFibGUgZGF0YVxuICBjcmVhdGVNb2NrVmFyaWFibGU6IChvdmVycmlkZXMgPSB7fSkgPT4gKHtcbiAgICBpZDogJ3ZhcmlhYmxlLTEyMycsXG4gICAga2V5OiAnVEVTVF9WQVInLFxuICAgIHZhbHVlOiAndGVzdC12YWx1ZScsXG4gICAgdHlwZTogJ3N0cmluZycsXG4gICAgY3JlYXRlZEF0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgIHVwZGF0ZWRBdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAuLi5vdmVycmlkZXMsXG4gIH0pLFxuXG4gIC8vIENyZWF0ZSBtb2NrIHRhZyBkYXRhXG4gIGNyZWF0ZU1vY2tUYWc6IChvdmVycmlkZXMgPSB7fSkgPT4gKHtcbiAgICBpZDogJ3RhZy0xMjMnLFxuICAgIG5hbWU6ICdUZXN0IFRhZycsXG4gICAgY29sb3I6ICcjZmYwMDAwJyxcbiAgICBjcmVhdGVkQXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgdXBkYXRlZEF0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgIC4uLm92ZXJyaWRlcyxcbiAgfSksXG5cbiAgLy8gQ3JlYXRlIG1vY2sgYXVkaXQgcmVwb3J0IGRhdGFcbiAgY3JlYXRlTW9ja0F1ZGl0UmVwb3J0OiAob3ZlcnJpZGVzID0ge30pID0+ICh7XG4gICAgcmlza0xldmVsOiAnbWVkaXVtJyxcbiAgICBjYXRlZ29yaWVzOiBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdzZWN1cml0eScsXG4gICAgICAgIHNjb3JlOiA3NSxcbiAgICAgICAgaXNzdWVzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbGV2ZWw6ICd3YXJuaW5nJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdTb21lIGNyZWRlbnRpYWxzIGFyZSBub3QgZW5jcnlwdGVkJyxcbiAgICAgICAgICAgIGxvY2F0aW9uOiAnY3JlZGVudGlhbHMnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIF0sXG4gICAgZ2VuZXJhdGVkQXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgLi4ub3ZlcnJpZGVzLFxuICB9KSxcblxuICAvLyBTdXBwcmVzcyBjb25zb2xlIG91dHB1dCBpbiB0ZXN0c1xuICBzdXBwcmVzc0NvbnNvbGU6ICgpID0+IHtcbiAgICBjb25zb2xlLmVycm9yID0gamVzdC5mbigpO1xuICAgIGNvbnNvbGUud2FybiA9IGplc3QuZm4oKTtcbiAgICBjb25zb2xlLmxvZyA9IGplc3QuZm4oKTtcbiAgfSxcblxuICAvLyBSZXN0b3JlIGNvbnNvbGUgb3V0cHV0XG4gIHJlc3RvcmVDb25zb2xlOiAoKSA9PiB7XG4gICAgY29uc29sZS5lcnJvciA9IG9yaWdpbmFsRXJyb3I7XG4gICAgY29uc29sZS53YXJuID0gb3JpZ2luYWxXYXJuO1xuICB9LFxufTtcblxuLy8gVHlwZSBkZWZpbml0aW9ucyBmb3IgdGVzdCB1dGlsaXRpZXNcbmludGVyZmFjZSBUZXN0VXRpbHMge1xuICBjcmVhdGVNb2NrQ2xpZW50OiAoKSA9PiBhbnk7XG4gIGNyZWF0ZU1vY2tBcGlSZXNwb25zZTogPFQ+KGRhdGE6IFQsIG5leHRDdXJzb3I/OiBzdHJpbmcpID0+IHsgZGF0YTogVDsgbmV4dEN1cnNvcj86IHN0cmluZyB9O1xuICBjcmVhdGVNb2NrV29ya2Zsb3c6IChvdmVycmlkZXM/OiBhbnkpID0+IGFueTtcbiAgY3JlYXRlTW9ja1VzZXI6IChvdmVycmlkZXM/OiBhbnkpID0+IGFueTtcbiAgY3JlYXRlTW9ja0V4ZWN1dGlvbjogKG92ZXJyaWRlcz86IGFueSkgPT4gYW55O1xuICBjcmVhdGVNb2NrQ3JlZGVudGlhbDogKG92ZXJyaWRlcz86IGFueSkgPT4gYW55O1xuICBjcmVhdGVNb2NrUHJvamVjdDogKG92ZXJyaWRlcz86IGFueSkgPT4gYW55O1xuICBjcmVhdGVNb2NrVmFyaWFibGU6IChvdmVycmlkZXM/OiBhbnkpID0+IGFueTtcbiAgY3JlYXRlTW9ja1RhZzogKG92ZXJyaWRlcz86IGFueSkgPT4gYW55O1xuICBjcmVhdGVNb2NrQXVkaXRSZXBvcnQ6IChvdmVycmlkZXM/OiBhbnkpID0+IGFueTtcbiAgc3VwcHJlc3NDb25zb2xlOiAoKSA9PiB2b2lkO1xuICByZXN0b3JlQ29uc29sZTogKCkgPT4gdm9pZDtcbn1cblxuLy8gRXh0ZW5kIEplc3QgbWF0Y2hlcnMgYW5kIGdsb2JhbCB0eXBlc1xuZGVjbGFyZSBnbG9iYWwge1xuICBuYW1lc3BhY2UgamVzdCB7XG4gICAgaW50ZXJmYWNlIE1hdGNoZXJzPFI+IHtcbiAgICAgIHRvQmVWYWxpZFdvcmtmbG93KCk6IFI7XG4gICAgICB0b0JlVmFsaWRVc2VyKCk6IFI7XG4gICAgICB0b0JlVmFsaWRFeGVjdXRpb24oKTogUjtcbiAgICB9XG4gIH1cblxuICBuYW1lc3BhY2UgTm9kZUpTIHtcbiAgICBpbnRlcmZhY2UgR2xvYmFsIHtcbiAgICAgIHRlc3RVdGlsczogVGVzdFV0aWxzO1xuICAgIH1cbiAgfVxufVxuXG4vLyBUeXBlIGFzc2VydGlvbiBmb3IgZ2xvYmFsIG9iamVjdFxuZGVjbGFyZSBjb25zdCBnbG9iYWw6IHR5cGVvZiBnbG9iYWxUaGlzICYge1xuICB0ZXN0VXRpbHM6IFRlc3RVdGlscztcbn07XG5cbi8vIEN1c3RvbSBKZXN0IG1hdGNoZXJzXG5leHBlY3QuZXh0ZW5kKHtcbiAgdG9CZVZhbGlkV29ya2Zsb3cocmVjZWl2ZWQpIHtcbiAgICBjb25zdCBwYXNzID1cbiAgICAgIHJlY2VpdmVkICYmXG4gICAgICB0eXBlb2YgcmVjZWl2ZWQuaWQgPT09ICdzdHJpbmcnICYmXG4gICAgICB0eXBlb2YgcmVjZWl2ZWQubmFtZSA9PT0gJ3N0cmluZycgJiZcbiAgICAgIHR5cGVvZiByZWNlaXZlZC5hY3RpdmUgPT09ICdib29sZWFuJyAmJlxuICAgICAgQXJyYXkuaXNBcnJheShyZWNlaXZlZC5ub2Rlcyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbWVzc2FnZTogKCkgPT4gYGV4cGVjdGVkICR7cmVjZWl2ZWR9IHRvIGJlIGEgdmFsaWQgd29ya2Zsb3cgb2JqZWN0YCxcbiAgICAgIHBhc3MsXG4gICAgfTtcbiAgfSxcblxuICB0b0JlVmFsaWRVc2VyKHJlY2VpdmVkKSB7XG4gICAgY29uc3QgcGFzcyA9XG4gICAgICByZWNlaXZlZCAmJlxuICAgICAgdHlwZW9mIHJlY2VpdmVkLmlkID09PSAnc3RyaW5nJyAmJlxuICAgICAgdHlwZW9mIHJlY2VpdmVkLmVtYWlsID09PSAnc3RyaW5nJyAmJlxuICAgICAgdHlwZW9mIHJlY2VpdmVkLmZpcnN0TmFtZSA9PT0gJ3N0cmluZycgJiZcbiAgICAgIHR5cGVvZiByZWNlaXZlZC5sYXN0TmFtZSA9PT0gJ3N0cmluZyc7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbWVzc2FnZTogKCkgPT4gYGV4cGVjdGVkICR7cmVjZWl2ZWR9IHRvIGJlIGEgdmFsaWQgdXNlciBvYmplY3RgLFxuICAgICAgcGFzcyxcbiAgICB9O1xuICB9LFxuXG4gIHRvQmVWYWxpZEV4ZWN1dGlvbihyZWNlaXZlZCkge1xuICAgIGNvbnN0IHBhc3MgPVxuICAgICAgcmVjZWl2ZWQgJiZcbiAgICAgIHR5cGVvZiByZWNlaXZlZC5pZCA9PT0gJ3N0cmluZycgJiZcbiAgICAgIHR5cGVvZiByZWNlaXZlZC53b3JrZmxvd0lkID09PSAnc3RyaW5nJyAmJlxuICAgICAgdHlwZW9mIHJlY2VpdmVkLmZpbmlzaGVkID09PSAnYm9vbGVhbicgJiZcbiAgICAgIHR5cGVvZiByZWNlaXZlZC5zdGFydGVkQXQgPT09ICdzdHJpbmcnO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG1lc3NhZ2U6ICgpID0+IGBleHBlY3RlZCAke3JlY2VpdmVkfSB0byBiZSBhIHZhbGlkIGV4ZWN1dGlvbiBvYmplY3RgLFxuICAgICAgcGFzcyxcbiAgICB9O1xuICB9LFxufSk7XG4iXSwidmVyc2lvbiI6M30=