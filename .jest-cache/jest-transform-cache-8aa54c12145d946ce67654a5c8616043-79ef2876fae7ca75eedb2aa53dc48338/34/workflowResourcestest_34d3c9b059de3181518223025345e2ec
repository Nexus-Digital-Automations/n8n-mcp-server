0865499c3914fb62b91c68c6d60cd58a
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
// Mock dependencies
globals_1.jest.mock('fastmcp');
globals_1.jest.mock('../../../src/client/n8nClient');
const workflowResources_1 = require("../../../src/resources/workflowResources");
// Mock console methods to avoid test output pollution
const mockConsoleLog = globals_1.jest.fn();
globals_1.jest.spyOn(console, 'log').mockImplementation(mockConsoleLog);
(0, globals_1.describe)('WorkflowResourceManager', () => {
    let workflowManager;
    let mockServer;
    let mockClient;
    let getClientFn;
    // Mock workflow data
    const mockWorkflow = {
        id: 'workflow-123',
        name: 'Test Workflow',
        active: true,
        tags: ['test', 'automation'],
        createdAt: '2023-01-01T10:00:00Z',
        updatedAt: '2023-01-01T12:00:00Z',
        nodes: [
            { id: 'node1', type: 'n8n-nodes-base.httpRequest', name: 'HTTP Request' },
            { id: 'node2', type: 'n8n-nodes-base.code', name: 'Code' },
        ],
        connections: {
            'HTTP Request': {
                main: [
                    [
                        {
                            node: 'Code',
                            type: 'main',
                            index: 0,
                        },
                    ],
                ],
            },
        },
    };
    const mockInactiveWorkflow = {
        id: 'workflow-456',
        name: 'Inactive Workflow',
        active: false,
        tags: ['draft'],
        createdAt: '2023-01-02T10:00:00Z',
        updatedAt: '2023-01-02T11:00:00Z',
        nodes: [{ id: 'node3', type: 'n8n-nodes-base.webhook', name: 'Webhook' }],
        connections: {},
    };
    (0, globals_1.beforeEach)(() => {
        // Create mock instances
        mockServer = {
            addResource: globals_1.jest.fn(),
            addResourceTemplate: globals_1.jest.fn(),
        };
        mockClient = {
            getWorkflow: globals_1.jest.fn(),
            getWorkflows: globals_1.jest.fn(),
        };
        getClientFn = globals_1.jest.fn().mockReturnValue(mockClient);
        // Clear all mocks
        globals_1.jest.clearAllMocks();
        mockConsoleLog.mockClear();
    });
    (0, globals_1.afterEach)(() => {
        globals_1.jest.clearAllMocks();
    });
    (0, globals_1.describe)('Constructor and Configuration', () => {
        (0, globals_1.it)('should initialize with default configuration', () => {
            workflowManager = new workflowResources_1.WorkflowResourceManager();
            (0, globals_1.expect)(workflowManager).toBeInstanceOf(workflowResources_1.WorkflowResourceManager);
        });
        (0, globals_1.it)('should initialize with custom configuration', () => {
            const config = {
                baseUri: 'custom://workflows',
                maxWorkflows: 25,
                includeInactive: false,
                includeExecutions: true,
                cacheDuration: 10000,
            };
            workflowManager = new workflowResources_1.WorkflowResourceManager(config);
            (0, globals_1.expect)(workflowManager).toBeInstanceOf(workflowResources_1.WorkflowResourceManager);
        });
        (0, globals_1.it)('should merge custom config with defaults', () => {
            const config = {
                maxWorkflows: 200,
                includeExecutions: true,
            };
            workflowManager = new workflowResources_1.WorkflowResourceManager(config);
            (0, globals_1.expect)(workflowManager).toBeInstanceOf(workflowResources_1.WorkflowResourceManager);
        });
    });
    (0, globals_1.describe)('Resource Registration', () => {
        (0, globals_1.beforeEach)(() => {
            workflowManager = new workflowResources_1.WorkflowResourceManager();
        });
        (0, globals_1.it)('should register all workflow resources', () => {
            workflowManager.register(mockServer, getClientFn);
            (0, globals_1.expect)(mockServer.addResourceTemplate).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                uriTemplate: 'n8n://workflows/{id}',
                name: 'n8n Workflow',
                mimeType: 'application/json',
            }));
            (0, globals_1.expect)(mockServer.addResourceTemplate).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                uriTemplate: 'n8n://workflows/{workflowId}',
                name: 'n8n Workflow by ID',
                mimeType: 'application/json',
            }));
            (0, globals_1.expect)(mockServer.addResource).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                uri: 'n8n://workflows/list',
                name: 'n8n Workflow List',
                mimeType: 'application/json',
            }));
            (0, globals_1.expect)(mockServer.addResource).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                uri: 'n8n://workflows/active',
                name: 'n8n Active Workflows',
                mimeType: 'application/json',
            }));
            (0, globals_1.expect)(mockServer.addResource).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                uri: 'n8n://workflows/stats',
                name: 'n8n Workflow Statistics',
                mimeType: 'application/json',
            }));
            (0, globals_1.expect)(mockConsoleLog).toHaveBeenCalledWith('ðŸ“„ Workflow resources registered');
        });
        (0, globals_1.it)('should register workflow template with correct arguments', () => {
            workflowManager.register(mockServer, getClientFn);
            const templateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://workflows/{id}');
            (0, globals_1.expect)(templateCall).toBeDefined();
            if (!templateCall)
                throw new Error('Template call not found');
            if (!templateCall)
                throw new Error('Template call not found');
            const template = templateCall[0];
            (0, globals_1.expect)(template.arguments).toHaveLength(1);
            (0, globals_1.expect)(template.arguments[0]).toEqual({
                name: 'id',
                description: 'The ID of the n8n workflow',
                required: true,
            });
        });
        (0, globals_1.it)('should register duplicate workflow template with workflowId parameter', () => {
            workflowManager.register(mockServer, getClientFn);
            const templateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://workflows/{workflowId}');
            (0, globals_1.expect)(templateCall).toBeDefined();
            if (!templateCall)
                throw new Error('Template call not found');
            if (!templateCall)
                throw new Error('Template call not found');
            const template = templateCall[0];
            (0, globals_1.expect)(template.arguments).toHaveLength(1);
            (0, globals_1.expect)(template.arguments[0]).toEqual({
                name: 'workflowId',
                description: 'The ID of the n8n workflow',
                required: true,
            });
        });
    });
    (0, globals_1.describe)('Individual Workflow Resource', () => {
        (0, globals_1.beforeEach)(() => {
            workflowManager = new workflowResources_1.WorkflowResourceManager();
            workflowManager.register(mockServer, getClientFn);
        });
        (0, globals_1.it)('should load workflow resource successfully', async () => {
            mockClient.getWorkflow.mockResolvedValue(mockWorkflow);
            const templateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://workflows/{id}');
            (0, globals_1.expect)(templateCall).toBeDefined();
            if (!templateCall)
                throw new Error('Template call not found');
            if (!templateCall)
                throw new Error('Template call not found');
            const template = templateCall[0];
            const result = await template.load({ id: 'workflow-123' });
            (0, globals_1.expect)(result.text).toBeDefined();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.id).toBe('workflow-123');
            (0, globals_1.expect)(data.name).toBe('Test Workflow');
            (0, globals_1.expect)(data.active).toBe(true);
            (0, globals_1.expect)(data.metadata).toBeDefined();
            (0, globals_1.expect)(data.metadata.id).toBe('workflow-123');
            (0, globals_1.expect)(data.metadata.nodeCount).toBe(2);
            (0, globals_1.expect)(data.metadata.connectionCount).toBe(1);
            (0, globals_1.expect)(data.resourceInfo).toBeDefined();
            (0, globals_1.expect)(data.resourceInfo.type).toBe('n8n-workflow');
        });
        (0, globals_1.it)('should handle workflow with no nodes or connections', async () => {
            const emptyWorkflow = {
                ...mockWorkflow,
                nodes: [],
                connections: {},
            };
            mockClient.getWorkflow.mockResolvedValue(emptyWorkflow);
            const templateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://workflows/{id}');
            if (!templateCall)
                throw new Error('Template call not found');
            const template = templateCall[0];
            const result = await template.load({ id: 'workflow-123' });
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.metadata.nodeCount).toBe(0);
            (0, globals_1.expect)(data.metadata.connectionCount).toBe(0);
        });
        (0, globals_1.it)('should load workflow using workflowId template', async () => {
            mockClient.getWorkflow.mockResolvedValue(mockWorkflow);
            const templateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://workflows/{workflowId}');
            (0, globals_1.expect)(templateCall).toBeDefined();
            if (!templateCall)
                throw new Error('Template call not found');
            if (!templateCall)
                throw new Error('Template call not found');
            const template = templateCall[0];
            const result = await template.load({ workflowId: 'workflow-123' });
            (0, globals_1.expect)(result.text).toBeDefined();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.id).toBe('workflow-123');
        });
        (0, globals_1.it)('should throw error when client not initialized', async () => {
            // Clear all previous mock calls first
            globals_1.jest.clearAllMocks();
            mockConsoleLog.mockClear();
            const nullClientFn = globals_1.jest.fn().mockReturnValue(null);
            workflowManager = new workflowResources_1.WorkflowResourceManager();
            workflowManager.register(mockServer, nullClientFn);
            const templateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://workflows/{id}');
            if (!templateCall)
                throw new Error('Template call not found');
            const template = templateCall[0];
            await (0, globals_1.expect)(template.load({ id: 'workflow-123' })).rejects.toThrow('n8n client not initialized. Run init-n8n first.');
        });
        (0, globals_1.it)('should handle API errors', async () => {
            mockClient.getWorkflow.mockRejectedValue(new Error('Workflow not found'));
            const templateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://workflows/{id}');
            if (!templateCall)
                throw new Error('Template call not found');
            const template = templateCall[0];
            await (0, globals_1.expect)(template.load({ id: 'workflow-123' })).rejects.toThrow('Failed to load workflow workflow-123: Workflow not found');
        });
        (0, globals_1.it)('should handle workflow with no tags', async () => {
            const workflowWithoutTags = {
                ...mockWorkflow,
                tags: [],
            };
            mockClient.getWorkflow.mockResolvedValue(workflowWithoutTags);
            const templateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://workflows/{id}');
            if (!templateCall)
                throw new Error('Template call not found');
            const template = templateCall[0];
            const result = await template.load({ id: 'workflow-123' });
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.metadata.tags).toEqual([]);
        });
    });
    (0, globals_1.describe)('Workflow List Resource', () => {
        (0, globals_1.beforeEach)(() => {
            workflowManager = new workflowResources_1.WorkflowResourceManager();
            workflowManager.register(mockServer, getClientFn);
        });
        (0, globals_1.it)('should load workflow list successfully', async () => {
            mockClient.getWorkflows.mockResolvedValue({
                data: [mockWorkflow, mockInactiveWorkflow],
            });
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/list');
            (0, globals_1.expect)(resourceCall).toBeDefined();
            if (!resourceCall)
                throw new Error('Resource call not found');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            const result = await resource.load();
            (0, globals_1.expect)(result.text).toBeDefined();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.workflows).toHaveLength(2);
            (0, globals_1.expect)(data.workflows[0].id).toBe('workflow-123');
            (0, globals_1.expect)(data.workflows[0].name).toBe('Test Workflow');
            (0, globals_1.expect)(data.workflows[0].active).toBe(true);
            (0, globals_1.expect)(data.workflows[0].uri).toBe('n8n://workflows/workflow-123');
            (0, globals_1.expect)(data.workflows[1].id).toBe('workflow-456');
            (0, globals_1.expect)(data.workflows[1].active).toBe(false);
            (0, globals_1.expect)(data.metadata.total).toBe(2);
            (0, globals_1.expect)(data.resourceInfo.type).toBe('n8n-workflow-list');
        });
        (0, globals_1.it)('should handle empty workflow list', async () => {
            mockClient.getWorkflows.mockResolvedValue({ data: [] });
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/list');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            const result = await resource.load();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.workflows).toHaveLength(0);
            (0, globals_1.expect)(data.metadata.total).toBe(0);
        });
        (0, globals_1.it)('should handle workflow list API errors', async () => {
            mockClient.getWorkflows.mockRejectedValue(new Error('List API Error'));
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/list');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            await (0, globals_1.expect)(resource.load()).rejects.toThrow('Failed to load workflow list: List API Error');
        });
        (0, globals_1.it)('should handle workflows with missing tags', async () => {
            const workflowsWithMixedTags = [
                { ...mockWorkflow, tags: undefined },
                { ...mockInactiveWorkflow, tags: undefined },
            ];
            mockClient.getWorkflows.mockResolvedValue({ data: workflowsWithMixedTags });
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/list');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            const result = await resource.load();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.workflows[0].tags).toEqual([]);
            (0, globals_1.expect)(data.workflows[1].tags).toEqual([]);
        });
    });
    (0, globals_1.describe)('Active Workflows Resource', () => {
        (0, globals_1.beforeEach)(() => {
            workflowManager = new workflowResources_1.WorkflowResourceManager();
            workflowManager.register(mockServer, getClientFn);
        });
        (0, globals_1.it)('should load active workflows successfully', async () => {
            mockClient.getWorkflows.mockResolvedValue({
                data: [mockWorkflow, mockInactiveWorkflow],
            });
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/active');
            (0, globals_1.expect)(resourceCall).toBeDefined();
            if (!resourceCall)
                throw new Error('Resource call not found');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            const result = await resource.load();
            (0, globals_1.expect)(result.text).toBeDefined();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.activeWorkflows).toHaveLength(1); // Only active workflow
            (0, globals_1.expect)(data.activeWorkflows[0].id).toBe('workflow-123');
            (0, globals_1.expect)(data.activeWorkflows[0].name).toBe('Test Workflow');
            (0, globals_1.expect)(data.activeWorkflows[0].lastExecution).toBe('2023-01-01T12:00:00Z');
            (0, globals_1.expect)(data.metadata.total).toBe(1);
            (0, globals_1.expect)(data.metadata.activeOnly).toBe(true);
            (0, globals_1.expect)(data.resourceInfo.type).toBe('n8n-active-workflows');
        });
        (0, globals_1.it)('should handle no active workflows', async () => {
            mockClient.getWorkflows.mockResolvedValue({
                data: [mockInactiveWorkflow], // Only inactive workflow
            });
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/active');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            const result = await resource.load();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.activeWorkflows).toHaveLength(0);
            (0, globals_1.expect)(data.metadata.total).toBe(0);
        });
        (0, globals_1.it)('should handle active workflows API errors', async () => {
            mockClient.getWorkflows.mockRejectedValue(new Error('Active API Error'));
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/active');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            await (0, globals_1.expect)(resource.load()).rejects.toThrow('Failed to load active workflows: Active API Error');
        });
    });
    (0, globals_1.describe)('Workflow Statistics Resource', () => {
        (0, globals_1.beforeEach)(() => {
            workflowManager = new workflowResources_1.WorkflowResourceManager();
            workflowManager.register(mockServer, getClientFn);
        });
        (0, globals_1.it)('should load workflow statistics successfully', async () => {
            const recentWorkflow = {
                ...mockWorkflow,
                id: 'workflow-789',
                createdAt: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(), // 1 day ago
                updatedAt: new Date(Date.now() - 60 * 60 * 1000).toISOString(), // 1 hour ago
                tags: ['test', 'recent'],
            };
            mockClient.getWorkflows.mockResolvedValue({
                data: [mockWorkflow, mockInactiveWorkflow, recentWorkflow],
            });
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/stats');
            (0, globals_1.expect)(resourceCall).toBeDefined();
            if (!resourceCall)
                throw new Error('Resource call not found');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            const result = await resource.load();
            (0, globals_1.expect)(result.text).toBeDefined();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.totalWorkflows).toBe(3);
            (0, globals_1.expect)(data.activeWorkflows).toBe(2); // mockWorkflow and recentWorkflow are active
            (0, globals_1.expect)(data.inactiveWorkflows).toBe(1);
            (0, globals_1.expect)(data.tagUsage).toBeDefined();
            (0, globals_1.expect)(data.tagUsage.test).toBe(2); // Present in mockWorkflow and recentWorkflow
            (0, globals_1.expect)(data.tagUsage.automation).toBe(1);
            (0, globals_1.expect)(data.tagUsage.draft).toBe(1);
            (0, globals_1.expect)(data.tagUsage.recent).toBe(1);
            (0, globals_1.expect)(data.creationStats).toBeDefined();
            (0, globals_1.expect)(data.creationStats.createdLastWeek).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(data.creationStats.updatedLastWeek).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(data.resourceInfo.type).toBe('n8n-workflow-stats');
        });
        (0, globals_1.it)('should handle empty workflows for statistics', async () => {
            mockClient.getWorkflows.mockResolvedValue({ data: [] });
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/stats');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            const result = await resource.load();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.totalWorkflows).toBe(0);
            (0, globals_1.expect)(data.activeWorkflows).toBe(0);
            (0, globals_1.expect)(data.inactiveWorkflows).toBe(0);
            (0, globals_1.expect)(data.tagUsage).toEqual({});
        });
        (0, globals_1.it)('should handle stats API errors', async () => {
            mockClient.getWorkflows.mockRejectedValue(new Error('Stats API Error'));
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/stats');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            await (0, globals_1.expect)(resource.load()).rejects.toThrow('Failed to load workflow statistics: Stats API Error');
        });
        (0, globals_1.it)('should handle workflows with string tags', async () => {
            const workflowWithStringTags = {
                ...mockWorkflow,
                tags: ['string-tag-1', 'string-tag-2'],
            };
            mockClient.getWorkflows.mockResolvedValue({
                data: [workflowWithStringTags],
            });
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/stats');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            const result = await resource.load();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.tagUsage['string-tag-1']).toBe(1);
            (0, globals_1.expect)(data.tagUsage['string-tag-2']).toBe(1);
        });
        (0, globals_1.it)('should handle workflows with mixed tag formats', async () => {
            const workflowWithMixedTags = {
                ...mockWorkflow,
                tags: ['object-tag', 'string-tag'],
            };
            mockClient.getWorkflows.mockResolvedValue({
                data: [workflowWithMixedTags],
            });
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/stats');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            const result = await resource.load();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.tagUsage['object-tag']).toBe(1);
            (0, globals_1.expect)(data.tagUsage['string-tag']).toBe(1);
        });
    });
    (0, globals_1.describe)('Cache Management', () => {
        (0, globals_1.beforeEach)(() => {
            workflowManager = new workflowResources_1.WorkflowResourceManager({ cacheDuration: 1000 });
        });
        (0, globals_1.it)('should cache workflow data', async () => {
            workflowManager.register(mockServer, getClientFn);
            mockClient.getWorkflow.mockResolvedValue(mockWorkflow);
            const templateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://workflows/{id}');
            if (!templateCall)
                throw new Error('Template call not found');
            const template = templateCall[0];
            // First call
            await template.load({ id: 'workflow-123' });
            (0, globals_1.expect)(mockClient.getWorkflow).toHaveBeenCalledTimes(1);
            // Second call should use cache
            await template.load({ id: 'workflow-123' });
            (0, globals_1.expect)(mockClient.getWorkflow).toHaveBeenCalledTimes(1);
        });
        (0, globals_1.it)('should cache workflow list data', async () => {
            workflowManager.register(mockServer, getClientFn);
            mockClient.getWorkflows.mockResolvedValue({
                data: [mockWorkflow],
            });
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/list');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            // First call
            await resource.load();
            (0, globals_1.expect)(mockClient.getWorkflows).toHaveBeenCalledTimes(1);
            // Second call should use cache
            await resource.load();
            (0, globals_1.expect)(mockClient.getWorkflows).toHaveBeenCalledTimes(1);
        });
        (0, globals_1.it)('should clear cache', () => {
            workflowManager.clearCache();
            // Should not throw
        });
        (0, globals_1.it)('should get cache statistics', () => {
            const stats = workflowManager.getCacheStats();
            (0, globals_1.expect)(stats).toBeDefined();
            (0, globals_1.expect)(typeof stats.size).toBe('number');
            (0, globals_1.expect)(Array.isArray(stats.keys)).toBe(true);
        });
        (0, globals_1.it)('should not cache when duration is 0', () => {
            workflowManager = new workflowResources_1.WorkflowResourceManager({ cacheDuration: 0 });
            workflowManager.register(mockServer, getClientFn);
            mockClient.getWorkflow.mockResolvedValue(mockWorkflow);
            const templateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://workflows/{id}');
            if (!templateCall)
                throw new Error('Template call not found');
            const template = templateCall[0];
            return template
                .load({ id: 'workflow-123' })
                .then(() => {
                return template.load({ id: 'workflow-123' });
            })
                .then(() => {
                (0, globals_1.expect)(mockClient.getWorkflow).toHaveBeenCalledTimes(2);
            });
        });
        (0, globals_1.it)('should handle cache expiration', async () => {
            globals_1.jest.useFakeTimers();
            workflowManager = new workflowResources_1.WorkflowResourceManager({ cacheDuration: 1 }); // 1ms cache
            workflowManager.register(mockServer, getClientFn);
            mockClient.getWorkflow.mockResolvedValue(mockWorkflow);
            const templateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://workflows/{id}');
            if (!templateCall)
                throw new Error('Template call not found');
            const template = templateCall[0];
            // First call
            await template.load({ id: 'workflow-123' });
            (0, globals_1.expect)(mockClient.getWorkflow).toHaveBeenCalledTimes(1);
            // Fast-forward time to expire cache
            globals_1.jest.advanceTimersByTime(10);
            // Second call should not use expired cache
            await template.load({ id: 'workflow-123' });
            (0, globals_1.expect)(mockClient.getWorkflow).toHaveBeenCalledTimes(2);
            globals_1.jest.useRealTimers();
        });
    });
    (0, globals_1.describe)('Factory Function', () => {
        (0, globals_1.it)('should create workflow resource manager with factory function', () => {
            const manager = (0, workflowResources_1.createWorkflowResources)();
            (0, globals_1.expect)(manager).toBeInstanceOf(workflowResources_1.WorkflowResourceManager);
        });
        (0, globals_1.it)('should create workflow resource manager with config via factory', () => {
            const config = { maxWorkflows: 50, includeInactive: false };
            const manager = (0, workflowResources_1.createWorkflowResources)(config);
            (0, globals_1.expect)(manager).toBeInstanceOf(workflowResources_1.WorkflowResourceManager);
        });
    });
    (0, globals_1.describe)('Tag Usage Calculation', () => {
        (0, globals_1.beforeEach)(() => {
            workflowManager = new workflowResources_1.WorkflowResourceManager();
            workflowManager.register(mockServer, getClientFn);
        });
        (0, globals_1.it)('should calculate tag usage correctly with object tags', async () => {
            const workflowsWithObjectTags = [
                {
                    ...mockWorkflow,
                    tags: ['production', 'api'],
                },
                {
                    ...mockInactiveWorkflow,
                    tags: ['production', 'webhook'],
                },
            ];
            mockClient.getWorkflows.mockResolvedValue({
                data: workflowsWithObjectTags,
            });
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/stats');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            const result = await resource.load();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.tagUsage.production).toBe(2);
            (0, globals_1.expect)(data.tagUsage.api).toBe(1);
            (0, globals_1.expect)(data.tagUsage.webhook).toBe(1);
        });
        (0, globals_1.it)('should handle workflows with no tags gracefully', async () => {
            const workflowsWithNoTags = [
                { ...mockWorkflow, tags: undefined },
                { ...mockInactiveWorkflow, tags: undefined },
                { ...mockWorkflow, id: 'workflow-789', tags: [] },
            ];
            mockClient.getWorkflows.mockResolvedValue({
                data: workflowsWithNoTags,
            });
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/stats');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            const result = await resource.load();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.tagUsage).toEqual({});
        });
        (0, globals_1.it)('should handle workflows with non-array tags', async () => {
            const workflowsWithInvalidTags = [
                { ...mockWorkflow, tags: 'invalid' },
                { ...mockInactiveWorkflow, tags: { invalid: true } },
            ];
            mockClient.getWorkflows.mockResolvedValue({
                data: workflowsWithInvalidTags,
            });
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/stats');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            const result = await resource.load();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.tagUsage).toEqual({});
        });
    });
    (0, globals_1.describe)('Creation Statistics', () => {
        (0, globals_1.beforeEach)(() => {
            workflowManager = new workflowResources_1.WorkflowResourceManager();
            workflowManager.register(mockServer, getClientFn);
        });
        (0, globals_1.it)('should calculate creation statistics correctly', async () => {
            const now = new Date();
            const oneDayAgo = new Date(now.getTime() - 24 * 60 * 60 * 1000);
            const oneWeekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
            const oneMonthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);
            const workflowsWithDifferentDates = [
                {
                    ...mockWorkflow,
                    createdAt: oneDayAgo.toISOString(),
                    updatedAt: oneDayAgo.toISOString(),
                },
                {
                    ...mockInactiveWorkflow,
                    createdAt: oneWeekAgo.toISOString(),
                    updatedAt: oneDayAgo.toISOString(),
                },
                {
                    ...mockWorkflow,
                    id: 'workflow-789',
                    createdAt: oneMonthAgo.toISOString(),
                    updatedAt: oneMonthAgo.toISOString(),
                },
            ];
            mockClient.getWorkflows.mockResolvedValue({
                data: workflowsWithDifferentDates,
            });
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/stats');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            const result = await resource.load();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.creationStats.createdLastWeek).toBeGreaterThanOrEqual(1);
            (0, globals_1.expect)(data.creationStats.createdLastMonth).toBeGreaterThanOrEqual(1);
            (0, globals_1.expect)(data.creationStats.updatedLastWeek).toBeGreaterThanOrEqual(2);
            (0, globals_1.expect)(data.creationStats.updatedLastMonth).toBeGreaterThanOrEqual(2);
        });
        (0, globals_1.it)('should handle invalid date formats', async () => {
            const workflowsWithInvalidDates = [
                {
                    ...mockWorkflow,
                    createdAt: 'invalid-date',
                    updatedAt: undefined,
                },
            ];
            mockClient.getWorkflows.mockResolvedValue({
                data: workflowsWithInvalidDates,
            });
            const resourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/stats');
            if (!resourceCall)
                throw new Error('Resource call not found');
            const resource = resourceCall[0];
            const result = await resource.load();
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.creationStats.createdLastWeek).toBe(0);
            (0, globals_1.expect)(data.creationStats.updatedLastWeek).toBe(0);
        });
    });
    (0, globals_1.describe)('Edge Cases and Error Handling', () => {
        (0, globals_1.beforeEach)(() => {
            workflowManager = new workflowResources_1.WorkflowResourceManager();
            workflowManager.register(mockServer, getClientFn);
        });
        (0, globals_1.it)('should handle non-Error exceptions', async () => {
            mockClient.getWorkflow.mockRejectedValue('String error');
            const templateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://workflows/{id}');
            if (!templateCall)
                throw new Error('Template call not found');
            const template = templateCall[0];
            await (0, globals_1.expect)(template.load({ id: 'workflow-123' })).rejects.toThrow('Failed to load workflow workflow-123: String error');
        });
        (0, globals_1.it)('should handle malformed workflow data', async () => {
            const malformedWorkflow = {
                id: 'workflow-123',
                // Missing required fields
                name: undefined,
                active: undefined,
                nodes: [],
                connections: {},
            };
            mockClient.getWorkflow.mockResolvedValue(malformedWorkflow);
            const templateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://workflows/{id}');
            if (!templateCall)
                throw new Error('Template call not found');
            const template = templateCall[0];
            const result = await template.load({ id: 'workflow-123' });
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.id).toBe('workflow-123');
            (0, globals_1.expect)(data.metadata.tags).toEqual([]);
        });
        (0, globals_1.it)('should handle workflows with complex connection objects', async () => {
            const workflowWithComplexConnections = {
                ...mockWorkflow,
                connections: {
                    'HTTP Request': {
                        main: [
                            [
                                { node: 'Code', type: 'main', index: 0 },
                                { node: 'Another Node', type: 'main', index: 1 },
                            ],
                        ],
                        secondary: [[{ node: 'Error Handler', type: 'main', index: 0 }]],
                    },
                    Code: {
                        main: [[{ node: 'Final Node', type: 'main', index: 0 }]],
                    },
                },
            };
            mockClient.getWorkflow.mockResolvedValue(workflowWithComplexConnections);
            const templateCall = mockServer.addResourceTemplate.mock.calls.find(call => call[0].uriTemplate === 'n8n://workflows/{id}');
            if (!templateCall)
                throw new Error('Template call not found');
            const template = templateCall[0];
            const result = await template.load({ id: 'workflow-123' });
            const data = JSON.parse(result.text);
            (0, globals_1.expect)(data.metadata.connectionCount).toBe(2); // HTTP Request and Code have connections
        });
        (0, globals_1.it)('should handle empty workflow list gracefully in all resources', async () => {
            mockClient.getWorkflows.mockResolvedValue({ data: [] });
            // Test list resource
            const listResourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/list');
            if (!listResourceCall)
                throw new Error('List resource call not found');
            const listResource = listResourceCall[0];
            const listResult = await listResource.load();
            const listData = JSON.parse(listResult.text);
            (0, globals_1.expect)(listData.workflows).toHaveLength(0);
            // Test active resource
            const activeResourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/active');
            if (!activeResourceCall)
                throw new Error('Active resource call not found');
            const activeResource = activeResourceCall[0];
            const activeResult = await activeResource.load();
            const activeData = JSON.parse(activeResult.text);
            (0, globals_1.expect)(activeData.activeWorkflows).toHaveLength(0);
            // Test stats resource
            const statsResourceCall = mockServer.addResource.mock.calls.find(call => call[0].uri === 'n8n://workflows/stats');
            if (!statsResourceCall)
                throw new Error('Stats resource call not found');
            const statsResource = statsResourceCall[0];
            const statsResult = await statsResource.load();
            const statsData = JSON.parse(statsResult.text);
            (0, globals_1.expect)(statsData.totalWorkflows).toBe(0);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2plcmVteXBhcmtlci9EZXNrdG9wL0NsYXVkZSBDb2RpbmcgUHJvamVjdHMvbjhuLW1jcC1zZXJ2ZXIvdGVzdHMvdW5pdC9yZXNvdXJjZXMvd29ya2Zsb3dSZXNvdXJjZXMudGVzdC50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDJDQUFrRjtBQVFsRixvQkFBb0I7QUFDcEIsY0FBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNyQixjQUFJLENBQUMsSUFBSSxDQUFDLCtCQUErQixDQUFDLENBQUM7QUFSM0MsZ0ZBR2tEO0FBT2xELHNEQUFzRDtBQUN0RCxNQUFNLGNBQWMsR0FBRyxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDakMsY0FBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUMsa0JBQWtCLENBQUMsY0FBYyxDQUFDLENBQUM7QUFFOUQsSUFBQSxrQkFBUSxFQUFDLHlCQUF5QixFQUFFLEdBQUcsRUFBRTtJQUN2QyxJQUFJLGVBQXdDLENBQUM7SUFDN0MsSUFBSSxVQUFnQyxDQUFDO0lBQ3JDLElBQUksVUFBa0MsQ0FBQztJQUN2QyxJQUFJLFdBQW1DLENBQUM7SUFFeEMscUJBQXFCO0lBQ3JCLE1BQU0sWUFBWSxHQUFHO1FBQ25CLEVBQUUsRUFBRSxjQUFjO1FBQ2xCLElBQUksRUFBRSxlQUFlO1FBQ3JCLE1BQU0sRUFBRSxJQUFJO1FBQ1osSUFBSSxFQUFFLENBQUMsTUFBTSxFQUFFLFlBQVksQ0FBQztRQUM1QixTQUFTLEVBQUUsc0JBQXNCO1FBQ2pDLFNBQVMsRUFBRSxzQkFBc0I7UUFDakMsS0FBSyxFQUFFO1lBQ0wsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSw0QkFBNEIsRUFBRSxJQUFJLEVBQUUsY0FBYyxFQUFFO1lBQ3pFLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUscUJBQXFCLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRTtTQUN6QjtRQUNuQyxXQUFXLEVBQUU7WUFDWCxj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QUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLHVCQUF1QixDQUNoRCxDQUFDO1lBQ0YsSUFBSSxDQUFDLGlCQUFpQjtnQkFBRSxNQUFNLElBQUksS0FBSyxDQUFDLCtCQUErQixDQUFDLENBQUM7WUFDekUsTUFBTSxhQUFhLEdBQUcsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDM0MsTUFBTSxXQUFXLEdBQUcsTUFBTSxhQUFhLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDL0MsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBRSxXQUFtQixDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3hELElBQUEsZ0JBQU0sRUFBQyxTQUFTLENBQUMsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvamVyZW15cGFya2VyL0Rlc2t0b3AvQ2xhdWRlIENvZGluZyBQcm9qZWN0cy9uOG4tbWNwLXNlcnZlci90ZXN0cy91bml0L3Jlc291cmNlcy93b3JrZmxvd1Jlc291cmNlcy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBiZWZvcmVFYWNoLCBqZXN0LCBhZnRlckVhY2ggfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7IEZhc3RNQ1AgfSBmcm9tICdmYXN0bWNwJztcbmltcG9ydCB7XG4gIFdvcmtmbG93UmVzb3VyY2VNYW5hZ2VyLFxuICBjcmVhdGVXb3JrZmxvd1Jlc291cmNlcyxcbn0gZnJvbSAnLi4vLi4vLi4vc3JjL3Jlc291cmNlcy93b3JrZmxvd1Jlc291cmNlcyc7XG5pbXBvcnQgeyBOOG5DbGllbnQgfSBmcm9tICcuLi8uLi8uLi9zcmMvY2xpZW50L244bkNsaWVudCc7XG5cbi8vIE1vY2sgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJ2Zhc3RtY3AnKTtcbmplc3QubW9jaygnLi4vLi4vLi4vc3JjL2NsaWVudC9uOG5DbGllbnQnKTtcblxuLy8gTW9jayBjb25zb2xlIG1ldGhvZHMgdG8gYXZvaWQgdGVzdCBvdXRwdXQgcG9sbHV0aW9uXG5jb25zdCBtb2NrQ29uc29sZUxvZyA9IGplc3QuZm4oKTtcbmplc3Quc3B5T24oY29uc29sZSwgJ2xvZycpLm1vY2tJbXBsZW1lbnRhdGlvbihtb2NrQ29uc29sZUxvZyk7XG5cbmRlc2NyaWJlKCdXb3JrZmxvd1Jlc291cmNlTWFuYWdlcicsICgpID0+IHtcbiAgbGV0IHdvcmtmbG93TWFuYWdlcjogV29ya2Zsb3dSZXNvdXJjZU1hbmFnZXI7XG4gIGxldCBtb2NrU2VydmVyOiBqZXN0Lk1vY2tlZDxGYXN0TUNQPjtcbiAgbGV0IG1vY2tDbGllbnQ6IGplc3QuTW9ja2VkPE44bkNsaWVudD47XG4gIGxldCBnZXRDbGllbnRGbjogKCkgPT4gTjhuQ2xpZW50IHwgbnVsbDtcblxuICAvLyBNb2NrIHdvcmtmbG93IGRhdGFcbiAgY29uc3QgbW9ja1dvcmtmbG93ID0ge1xuICAgIGlkOiAnd29ya2Zsb3ctMTIzJyxcbiAgICBuYW1lOiAnVGVzdCBXb3JrZmxvdycsXG4gICAgYWN0aXZlOiB0cnVlLFxuICAgIHRhZ3M6IFsndGVzdCcsICdhdXRvbWF0aW9uJ10sXG4gICAgY3JlYXRlZEF0OiAnMjAyMy0wMS0wMVQxMDowMDowMFonLFxuICAgIHVwZGF0ZWRBdDogJzIwMjMtMDEtMDFUMTI6MDA6MDBaJyxcbiAgICBub2RlczogW1xuICAgICAgeyBpZDogJ25vZGUxJywgdHlwZTogJ244bi1ub2Rlcy1iYXNlLmh0dHBSZXF1ZXN0JywgbmFtZTogJ0hUVFAgUmVxdWVzdCcgfSxcbiAgICAgIHsgaWQ6ICdub2RlMicsIHR5cGU6ICduOG4tbm9kZXMtYmFzZS5jb2RlJywgbmFtZTogJ0NvZGUnIH0sXG4gICAgXSBhcyBBcnJheTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4sXG4gICAgY29ubmVjdGlvbnM6IHtcbiAgICAgICdIVFRQIFJlcXVlc3QnOiB7XG4gICAgICAgIG1haW46IFtcbiAgICAgICAgICBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG5vZGU6ICdDb2RlJyxcbiAgICAgICAgICAgICAgdHlwZTogJ21haW4nLFxuICAgICAgICAgICAgICBpbmRleDogMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfTtcblxuICBjb25zdCBtb2NrSW5hY3RpdmVXb3JrZmxvdyA9IHtcbiAgICBpZDogJ3dvcmtmbG93LTQ1NicsXG4gICAgbmFtZTogJ0luYWN0aXZlIFdvcmtmbG93JyxcbiAgICBhY3RpdmU6IGZhbHNlLFxuICAgIHRhZ3M6IFsnZHJhZnQnXSxcbiAgICBjcmVhdGVkQXQ6ICcyMDIzLTAxLTAyVDEwOjAwOjAwWicsXG4gICAgdXBkYXRlZEF0OiAnMjAyMy0wMS0wMlQxMTowMDowMFonLFxuICAgIG5vZGVzOiBbeyBpZDogJ25vZGUzJywgdHlwZTogJ244bi1ub2Rlcy1iYXNlLndlYmhvb2snLCBuYW1lOiAnV2ViaG9vaycgfV0gYXMgQXJyYXk8XG4gICAgICBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuICAgID4sXG4gICAgY29ubmVjdGlvbnM6IHt9LFxuICB9O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIC8vIENyZWF0ZSBtb2NrIGluc3RhbmNlc1xuICAgIG1vY2tTZXJ2ZXIgPSB7XG4gICAgICBhZGRSZXNvdXJjZTogamVzdC5mbigpLFxuICAgICAgYWRkUmVzb3VyY2VUZW1wbGF0ZTogamVzdC5mbigpLFxuICAgIH0gYXMgdW5rbm93biBhcyBqZXN0Lk1vY2tlZDxGYXN0TUNQPjtcblxuICAgIG1vY2tDbGllbnQgPSB7XG4gICAgICBnZXRXb3JrZmxvdzogamVzdC5mbigpLFxuICAgICAgZ2V0V29ya2Zsb3dzOiBqZXN0LmZuKCksXG4gICAgfSBhcyB1bmtub3duIGFzIGplc3QuTW9ja2VkPE44bkNsaWVudD47XG5cbiAgICBnZXRDbGllbnRGbiA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUobW9ja0NsaWVudCkgYXMgKCkgPT4gTjhuQ2xpZW50IHwgbnVsbDtcblxuICAgIC8vIENsZWFyIGFsbCBtb2Nrc1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIG1vY2tDb25zb2xlTG9nLm1vY2tDbGVhcigpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29uc3RydWN0b3IgYW5kIENvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHdpdGggZGVmYXVsdCBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xuICAgICAgd29ya2Zsb3dNYW5hZ2VyID0gbmV3IFdvcmtmbG93UmVzb3VyY2VNYW5hZ2VyKCk7XG4gICAgICBleHBlY3Qod29ya2Zsb3dNYW5hZ2VyKS50b0JlSW5zdGFuY2VPZihXb3JrZmxvd1Jlc291cmNlTWFuYWdlcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgd2l0aCBjdXN0b20gY29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgYmFzZVVyaTogJ2N1c3RvbTovL3dvcmtmbG93cycsXG4gICAgICAgIG1heFdvcmtmbG93czogMjUsXG4gICAgICAgIGluY2x1ZGVJbmFjdGl2ZTogZmFsc2UsXG4gICAgICAgIGluY2x1ZGVFeGVjdXRpb25zOiB0cnVlLFxuICAgICAgICBjYWNoZUR1cmF0aW9uOiAxMDAwMCxcbiAgICAgIH07XG5cbiAgICAgIHdvcmtmbG93TWFuYWdlciA9IG5ldyBXb3JrZmxvd1Jlc291cmNlTWFuYWdlcihjb25maWcpO1xuICAgICAgZXhwZWN0KHdvcmtmbG93TWFuYWdlcikudG9CZUluc3RhbmNlT2YoV29ya2Zsb3dSZXNvdXJjZU1hbmFnZXIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBtZXJnZSBjdXN0b20gY29uZmlnIHdpdGggZGVmYXVsdHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgIG1heFdvcmtmbG93czogMjAwLFxuICAgICAgICBpbmNsdWRlRXhlY3V0aW9uczogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIHdvcmtmbG93TWFuYWdlciA9IG5ldyBXb3JrZmxvd1Jlc291cmNlTWFuYWdlcihjb25maWcpO1xuICAgICAgZXhwZWN0KHdvcmtmbG93TWFuYWdlcikudG9CZUluc3RhbmNlT2YoV29ya2Zsb3dSZXNvdXJjZU1hbmFnZXIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVzb3VyY2UgUmVnaXN0cmF0aW9uJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgd29ya2Zsb3dNYW5hZ2VyID0gbmV3IFdvcmtmbG93UmVzb3VyY2VNYW5hZ2VyKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlZ2lzdGVyIGFsbCB3b3JrZmxvdyByZXNvdXJjZXMnLCAoKSA9PiB7XG4gICAgICB3b3JrZmxvd01hbmFnZXIucmVnaXN0ZXIobW9ja1NlcnZlciwgZ2V0Q2xpZW50Rm4pO1xuXG4gICAgICBleHBlY3QobW9ja1NlcnZlci5hZGRSZXNvdXJjZVRlbXBsYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHVyaVRlbXBsYXRlOiAnbjhuOi8vd29ya2Zsb3dzL3tpZH0nLFxuICAgICAgICAgIG5hbWU6ICduOG4gV29ya2Zsb3cnLFxuICAgICAgICAgIG1pbWVUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBleHBlY3QobW9ja1NlcnZlci5hZGRSZXNvdXJjZVRlbXBsYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHVyaVRlbXBsYXRlOiAnbjhuOi8vd29ya2Zsb3dzL3t3b3JrZmxvd0lkfScsXG4gICAgICAgICAgbmFtZTogJ244biBXb3JrZmxvdyBieSBJRCcsXG4gICAgICAgICAgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrU2VydmVyLmFkZFJlc291cmNlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHVyaTogJ244bjovL3dvcmtmbG93cy9saXN0JyxcbiAgICAgICAgICBuYW1lOiAnbjhuIFdvcmtmbG93IExpc3QnLFxuICAgICAgICAgIG1pbWVUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBleHBlY3QobW9ja1NlcnZlci5hZGRSZXNvdXJjZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB1cmk6ICduOG46Ly93b3JrZmxvd3MvYWN0aXZlJyxcbiAgICAgICAgICBuYW1lOiAnbjhuIEFjdGl2ZSBXb3JrZmxvd3MnLFxuICAgICAgICAgIG1pbWVUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBleHBlY3QobW9ja1NlcnZlci5hZGRSZXNvdXJjZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB1cmk6ICduOG46Ly93b3JrZmxvd3Mvc3RhdHMnLFxuICAgICAgICAgIG5hbWU6ICduOG4gV29ya2Zsb3cgU3RhdGlzdGljcycsXG4gICAgICAgICAgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ29uc29sZUxvZykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ/Cfk4QgV29ya2Zsb3cgcmVzb3VyY2VzIHJlZ2lzdGVyZWQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVnaXN0ZXIgd29ya2Zsb3cgdGVtcGxhdGUgd2l0aCBjb3JyZWN0IGFyZ3VtZW50cycsICgpID0+IHtcbiAgICAgIHdvcmtmbG93TWFuYWdlci5yZWdpc3Rlcihtb2NrU2VydmVyLCBnZXRDbGllbnRGbik7XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2VUZW1wbGF0ZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmlUZW1wbGF0ZSA9PT0gJ244bjovL3dvcmtmbG93cy97aWR9J1xuICAgICAgKTtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZUNhbGwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBpZiAoIXRlbXBsYXRlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdUZW1wbGF0ZSBjYWxsIG5vdCBmb3VuZCcpO1xuXG4gICAgICBpZiAoIXRlbXBsYXRlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdUZW1wbGF0ZSBjYWxsIG5vdCBmb3VuZCcpO1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSB0ZW1wbGF0ZUNhbGxbMF07XG4gICAgICBleHBlY3QodGVtcGxhdGUuYXJndW1lbnRzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QodGVtcGxhdGUuYXJndW1lbnRzWzBdKS50b0VxdWFsKHtcbiAgICAgICAgbmFtZTogJ2lkJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgSUQgb2YgdGhlIG44biB3b3JrZmxvdycsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlZ2lzdGVyIGR1cGxpY2F0ZSB3b3JrZmxvdyB0ZW1wbGF0ZSB3aXRoIHdvcmtmbG93SWQgcGFyYW1ldGVyJywgKCkgPT4ge1xuICAgICAgd29ya2Zsb3dNYW5hZ2VyLnJlZ2lzdGVyKG1vY2tTZXJ2ZXIsIGdldENsaWVudEZuKTtcblxuICAgICAgY29uc3QgdGVtcGxhdGVDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZVRlbXBsYXRlLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLnVyaVRlbXBsYXRlID09PSAnbjhuOi8vd29ya2Zsb3dzL3t3b3JrZmxvd0lkfSdcbiAgICAgICk7XG4gICAgICBleHBlY3QodGVtcGxhdGVDYWxsKS50b0JlRGVmaW5lZCgpO1xuICAgICAgaWYgKCF0ZW1wbGF0ZUNhbGwpIHRocm93IG5ldyBFcnJvcignVGVtcGxhdGUgY2FsbCBub3QgZm91bmQnKTtcblxuICAgICAgaWYgKCF0ZW1wbGF0ZUNhbGwpIHRocm93IG5ldyBFcnJvcignVGVtcGxhdGUgY2FsbCBub3QgZm91bmQnKTtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGVtcGxhdGVDYWxsWzBdO1xuICAgICAgZXhwZWN0KHRlbXBsYXRlLmFyZ3VtZW50cykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHRlbXBsYXRlLmFyZ3VtZW50c1swXSkudG9FcXVhbCh7XG4gICAgICAgIG5hbWU6ICd3b3JrZmxvd0lkJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgSUQgb2YgdGhlIG44biB3b3JrZmxvdycsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdJbmRpdmlkdWFsIFdvcmtmbG93IFJlc291cmNlJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgd29ya2Zsb3dNYW5hZ2VyID0gbmV3IFdvcmtmbG93UmVzb3VyY2VNYW5hZ2VyKCk7XG4gICAgICB3b3JrZmxvd01hbmFnZXIucmVnaXN0ZXIobW9ja1NlcnZlciwgZ2V0Q2xpZW50Rm4pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2FkIHdvcmtmbG93IHJlc291cmNlIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGllbnQuZ2V0V29ya2Zsb3cubW9ja1Jlc29sdmVkVmFsdWUobW9ja1dvcmtmbG93KTtcblxuICAgICAgY29uc3QgdGVtcGxhdGVDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZVRlbXBsYXRlLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLnVyaVRlbXBsYXRlID09PSAnbjhuOi8vd29ya2Zsb3dzL3tpZH0nXG4gICAgICApO1xuICAgICAgZXhwZWN0KHRlbXBsYXRlQ2FsbCkudG9CZURlZmluZWQoKTtcbiAgICAgIGlmICghdGVtcGxhdGVDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1RlbXBsYXRlIGNhbGwgbm90IGZvdW5kJyk7XG5cbiAgICAgIGlmICghdGVtcGxhdGVDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1RlbXBsYXRlIGNhbGwgbm90IGZvdW5kJyk7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ2FsbFswXTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRlbXBsYXRlLmxvYWQoeyBpZDogJ3dvcmtmbG93LTEyMycgfSk7XG5cbiAgICAgIGV4cGVjdCgocmVzdWx0IGFzIGFueSkudGV4dCkudG9CZURlZmluZWQoKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKChyZXN1bHQgYXMgYW55KS50ZXh0KTtcbiAgICAgIGV4cGVjdChkYXRhLmlkKS50b0JlKCd3b3JrZmxvdy0xMjMnKTtcbiAgICAgIGV4cGVjdChkYXRhLm5hbWUpLnRvQmUoJ1Rlc3QgV29ya2Zsb3cnKTtcbiAgICAgIGV4cGVjdChkYXRhLmFjdGl2ZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChkYXRhLm1ldGFkYXRhKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRhdGEubWV0YWRhdGEuaWQpLnRvQmUoJ3dvcmtmbG93LTEyMycpO1xuICAgICAgZXhwZWN0KGRhdGEubWV0YWRhdGEubm9kZUNvdW50KS50b0JlKDIpO1xuICAgICAgZXhwZWN0KGRhdGEubWV0YWRhdGEuY29ubmVjdGlvbkNvdW50KS50b0JlKDEpO1xuICAgICAgZXhwZWN0KGRhdGEucmVzb3VyY2VJbmZvKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRhdGEucmVzb3VyY2VJbmZvLnR5cGUpLnRvQmUoJ244bi13b3JrZmxvdycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgd29ya2Zsb3cgd2l0aCBubyBub2RlcyBvciBjb25uZWN0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVtcHR5V29ya2Zsb3cgPSB7XG4gICAgICAgIC4uLm1vY2tXb3JrZmxvdyxcbiAgICAgICAgbm9kZXM6IFtdIGFzIEFycmF5PFJlY29yZDxzdHJpbmcsIHVua25vd24+PixcbiAgICAgICAgY29ubmVjdGlvbnM6IHt9LFxuICAgICAgfTtcbiAgICAgIG1vY2tDbGllbnQuZ2V0V29ya2Zsb3cubW9ja1Jlc29sdmVkVmFsdWUoZW1wdHlXb3JrZmxvdyk7XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2VUZW1wbGF0ZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmlUZW1wbGF0ZSA9PT0gJ244bjovL3dvcmtmbG93cy97aWR9J1xuICAgICAgKTtcbiAgICAgIGlmICghdGVtcGxhdGVDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1RlbXBsYXRlIGNhbGwgbm90IGZvdW5kJyk7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ2FsbFswXTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRlbXBsYXRlLmxvYWQoeyBpZDogJ3dvcmtmbG93LTEyMycgfSk7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKChyZXN1bHQgYXMgYW55KS50ZXh0KTtcbiAgICAgIGV4cGVjdChkYXRhLm1ldGFkYXRhLm5vZGVDb3VudCkudG9CZSgwKTtcbiAgICAgIGV4cGVjdChkYXRhLm1ldGFkYXRhLmNvbm5lY3Rpb25Db3VudCkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9hZCB3b3JrZmxvdyB1c2luZyB3b3JrZmxvd0lkIHRlbXBsYXRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudC5nZXRXb3JrZmxvdy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrV29ya2Zsb3cpO1xuXG4gICAgICBjb25zdCB0ZW1wbGF0ZUNhbGwgPSBtb2NrU2VydmVyLmFkZFJlc291cmNlVGVtcGxhdGUubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpVGVtcGxhdGUgPT09ICduOG46Ly93b3JrZmxvd3Mve3dvcmtmbG93SWR9J1xuICAgICAgKTtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZUNhbGwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBpZiAoIXRlbXBsYXRlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdUZW1wbGF0ZSBjYWxsIG5vdCBmb3VuZCcpO1xuXG4gICAgICBpZiAoIXRlbXBsYXRlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdUZW1wbGF0ZSBjYWxsIG5vdCBmb3VuZCcpO1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSB0ZW1wbGF0ZUNhbGxbMF07XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0ZW1wbGF0ZS5sb2FkKHsgd29ya2Zsb3dJZDogJ3dvcmtmbG93LTEyMycgfSk7XG5cbiAgICAgIGV4cGVjdCgocmVzdWx0IGFzIGFueSkudGV4dCkudG9CZURlZmluZWQoKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKChyZXN1bHQgYXMgYW55KS50ZXh0KTtcbiAgICAgIGV4cGVjdChkYXRhLmlkKS50b0JlKCd3b3JrZmxvdy0xMjMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiBjbGllbnQgbm90IGluaXRpYWxpemVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ2xlYXIgYWxsIHByZXZpb3VzIG1vY2sgY2FsbHMgZmlyc3RcbiAgICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgICAgbW9ja0NvbnNvbGVMb2cubW9ja0NsZWFyKCk7XG5cbiAgICAgIGNvbnN0IG51bGxDbGllbnRGbiA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUobnVsbCkgYXMgKCkgPT4gTjhuQ2xpZW50IHwgbnVsbDtcbiAgICAgIHdvcmtmbG93TWFuYWdlciA9IG5ldyBXb3JrZmxvd1Jlc291cmNlTWFuYWdlcigpO1xuICAgICAgd29ya2Zsb3dNYW5hZ2VyLnJlZ2lzdGVyKG1vY2tTZXJ2ZXIsIG51bGxDbGllbnRGbik7XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2VUZW1wbGF0ZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmlUZW1wbGF0ZSA9PT0gJ244bjovL3dvcmtmbG93cy97aWR9J1xuICAgICAgKTtcbiAgICAgIGlmICghdGVtcGxhdGVDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1RlbXBsYXRlIGNhbGwgbm90IGZvdW5kJyk7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ2FsbFswXTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHRlbXBsYXRlLmxvYWQoeyBpZDogJ3dvcmtmbG93LTEyMycgfSkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ244biBjbGllbnQgbm90IGluaXRpYWxpemVkLiBSdW4gaW5pdC1uOG4gZmlyc3QuJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIEFQSSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2xpZW50LmdldFdvcmtmbG93Lm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignV29ya2Zsb3cgbm90IGZvdW5kJykpO1xuXG4gICAgICBjb25zdCB0ZW1wbGF0ZUNhbGwgPSBtb2NrU2VydmVyLmFkZFJlc291cmNlVGVtcGxhdGUubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpVGVtcGxhdGUgPT09ICduOG46Ly93b3JrZmxvd3Mve2lkfSdcbiAgICAgICk7XG4gICAgICBpZiAoIXRlbXBsYXRlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdUZW1wbGF0ZSBjYWxsIG5vdCBmb3VuZCcpO1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSB0ZW1wbGF0ZUNhbGxbMF07XG5cbiAgICAgIGF3YWl0IGV4cGVjdCh0ZW1wbGF0ZS5sb2FkKHsgaWQ6ICd3b3JrZmxvdy0xMjMnIH0pKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgICdGYWlsZWQgdG8gbG9hZCB3b3JrZmxvdyB3b3JrZmxvdy0xMjM6IFdvcmtmbG93IG5vdCBmb3VuZCdcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB3b3JrZmxvdyB3aXRoIG5vIHRhZ3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB3b3JrZmxvd1dpdGhvdXRUYWdzID0ge1xuICAgICAgICAuLi5tb2NrV29ya2Zsb3csXG4gICAgICAgIHRhZ3M6IFtdLFxuICAgICAgfTtcbiAgICAgIG1vY2tDbGllbnQuZ2V0V29ya2Zsb3cubW9ja1Jlc29sdmVkVmFsdWUod29ya2Zsb3dXaXRob3V0VGFncyk7XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2VUZW1wbGF0ZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmlUZW1wbGF0ZSA9PT0gJ244bjovL3dvcmtmbG93cy97aWR9J1xuICAgICAgKTtcbiAgICAgIGlmICghdGVtcGxhdGVDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1RlbXBsYXRlIGNhbGwgbm90IGZvdW5kJyk7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ2FsbFswXTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRlbXBsYXRlLmxvYWQoeyBpZDogJ3dvcmtmbG93LTEyMycgfSk7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKChyZXN1bHQgYXMgYW55KS50ZXh0KTtcbiAgICAgIGV4cGVjdChkYXRhLm1ldGFkYXRhLnRhZ3MpLnRvRXF1YWwoW10pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnV29ya2Zsb3cgTGlzdCBSZXNvdXJjZScsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIHdvcmtmbG93TWFuYWdlciA9IG5ldyBXb3JrZmxvd1Jlc291cmNlTWFuYWdlcigpO1xuICAgICAgd29ya2Zsb3dNYW5hZ2VyLnJlZ2lzdGVyKG1vY2tTZXJ2ZXIsIGdldENsaWVudEZuKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9hZCB3b3JrZmxvdyBsaXN0IHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGllbnQuZ2V0V29ya2Zsb3dzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogW21vY2tXb3JrZmxvdywgbW9ja0luYWN0aXZlV29ya2Zsb3ddLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc291cmNlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2UubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpID09PSAnbjhuOi8vd29ya2Zsb3dzL2xpc3QnXG4gICAgICApO1xuICAgICAgZXhwZWN0KHJlc291cmNlQ2FsbCkudG9CZURlZmluZWQoKTtcbiAgICAgIGlmICghcmVzb3VyY2VDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlIGNhbGwgbm90IGZvdW5kJyk7XG5cbiAgICAgIGlmICghcmVzb3VyY2VDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlIGNhbGwgbm90IGZvdW5kJyk7XG4gICAgICBjb25zdCByZXNvdXJjZSA9IHJlc291cmNlQ2FsbFswXTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc291cmNlLmxvYWQoKTtcblxuICAgICAgZXhwZWN0KChyZXN1bHQgYXMgYW55KS50ZXh0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoKHJlc3VsdCBhcyBhbnkpLnRleHQpO1xuICAgICAgZXhwZWN0KGRhdGEud29ya2Zsb3dzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QoZGF0YS53b3JrZmxvd3NbMF0uaWQpLnRvQmUoJ3dvcmtmbG93LTEyMycpO1xuICAgICAgZXhwZWN0KGRhdGEud29ya2Zsb3dzWzBdLm5hbWUpLnRvQmUoJ1Rlc3QgV29ya2Zsb3cnKTtcbiAgICAgIGV4cGVjdChkYXRhLndvcmtmbG93c1swXS5hY3RpdmUpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZGF0YS53b3JrZmxvd3NbMF0udXJpKS50b0JlKCduOG46Ly93b3JrZmxvd3Mvd29ya2Zsb3ctMTIzJyk7XG4gICAgICBleHBlY3QoZGF0YS53b3JrZmxvd3NbMV0uaWQpLnRvQmUoJ3dvcmtmbG93LTQ1NicpO1xuICAgICAgZXhwZWN0KGRhdGEud29ya2Zsb3dzWzFdLmFjdGl2ZSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5tZXRhZGF0YS50b3RhbCkudG9CZSgyKTtcbiAgICAgIGV4cGVjdChkYXRhLnJlc291cmNlSW5mby50eXBlKS50b0JlKCduOG4td29ya2Zsb3ctbGlzdCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgd29ya2Zsb3cgbGlzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGllbnQuZ2V0V29ya2Zsb3dzLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogW10gfSk7XG5cbiAgICAgIGNvbnN0IHJlc291cmNlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2UubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpID09PSAnbjhuOi8vd29ya2Zsb3dzL2xpc3QnXG4gICAgICApO1xuICAgICAgaWYgKCFyZXNvdXJjZUNhbGwpIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UgY2FsbCBub3QgZm91bmQnKTtcbiAgICAgIGNvbnN0IHJlc291cmNlID0gcmVzb3VyY2VDYWxsWzBdO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzb3VyY2UubG9hZCgpO1xuXG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgocmVzdWx0IGFzIGFueSkudGV4dCk7XG4gICAgICBleHBlY3QoZGF0YS53b3JrZmxvd3MpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICAgIGV4cGVjdChkYXRhLm1ldGFkYXRhLnRvdGFsKS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgd29ya2Zsb3cgbGlzdCBBUEkgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudC5nZXRXb3JrZmxvd3MubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdMaXN0IEFQSSBFcnJvcicpKTtcblxuICAgICAgY29uc3QgcmVzb3VyY2VDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmkgPT09ICduOG46Ly93b3JrZmxvd3MvbGlzdCdcbiAgICAgICk7XG4gICAgICBpZiAoIXJlc291cmNlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdSZXNvdXJjZSBjYWxsIG5vdCBmb3VuZCcpO1xuICAgICAgY29uc3QgcmVzb3VyY2UgPSByZXNvdXJjZUNhbGxbMF07XG5cbiAgICAgIGF3YWl0IGV4cGVjdChyZXNvdXJjZS5sb2FkKCkpLnJlamVjdHMudG9UaHJvdygnRmFpbGVkIHRvIGxvYWQgd29ya2Zsb3cgbGlzdDogTGlzdCBBUEkgRXJyb3InKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHdvcmtmbG93cyB3aXRoIG1pc3NpbmcgdGFncycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHdvcmtmbG93c1dpdGhNaXhlZFRhZ3MgPSBbXG4gICAgICAgIHsgLi4ubW9ja1dvcmtmbG93LCB0YWdzOiB1bmRlZmluZWQgfSxcbiAgICAgICAgeyAuLi5tb2NrSW5hY3RpdmVXb3JrZmxvdywgdGFnczogdW5kZWZpbmVkIH0sXG4gICAgICBdO1xuICAgICAgbW9ja0NsaWVudC5nZXRXb3JrZmxvd3MubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiB3b3JrZmxvd3NXaXRoTWl4ZWRUYWdzIH0pO1xuXG4gICAgICBjb25zdCByZXNvdXJjZUNhbGwgPSBtb2NrU2VydmVyLmFkZFJlc291cmNlLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLnVyaSA9PT0gJ244bjovL3dvcmtmbG93cy9saXN0J1xuICAgICAgKTtcbiAgICAgIGlmICghcmVzb3VyY2VDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlIGNhbGwgbm90IGZvdW5kJyk7XG4gICAgICBjb25zdCByZXNvdXJjZSA9IHJlc291cmNlQ2FsbFswXTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc291cmNlLmxvYWQoKTtcblxuICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoKHJlc3VsdCBhcyBhbnkpLnRleHQpO1xuICAgICAgZXhwZWN0KGRhdGEud29ya2Zsb3dzWzBdLnRhZ3MpLnRvRXF1YWwoW10pO1xuICAgICAgZXhwZWN0KGRhdGEud29ya2Zsb3dzWzFdLnRhZ3MpLnRvRXF1YWwoW10pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWN0aXZlIFdvcmtmbG93cyBSZXNvdXJjZScsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIHdvcmtmbG93TWFuYWdlciA9IG5ldyBXb3JrZmxvd1Jlc291cmNlTWFuYWdlcigpO1xuICAgICAgd29ya2Zsb3dNYW5hZ2VyLnJlZ2lzdGVyKG1vY2tTZXJ2ZXIsIGdldENsaWVudEZuKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9hZCBhY3RpdmUgd29ya2Zsb3dzIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGllbnQuZ2V0V29ya2Zsb3dzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogW21vY2tXb3JrZmxvdywgbW9ja0luYWN0aXZlV29ya2Zsb3ddLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc291cmNlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2UubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpID09PSAnbjhuOi8vd29ya2Zsb3dzL2FjdGl2ZSdcbiAgICAgICk7XG4gICAgICBleHBlY3QocmVzb3VyY2VDYWxsKS50b0JlRGVmaW5lZCgpO1xuICAgICAgaWYgKCFyZXNvdXJjZUNhbGwpIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UgY2FsbCBub3QgZm91bmQnKTtcblxuICAgICAgaWYgKCFyZXNvdXJjZUNhbGwpIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UgY2FsbCBub3QgZm91bmQnKTtcbiAgICAgIGNvbnN0IHJlc291cmNlID0gcmVzb3VyY2VDYWxsWzBdO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzb3VyY2UubG9hZCgpO1xuXG4gICAgICBleHBlY3QoKHJlc3VsdCBhcyBhbnkpLnRleHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgocmVzdWx0IGFzIGFueSkudGV4dCk7XG4gICAgICBleHBlY3QoZGF0YS5hY3RpdmVXb3JrZmxvd3MpLnRvSGF2ZUxlbmd0aCgxKTsgLy8gT25seSBhY3RpdmUgd29ya2Zsb3dcbiAgICAgIGV4cGVjdChkYXRhLmFjdGl2ZVdvcmtmbG93c1swXS5pZCkudG9CZSgnd29ya2Zsb3ctMTIzJyk7XG4gICAgICBleHBlY3QoZGF0YS5hY3RpdmVXb3JrZmxvd3NbMF0ubmFtZSkudG9CZSgnVGVzdCBXb3JrZmxvdycpO1xuICAgICAgZXhwZWN0KGRhdGEuYWN0aXZlV29ya2Zsb3dzWzBdLmxhc3RFeGVjdXRpb24pLnRvQmUoJzIwMjMtMDEtMDFUMTI6MDA6MDBaJyk7XG4gICAgICBleHBlY3QoZGF0YS5tZXRhZGF0YS50b3RhbCkudG9CZSgxKTtcbiAgICAgIGV4cGVjdChkYXRhLm1ldGFkYXRhLmFjdGl2ZU9ubHkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZGF0YS5yZXNvdXJjZUluZm8udHlwZSkudG9CZSgnbjhuLWFjdGl2ZS13b3JrZmxvd3MnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5vIGFjdGl2ZSB3b3JrZmxvd3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2xpZW50LmdldFdvcmtmbG93cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IFttb2NrSW5hY3RpdmVXb3JrZmxvd10sIC8vIE9ubHkgaW5hY3RpdmUgd29ya2Zsb3dcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNvdXJjZUNhbGwgPSBtb2NrU2VydmVyLmFkZFJlc291cmNlLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLnVyaSA9PT0gJ244bjovL3dvcmtmbG93cy9hY3RpdmUnXG4gICAgICApO1xuICAgICAgaWYgKCFyZXNvdXJjZUNhbGwpIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UgY2FsbCBub3QgZm91bmQnKTtcbiAgICAgIGNvbnN0IHJlc291cmNlID0gcmVzb3VyY2VDYWxsWzBdO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzb3VyY2UubG9hZCgpO1xuXG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgocmVzdWx0IGFzIGFueSkudGV4dCk7XG4gICAgICBleHBlY3QoZGF0YS5hY3RpdmVXb3JrZmxvd3MpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICAgIGV4cGVjdChkYXRhLm1ldGFkYXRhLnRvdGFsKS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYWN0aXZlIHdvcmtmbG93cyBBUEkgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudC5nZXRXb3JrZmxvd3MubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdBY3RpdmUgQVBJIEVycm9yJykpO1xuXG4gICAgICBjb25zdCByZXNvdXJjZUNhbGwgPSBtb2NrU2VydmVyLmFkZFJlc291cmNlLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLnVyaSA9PT0gJ244bjovL3dvcmtmbG93cy9hY3RpdmUnXG4gICAgICApO1xuICAgICAgaWYgKCFyZXNvdXJjZUNhbGwpIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UgY2FsbCBub3QgZm91bmQnKTtcbiAgICAgIGNvbnN0IHJlc291cmNlID0gcmVzb3VyY2VDYWxsWzBdO1xuXG4gICAgICBhd2FpdCBleHBlY3QocmVzb3VyY2UubG9hZCgpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgICdGYWlsZWQgdG8gbG9hZCBhY3RpdmUgd29ya2Zsb3dzOiBBY3RpdmUgQVBJIEVycm9yJ1xuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1dvcmtmbG93IFN0YXRpc3RpY3MgUmVzb3VyY2UnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICB3b3JrZmxvd01hbmFnZXIgPSBuZXcgV29ya2Zsb3dSZXNvdXJjZU1hbmFnZXIoKTtcbiAgICAgIHdvcmtmbG93TWFuYWdlci5yZWdpc3Rlcihtb2NrU2VydmVyLCBnZXRDbGllbnRGbik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvYWQgd29ya2Zsb3cgc3RhdGlzdGljcyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZWNlbnRXb3JrZmxvdyA9IHtcbiAgICAgICAgLi4ubW9ja1dvcmtmbG93LFxuICAgICAgICBpZDogJ3dvcmtmbG93LTc4OScsXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksIC8vIDEgZGF5IGFnb1xuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSwgLy8gMSBob3VyIGFnb1xuICAgICAgICB0YWdzOiBbJ3Rlc3QnLCAncmVjZW50J10sXG4gICAgICB9O1xuXG4gICAgICBtb2NrQ2xpZW50LmdldFdvcmtmbG93cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IFttb2NrV29ya2Zsb3csIG1vY2tJbmFjdGl2ZVdvcmtmbG93LCByZWNlbnRXb3JrZmxvd10sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzb3VyY2VDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmkgPT09ICduOG46Ly93b3JrZmxvd3Mvc3RhdHMnXG4gICAgICApO1xuICAgICAgZXhwZWN0KHJlc291cmNlQ2FsbCkudG9CZURlZmluZWQoKTtcbiAgICAgIGlmICghcmVzb3VyY2VDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlIGNhbGwgbm90IGZvdW5kJyk7XG5cbiAgICAgIGlmICghcmVzb3VyY2VDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlIGNhbGwgbm90IGZvdW5kJyk7XG4gICAgICBjb25zdCByZXNvdXJjZSA9IHJlc291cmNlQ2FsbFswXTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc291cmNlLmxvYWQoKTtcblxuICAgICAgZXhwZWN0KChyZXN1bHQgYXMgYW55KS50ZXh0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoKHJlc3VsdCBhcyBhbnkpLnRleHQpO1xuICAgICAgZXhwZWN0KGRhdGEudG90YWxXb3JrZmxvd3MpLnRvQmUoMyk7XG4gICAgICBleHBlY3QoZGF0YS5hY3RpdmVXb3JrZmxvd3MpLnRvQmUoMik7IC8vIG1vY2tXb3JrZmxvdyBhbmQgcmVjZW50V29ya2Zsb3cgYXJlIGFjdGl2ZVxuICAgICAgZXhwZWN0KGRhdGEuaW5hY3RpdmVXb3JrZmxvd3MpLnRvQmUoMSk7XG4gICAgICBleHBlY3QoZGF0YS50YWdVc2FnZSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkYXRhLnRhZ1VzYWdlLnRlc3QpLnRvQmUoMik7IC8vIFByZXNlbnQgaW4gbW9ja1dvcmtmbG93IGFuZCByZWNlbnRXb3JrZmxvd1xuICAgICAgZXhwZWN0KGRhdGEudGFnVXNhZ2UuYXV0b21hdGlvbikudG9CZSgxKTtcbiAgICAgIGV4cGVjdChkYXRhLnRhZ1VzYWdlLmRyYWZ0KS50b0JlKDEpO1xuICAgICAgZXhwZWN0KGRhdGEudGFnVXNhZ2UucmVjZW50KS50b0JlKDEpO1xuICAgICAgZXhwZWN0KGRhdGEuY3JlYXRpb25TdGF0cykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkYXRhLmNyZWF0aW9uU3RhdHMuY3JlYXRlZExhc3RXZWVrKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KGRhdGEuY3JlYXRpb25TdGF0cy51cGRhdGVkTGFzdFdlZWspLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QoZGF0YS5yZXNvdXJjZUluZm8udHlwZSkudG9CZSgnbjhuLXdvcmtmbG93LXN0YXRzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSB3b3JrZmxvd3MgZm9yIHN0YXRpc3RpY3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2xpZW50LmdldFdvcmtmbG93cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IFtdIH0pO1xuXG4gICAgICBjb25zdCByZXNvdXJjZUNhbGwgPSBtb2NrU2VydmVyLmFkZFJlc291cmNlLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLnVyaSA9PT0gJ244bjovL3dvcmtmbG93cy9zdGF0cydcbiAgICAgICk7XG4gICAgICBpZiAoIXJlc291cmNlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdSZXNvdXJjZSBjYWxsIG5vdCBmb3VuZCcpO1xuICAgICAgY29uc3QgcmVzb3VyY2UgPSByZXNvdXJjZUNhbGxbMF07XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNvdXJjZS5sb2FkKCk7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKChyZXN1bHQgYXMgYW55KS50ZXh0KTtcbiAgICAgIGV4cGVjdChkYXRhLnRvdGFsV29ya2Zsb3dzKS50b0JlKDApO1xuICAgICAgZXhwZWN0KGRhdGEuYWN0aXZlV29ya2Zsb3dzKS50b0JlKDApO1xuICAgICAgZXhwZWN0KGRhdGEuaW5hY3RpdmVXb3JrZmxvd3MpLnRvQmUoMCk7XG4gICAgICBleHBlY3QoZGF0YS50YWdVc2FnZSkudG9FcXVhbCh7fSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzdGF0cyBBUEkgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudC5nZXRXb3JrZmxvd3MubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdTdGF0cyBBUEkgRXJyb3InKSk7XG5cbiAgICAgIGNvbnN0IHJlc291cmNlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2UubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpID09PSAnbjhuOi8vd29ya2Zsb3dzL3N0YXRzJ1xuICAgICAgKTtcbiAgICAgIGlmICghcmVzb3VyY2VDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlIGNhbGwgbm90IGZvdW5kJyk7XG4gICAgICBjb25zdCByZXNvdXJjZSA9IHJlc291cmNlQ2FsbFswXTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHJlc291cmNlLmxvYWQoKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAnRmFpbGVkIHRvIGxvYWQgd29ya2Zsb3cgc3RhdGlzdGljczogU3RhdHMgQVBJIEVycm9yJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHdvcmtmbG93cyB3aXRoIHN0cmluZyB0YWdzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgd29ya2Zsb3dXaXRoU3RyaW5nVGFncyA9IHtcbiAgICAgICAgLi4ubW9ja1dvcmtmbG93LFxuICAgICAgICB0YWdzOiBbJ3N0cmluZy10YWctMScsICdzdHJpbmctdGFnLTInXSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tDbGllbnQuZ2V0V29ya2Zsb3dzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogW3dvcmtmbG93V2l0aFN0cmluZ1RhZ3NdLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc291cmNlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2UubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpID09PSAnbjhuOi8vd29ya2Zsb3dzL3N0YXRzJ1xuICAgICAgKTtcbiAgICAgIGlmICghcmVzb3VyY2VDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlIGNhbGwgbm90IGZvdW5kJyk7XG4gICAgICBjb25zdCByZXNvdXJjZSA9IHJlc291cmNlQ2FsbFswXTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc291cmNlLmxvYWQoKTtcblxuICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoKHJlc3VsdCBhcyBhbnkpLnRleHQpO1xuICAgICAgZXhwZWN0KGRhdGEudGFnVXNhZ2VbJ3N0cmluZy10YWctMSddKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KGRhdGEudGFnVXNhZ2VbJ3N0cmluZy10YWctMiddKS50b0JlKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgd29ya2Zsb3dzIHdpdGggbWl4ZWQgdGFnIGZvcm1hdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB3b3JrZmxvd1dpdGhNaXhlZFRhZ3MgPSB7XG4gICAgICAgIC4uLm1vY2tXb3JrZmxvdyxcbiAgICAgICAgdGFnczogWydvYmplY3QtdGFnJywgJ3N0cmluZy10YWcnXSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tDbGllbnQuZ2V0V29ya2Zsb3dzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogW3dvcmtmbG93V2l0aE1peGVkVGFnc10sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzb3VyY2VDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmkgPT09ICduOG46Ly93b3JrZmxvd3Mvc3RhdHMnXG4gICAgICApO1xuICAgICAgaWYgKCFyZXNvdXJjZUNhbGwpIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UgY2FsbCBub3QgZm91bmQnKTtcbiAgICAgIGNvbnN0IHJlc291cmNlID0gcmVzb3VyY2VDYWxsWzBdO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzb3VyY2UubG9hZCgpO1xuXG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgocmVzdWx0IGFzIGFueSkudGV4dCk7XG4gICAgICBleHBlY3QoZGF0YS50YWdVc2FnZVsnb2JqZWN0LXRhZyddKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KGRhdGEudGFnVXNhZ2VbJ3N0cmluZy10YWcnXSkudG9CZSgxKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NhY2hlIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICB3b3JrZmxvd01hbmFnZXIgPSBuZXcgV29ya2Zsb3dSZXNvdXJjZU1hbmFnZXIoeyBjYWNoZUR1cmF0aW9uOiAxMDAwIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWNoZSB3b3JrZmxvdyBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgd29ya2Zsb3dNYW5hZ2VyLnJlZ2lzdGVyKG1vY2tTZXJ2ZXIsIGdldENsaWVudEZuKTtcbiAgICAgIG1vY2tDbGllbnQuZ2V0V29ya2Zsb3cubW9ja1Jlc29sdmVkVmFsdWUobW9ja1dvcmtmbG93KTtcblxuICAgICAgY29uc3QgdGVtcGxhdGVDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZVRlbXBsYXRlLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLnVyaVRlbXBsYXRlID09PSAnbjhuOi8vd29ya2Zsb3dzL3tpZH0nXG4gICAgICApO1xuICAgICAgaWYgKCF0ZW1wbGF0ZUNhbGwpIHRocm93IG5ldyBFcnJvcignVGVtcGxhdGUgY2FsbCBub3QgZm91bmQnKTtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGVtcGxhdGVDYWxsWzBdO1xuXG4gICAgICAvLyBGaXJzdCBjYWxsXG4gICAgICBhd2FpdCB0ZW1wbGF0ZS5sb2FkKHsgaWQ6ICd3b3JrZmxvdy0xMjMnIH0pO1xuICAgICAgZXhwZWN0KG1vY2tDbGllbnQuZ2V0V29ya2Zsb3cpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcblxuICAgICAgLy8gU2Vjb25kIGNhbGwgc2hvdWxkIHVzZSBjYWNoZVxuICAgICAgYXdhaXQgdGVtcGxhdGUubG9hZCh7IGlkOiAnd29ya2Zsb3ctMTIzJyB9KTtcbiAgICAgIGV4cGVjdChtb2NrQ2xpZW50LmdldFdvcmtmbG93KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNhY2hlIHdvcmtmbG93IGxpc3QgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIHdvcmtmbG93TWFuYWdlci5yZWdpc3Rlcihtb2NrU2VydmVyLCBnZXRDbGllbnRGbik7XG4gICAgICBtb2NrQ2xpZW50LmdldFdvcmtmbG93cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IFttb2NrV29ya2Zsb3ddLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc291cmNlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2UubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpID09PSAnbjhuOi8vd29ya2Zsb3dzL2xpc3QnXG4gICAgICApO1xuICAgICAgaWYgKCFyZXNvdXJjZUNhbGwpIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UgY2FsbCBub3QgZm91bmQnKTtcbiAgICAgIGNvbnN0IHJlc291cmNlID0gcmVzb3VyY2VDYWxsWzBdO1xuXG4gICAgICAvLyBGaXJzdCBjYWxsXG4gICAgICBhd2FpdCByZXNvdXJjZS5sb2FkKCk7XG4gICAgICBleHBlY3QobW9ja0NsaWVudC5nZXRXb3JrZmxvd3MpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcblxuICAgICAgLy8gU2Vjb25kIGNhbGwgc2hvdWxkIHVzZSBjYWNoZVxuICAgICAgYXdhaXQgcmVzb3VyY2UubG9hZCgpO1xuICAgICAgZXhwZWN0KG1vY2tDbGllbnQuZ2V0V29ya2Zsb3dzKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNsZWFyIGNhY2hlJywgKCkgPT4ge1xuICAgICAgd29ya2Zsb3dNYW5hZ2VyLmNsZWFyQ2FjaGUoKTtcbiAgICAgIC8vIFNob3VsZCBub3QgdGhyb3dcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2V0IGNhY2hlIHN0YXRpc3RpY3MnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzdGF0cyA9IHdvcmtmbG93TWFuYWdlci5nZXRDYWNoZVN0YXRzKCk7XG4gICAgICBleHBlY3Qoc3RhdHMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QodHlwZW9mIHN0YXRzLnNpemUpLnRvQmUoJ251bWJlcicpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoc3RhdHMua2V5cykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBjYWNoZSB3aGVuIGR1cmF0aW9uIGlzIDAnLCAoKSA9PiB7XG4gICAgICB3b3JrZmxvd01hbmFnZXIgPSBuZXcgV29ya2Zsb3dSZXNvdXJjZU1hbmFnZXIoeyBjYWNoZUR1cmF0aW9uOiAwIH0pO1xuICAgICAgd29ya2Zsb3dNYW5hZ2VyLnJlZ2lzdGVyKG1vY2tTZXJ2ZXIsIGdldENsaWVudEZuKTtcbiAgICAgIG1vY2tDbGllbnQuZ2V0V29ya2Zsb3cubW9ja1Jlc29sdmVkVmFsdWUobW9ja1dvcmtmbG93KTtcblxuICAgICAgY29uc3QgdGVtcGxhdGVDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZVRlbXBsYXRlLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLnVyaVRlbXBsYXRlID09PSAnbjhuOi8vd29ya2Zsb3dzL3tpZH0nXG4gICAgICApO1xuICAgICAgaWYgKCF0ZW1wbGF0ZUNhbGwpIHRocm93IG5ldyBFcnJvcignVGVtcGxhdGUgY2FsbCBub3QgZm91bmQnKTtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGVtcGxhdGVDYWxsWzBdO1xuXG4gICAgICByZXR1cm4gdGVtcGxhdGVcbiAgICAgICAgLmxvYWQoeyBpZDogJ3dvcmtmbG93LTEyMycgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZS5sb2FkKHsgaWQ6ICd3b3JrZmxvdy0xMjMnIH0pO1xuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgZXhwZWN0KG1vY2tDbGllbnQuZ2V0V29ya2Zsb3cpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjYWNoZSBleHBpcmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC51c2VGYWtlVGltZXJzKCk7XG5cbiAgICAgIHdvcmtmbG93TWFuYWdlciA9IG5ldyBXb3JrZmxvd1Jlc291cmNlTWFuYWdlcih7IGNhY2hlRHVyYXRpb246IDEgfSk7IC8vIDFtcyBjYWNoZVxuICAgICAgd29ya2Zsb3dNYW5hZ2VyLnJlZ2lzdGVyKG1vY2tTZXJ2ZXIsIGdldENsaWVudEZuKTtcbiAgICAgIG1vY2tDbGllbnQuZ2V0V29ya2Zsb3cubW9ja1Jlc29sdmVkVmFsdWUobW9ja1dvcmtmbG93KTtcblxuICAgICAgY29uc3QgdGVtcGxhdGVDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZVRlbXBsYXRlLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLnVyaVRlbXBsYXRlID09PSAnbjhuOi8vd29ya2Zsb3dzL3tpZH0nXG4gICAgICApO1xuICAgICAgaWYgKCF0ZW1wbGF0ZUNhbGwpIHRocm93IG5ldyBFcnJvcignVGVtcGxhdGUgY2FsbCBub3QgZm91bmQnKTtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGVtcGxhdGVDYWxsWzBdO1xuXG4gICAgICAvLyBGaXJzdCBjYWxsXG4gICAgICBhd2FpdCB0ZW1wbGF0ZS5sb2FkKHsgaWQ6ICd3b3JrZmxvdy0xMjMnIH0pO1xuICAgICAgZXhwZWN0KG1vY2tDbGllbnQuZ2V0V29ya2Zsb3cpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcblxuICAgICAgLy8gRmFzdC1mb3J3YXJkIHRpbWUgdG8gZXhwaXJlIGNhY2hlXG4gICAgICBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWUoMTApO1xuXG4gICAgICAvLyBTZWNvbmQgY2FsbCBzaG91bGQgbm90IHVzZSBleHBpcmVkIGNhY2hlXG4gICAgICBhd2FpdCB0ZW1wbGF0ZS5sb2FkKHsgaWQ6ICd3b3JrZmxvdy0xMjMnIH0pO1xuICAgICAgZXhwZWN0KG1vY2tDbGllbnQuZ2V0V29ya2Zsb3cpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcblxuICAgICAgamVzdC51c2VSZWFsVGltZXJzKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGYWN0b3J5IEZ1bmN0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIHdvcmtmbG93IHJlc291cmNlIG1hbmFnZXIgd2l0aCBmYWN0b3J5IGZ1bmN0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWFuYWdlciA9IGNyZWF0ZVdvcmtmbG93UmVzb3VyY2VzKCk7XG4gICAgICBleHBlY3QobWFuYWdlcikudG9CZUluc3RhbmNlT2YoV29ya2Zsb3dSZXNvdXJjZU1hbmFnZXIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgd29ya2Zsb3cgcmVzb3VyY2UgbWFuYWdlciB3aXRoIGNvbmZpZyB2aWEgZmFjdG9yeScsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHsgbWF4V29ya2Zsb3dzOiA1MCwgaW5jbHVkZUluYWN0aXZlOiBmYWxzZSB9O1xuICAgICAgY29uc3QgbWFuYWdlciA9IGNyZWF0ZVdvcmtmbG93UmVzb3VyY2VzKGNvbmZpZyk7XG4gICAgICBleHBlY3QobWFuYWdlcikudG9CZUluc3RhbmNlT2YoV29ya2Zsb3dSZXNvdXJjZU1hbmFnZXIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVGFnIFVzYWdlIENhbGN1bGF0aW9uJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgd29ya2Zsb3dNYW5hZ2VyID0gbmV3IFdvcmtmbG93UmVzb3VyY2VNYW5hZ2VyKCk7XG4gICAgICB3b3JrZmxvd01hbmFnZXIucmVnaXN0ZXIobW9ja1NlcnZlciwgZ2V0Q2xpZW50Rm4pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgdGFnIHVzYWdlIGNvcnJlY3RseSB3aXRoIG9iamVjdCB0YWdzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgd29ya2Zsb3dzV2l0aE9iamVjdFRhZ3MgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAuLi5tb2NrV29ya2Zsb3csXG4gICAgICAgICAgdGFnczogWydwcm9kdWN0aW9uJywgJ2FwaSddLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgLi4ubW9ja0luYWN0aXZlV29ya2Zsb3csXG4gICAgICAgICAgdGFnczogWydwcm9kdWN0aW9uJywgJ3dlYmhvb2snXSxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIG1vY2tDbGllbnQuZ2V0V29ya2Zsb3dzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogd29ya2Zsb3dzV2l0aE9iamVjdFRhZ3MsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzb3VyY2VDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmkgPT09ICduOG46Ly93b3JrZmxvd3Mvc3RhdHMnXG4gICAgICApO1xuICAgICAgaWYgKCFyZXNvdXJjZUNhbGwpIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UgY2FsbCBub3QgZm91bmQnKTtcbiAgICAgIGNvbnN0IHJlc291cmNlID0gcmVzb3VyY2VDYWxsWzBdO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzb3VyY2UubG9hZCgpO1xuXG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgocmVzdWx0IGFzIGFueSkudGV4dCk7XG4gICAgICBleHBlY3QoZGF0YS50YWdVc2FnZS5wcm9kdWN0aW9uKS50b0JlKDIpO1xuICAgICAgZXhwZWN0KGRhdGEudGFnVXNhZ2UuYXBpKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KGRhdGEudGFnVXNhZ2Uud2ViaG9vaykudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHdvcmtmbG93cyB3aXRoIG5vIHRhZ3MgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHdvcmtmbG93c1dpdGhOb1RhZ3MgPSBbXG4gICAgICAgIHsgLi4ubW9ja1dvcmtmbG93LCB0YWdzOiB1bmRlZmluZWQgfSxcbiAgICAgICAgeyAuLi5tb2NrSW5hY3RpdmVXb3JrZmxvdywgdGFnczogdW5kZWZpbmVkIH0sXG4gICAgICAgIHsgLi4ubW9ja1dvcmtmbG93LCBpZDogJ3dvcmtmbG93LTc4OScsIHRhZ3M6IFtdIH0sXG4gICAgICBdO1xuXG4gICAgICBtb2NrQ2xpZW50LmdldFdvcmtmbG93cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHdvcmtmbG93c1dpdGhOb1RhZ3MsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzb3VyY2VDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmkgPT09ICduOG46Ly93b3JrZmxvd3Mvc3RhdHMnXG4gICAgICApO1xuICAgICAgaWYgKCFyZXNvdXJjZUNhbGwpIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UgY2FsbCBub3QgZm91bmQnKTtcbiAgICAgIGNvbnN0IHJlc291cmNlID0gcmVzb3VyY2VDYWxsWzBdO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzb3VyY2UubG9hZCgpO1xuXG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgocmVzdWx0IGFzIGFueSkudGV4dCk7XG4gICAgICBleHBlY3QoZGF0YS50YWdVc2FnZSkudG9FcXVhbCh7fSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB3b3JrZmxvd3Mgd2l0aCBub24tYXJyYXkgdGFncycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHdvcmtmbG93c1dpdGhJbnZhbGlkVGFncyA9IFtcbiAgICAgICAgeyAuLi5tb2NrV29ya2Zsb3csIHRhZ3M6ICdpbnZhbGlkJyBhcyBhbnkgfSxcbiAgICAgICAgeyAuLi5tb2NrSW5hY3RpdmVXb3JrZmxvdywgdGFnczogeyBpbnZhbGlkOiB0cnVlIH0gYXMgYW55IH0sXG4gICAgICBdO1xuXG4gICAgICBtb2NrQ2xpZW50LmdldFdvcmtmbG93cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHdvcmtmbG93c1dpdGhJbnZhbGlkVGFncyxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNvdXJjZUNhbGwgPSBtb2NrU2VydmVyLmFkZFJlc291cmNlLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLnVyaSA9PT0gJ244bjovL3dvcmtmbG93cy9zdGF0cydcbiAgICAgICk7XG4gICAgICBpZiAoIXJlc291cmNlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdSZXNvdXJjZSBjYWxsIG5vdCBmb3VuZCcpO1xuICAgICAgY29uc3QgcmVzb3VyY2UgPSByZXNvdXJjZUNhbGxbMF07XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNvdXJjZS5sb2FkKCk7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKChyZXN1bHQgYXMgYW55KS50ZXh0KTtcbiAgICAgIGV4cGVjdChkYXRhLnRhZ1VzYWdlKS50b0VxdWFsKHt9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NyZWF0aW9uIFN0YXRpc3RpY3MnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICB3b3JrZmxvd01hbmFnZXIgPSBuZXcgV29ya2Zsb3dSZXNvdXJjZU1hbmFnZXIoKTtcbiAgICAgIHdvcmtmbG93TWFuYWdlci5yZWdpc3Rlcihtb2NrU2VydmVyLCBnZXRDbGllbnRGbik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBjcmVhdGlvbiBzdGF0aXN0aWNzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICBjb25zdCBvbmVEYXlBZ28gPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpIC0gMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgICBjb25zdCBvbmVXZWVrQWdvID0gbmV3IERhdGUobm93LmdldFRpbWUoKSAtIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICAgIGNvbnN0IG9uZU1vbnRoQWdvID0gbmV3IERhdGUobm93LmdldFRpbWUoKSAtIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG5cbiAgICAgIGNvbnN0IHdvcmtmbG93c1dpdGhEaWZmZXJlbnREYXRlcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIC4uLm1vY2tXb3JrZmxvdyxcbiAgICAgICAgICBjcmVhdGVkQXQ6IG9uZURheUFnby50b0lTT1N0cmluZygpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogb25lRGF5QWdvLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAuLi5tb2NrSW5hY3RpdmVXb3JrZmxvdyxcbiAgICAgICAgICBjcmVhdGVkQXQ6IG9uZVdlZWtBZ28udG9JU09TdHJpbmcoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IG9uZURheUFnby50b0lTT1N0cmluZygpLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgLi4ubW9ja1dvcmtmbG93LFxuICAgICAgICAgIGlkOiAnd29ya2Zsb3ctNzg5JyxcbiAgICAgICAgICBjcmVhdGVkQXQ6IG9uZU1vbnRoQWdvLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgdXBkYXRlZEF0OiBvbmVNb250aEFnby50b0lTT1N0cmluZygpLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgbW9ja0NsaWVudC5nZXRXb3JrZmxvd3MubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB3b3JrZmxvd3NXaXRoRGlmZmVyZW50RGF0ZXMsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzb3VyY2VDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmkgPT09ICduOG46Ly93b3JrZmxvd3Mvc3RhdHMnXG4gICAgICApO1xuICAgICAgaWYgKCFyZXNvdXJjZUNhbGwpIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UgY2FsbCBub3QgZm91bmQnKTtcbiAgICAgIGNvbnN0IHJlc291cmNlID0gcmVzb3VyY2VDYWxsWzBdO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzb3VyY2UubG9hZCgpO1xuXG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgocmVzdWx0IGFzIGFueSkudGV4dCk7XG4gICAgICBleHBlY3QoZGF0YS5jcmVhdGlvblN0YXRzLmNyZWF0ZWRMYXN0V2VlaykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgxKTtcbiAgICAgIGV4cGVjdChkYXRhLmNyZWF0aW9uU3RhdHMuY3JlYXRlZExhc3RNb250aCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgxKTtcbiAgICAgIGV4cGVjdChkYXRhLmNyZWF0aW9uU3RhdHMudXBkYXRlZExhc3RXZWVrKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDIpO1xuICAgICAgZXhwZWN0KGRhdGEuY3JlYXRpb25TdGF0cy51cGRhdGVkTGFzdE1vbnRoKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCBkYXRlIGZvcm1hdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB3b3JrZmxvd3NXaXRoSW52YWxpZERhdGVzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgLi4ubW9ja1dvcmtmbG93LFxuICAgICAgICAgIGNyZWF0ZWRBdDogJ2ludmFsaWQtZGF0ZScsXG4gICAgICAgICAgdXBkYXRlZEF0OiB1bmRlZmluZWQsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBtb2NrQ2xpZW50LmdldFdvcmtmbG93cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHdvcmtmbG93c1dpdGhJbnZhbGlkRGF0ZXMsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzb3VyY2VDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmkgPT09ICduOG46Ly93b3JrZmxvd3Mvc3RhdHMnXG4gICAgICApO1xuICAgICAgaWYgKCFyZXNvdXJjZUNhbGwpIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UgY2FsbCBub3QgZm91bmQnKTtcbiAgICAgIGNvbnN0IHJlc291cmNlID0gcmVzb3VyY2VDYWxsWzBdO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzb3VyY2UubG9hZCgpO1xuXG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgocmVzdWx0IGFzIGFueSkudGV4dCk7XG4gICAgICBleHBlY3QoZGF0YS5jcmVhdGlvblN0YXRzLmNyZWF0ZWRMYXN0V2VlaykudG9CZSgwKTtcbiAgICAgIGV4cGVjdChkYXRhLmNyZWF0aW9uU3RhdHMudXBkYXRlZExhc3RXZWVrKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRWRnZSBDYXNlcyBhbmQgRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICB3b3JrZmxvd01hbmFnZXIgPSBuZXcgV29ya2Zsb3dSZXNvdXJjZU1hbmFnZXIoKTtcbiAgICAgIHdvcmtmbG93TWFuYWdlci5yZWdpc3Rlcihtb2NrU2VydmVyLCBnZXRDbGllbnRGbik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBub24tRXJyb3IgZXhjZXB0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGllbnQuZ2V0V29ya2Zsb3cubW9ja1JlamVjdGVkVmFsdWUoJ1N0cmluZyBlcnJvcicpO1xuXG4gICAgICBjb25zdCB0ZW1wbGF0ZUNhbGwgPSBtb2NrU2VydmVyLmFkZFJlc291cmNlVGVtcGxhdGUubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpVGVtcGxhdGUgPT09ICduOG46Ly93b3JrZmxvd3Mve2lkfSdcbiAgICAgICk7XG4gICAgICBpZiAoIXRlbXBsYXRlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdUZW1wbGF0ZSBjYWxsIG5vdCBmb3VuZCcpO1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSB0ZW1wbGF0ZUNhbGxbMF07XG5cbiAgICAgIGF3YWl0IGV4cGVjdCh0ZW1wbGF0ZS5sb2FkKHsgaWQ6ICd3b3JrZmxvdy0xMjMnIH0pKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgICdGYWlsZWQgdG8gbG9hZCB3b3JrZmxvdyB3b3JrZmxvdy0xMjM6IFN0cmluZyBlcnJvcidcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtYWxmb3JtZWQgd29ya2Zsb3cgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1hbGZvcm1lZFdvcmtmbG93ID0ge1xuICAgICAgICBpZDogJ3dvcmtmbG93LTEyMycsXG4gICAgICAgIC8vIE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzXG4gICAgICAgIG5hbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgYWN0aXZlOiB1bmRlZmluZWQsXG4gICAgICAgIG5vZGVzOiBbXSBhcyBBcnJheTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4sXG4gICAgICAgIGNvbm5lY3Rpb25zOiB7fSxcbiAgICAgIH07XG4gICAgICBtb2NrQ2xpZW50LmdldFdvcmtmbG93Lm1vY2tSZXNvbHZlZFZhbHVlKG1hbGZvcm1lZFdvcmtmbG93IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2VUZW1wbGF0ZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmlUZW1wbGF0ZSA9PT0gJ244bjovL3dvcmtmbG93cy97aWR9J1xuICAgICAgKTtcbiAgICAgIGlmICghdGVtcGxhdGVDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1RlbXBsYXRlIGNhbGwgbm90IGZvdW5kJyk7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ2FsbFswXTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRlbXBsYXRlLmxvYWQoeyBpZDogJ3dvcmtmbG93LTEyMycgfSk7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKChyZXN1bHQgYXMgYW55KS50ZXh0KTtcbiAgICAgIGV4cGVjdChkYXRhLmlkKS50b0JlKCd3b3JrZmxvdy0xMjMnKTtcbiAgICAgIGV4cGVjdChkYXRhLm1ldGFkYXRhLnRhZ3MpLnRvRXF1YWwoW10pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgd29ya2Zsb3dzIHdpdGggY29tcGxleCBjb25uZWN0aW9uIG9iamVjdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB3b3JrZmxvd1dpdGhDb21wbGV4Q29ubmVjdGlvbnMgPSB7XG4gICAgICAgIC4uLm1vY2tXb3JrZmxvdyxcbiAgICAgICAgY29ubmVjdGlvbnM6IHtcbiAgICAgICAgICAnSFRUUCBSZXF1ZXN0Jzoge1xuICAgICAgICAgICAgbWFpbjogW1xuICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgeyBub2RlOiAnQ29kZScsIHR5cGU6ICdtYWluJywgaW5kZXg6IDAgfSxcbiAgICAgICAgICAgICAgICB7IG5vZGU6ICdBbm90aGVyIE5vZGUnLCB0eXBlOiAnbWFpbicsIGluZGV4OiAxIH0sXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgc2Vjb25kYXJ5OiBbW3sgbm9kZTogJ0Vycm9yIEhhbmRsZXInLCB0eXBlOiAnbWFpbicsIGluZGV4OiAwIH1dXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIENvZGU6IHtcbiAgICAgICAgICAgIG1haW46IFtbeyBub2RlOiAnRmluYWwgTm9kZScsIHR5cGU6ICdtYWluJywgaW5kZXg6IDAgfV1dLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgICAgbW9ja0NsaWVudC5nZXRXb3JrZmxvdy5tb2NrUmVzb2x2ZWRWYWx1ZSh3b3JrZmxvd1dpdGhDb21wbGV4Q29ubmVjdGlvbnMpO1xuXG4gICAgICBjb25zdCB0ZW1wbGF0ZUNhbGwgPSBtb2NrU2VydmVyLmFkZFJlc291cmNlVGVtcGxhdGUubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpVGVtcGxhdGUgPT09ICduOG46Ly93b3JrZmxvd3Mve2lkfSdcbiAgICAgICk7XG4gICAgICBpZiAoIXRlbXBsYXRlQ2FsbCkgdGhyb3cgbmV3IEVycm9yKCdUZW1wbGF0ZSBjYWxsIG5vdCBmb3VuZCcpO1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSB0ZW1wbGF0ZUNhbGxbMF07XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0ZW1wbGF0ZS5sb2FkKHsgaWQ6ICd3b3JrZmxvdy0xMjMnIH0pO1xuXG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgocmVzdWx0IGFzIGFueSkudGV4dCk7XG4gICAgICBleHBlY3QoZGF0YS5tZXRhZGF0YS5jb25uZWN0aW9uQ291bnQpLnRvQmUoMik7IC8vIEhUVFAgUmVxdWVzdCBhbmQgQ29kZSBoYXZlIGNvbm5lY3Rpb25zXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSB3b3JrZmxvdyBsaXN0IGdyYWNlZnVsbHkgaW4gYWxsIHJlc291cmNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGllbnQuZ2V0V29ya2Zsb3dzLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogW10gfSk7XG5cbiAgICAgIC8vIFRlc3QgbGlzdCByZXNvdXJjZVxuICAgICAgY29uc3QgbGlzdFJlc291cmNlQ2FsbCA9IG1vY2tTZXJ2ZXIuYWRkUmVzb3VyY2UubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0udXJpID09PSAnbjhuOi8vd29ya2Zsb3dzL2xpc3QnXG4gICAgICApO1xuICAgICAgaWYgKCFsaXN0UmVzb3VyY2VDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ0xpc3QgcmVzb3VyY2UgY2FsbCBub3QgZm91bmQnKTtcbiAgICAgIGNvbnN0IGxpc3RSZXNvdXJjZSA9IGxpc3RSZXNvdXJjZUNhbGxbMF07XG4gICAgICBjb25zdCBsaXN0UmVzdWx0ID0gYXdhaXQgbGlzdFJlc291cmNlLmxvYWQoKTtcbiAgICAgIGNvbnN0IGxpc3REYXRhID0gSlNPTi5wYXJzZSgobGlzdFJlc3VsdCBhcyBhbnkpLnRleHQpO1xuICAgICAgZXhwZWN0KGxpc3REYXRhLndvcmtmbG93cykudG9IYXZlTGVuZ3RoKDApO1xuXG4gICAgICAvLyBUZXN0IGFjdGl2ZSByZXNvdXJjZVxuICAgICAgY29uc3QgYWN0aXZlUmVzb3VyY2VDYWxsID0gbW9ja1NlcnZlci5hZGRSZXNvdXJjZS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS51cmkgPT09ICduOG46Ly93b3JrZmxvd3MvYWN0aXZlJ1xuICAgICAgKTtcbiAgICAgIGlmICghYWN0aXZlUmVzb3VyY2VDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ0FjdGl2ZSByZXNvdXJjZSBjYWxsIG5vdCBmb3VuZCcpO1xuICAgICAgY29uc3QgYWN0aXZlUmVzb3VyY2UgPSBhY3RpdmVSZXNvdXJjZUNhbGxbMF07XG4gICAgICBjb25zdCBhY3RpdmVSZXN1bHQgPSBhd2FpdCBhY3RpdmVSZXNvdXJjZS5sb2FkKCk7XG4gICAgICBjb25zdCBhY3RpdmVEYXRhID0gSlNPTi5wYXJzZSgoYWN0aXZlUmVzdWx0IGFzIGFueSkudGV4dCk7XG4gICAgICBleHBlY3QoYWN0aXZlRGF0YS5hY3RpdmVXb3JrZmxvd3MpLnRvSGF2ZUxlbmd0aCgwKTtcblxuICAgICAgLy8gVGVzdCBzdGF0cyByZXNvdXJjZVxuICAgICAgY29uc3Qgc3RhdHNSZXNvdXJjZUNhbGwgPSBtb2NrU2VydmVyLmFkZFJlc291cmNlLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLnVyaSA9PT0gJ244bjovL3dvcmtmbG93cy9zdGF0cydcbiAgICAgICk7XG4gICAgICBpZiAoIXN0YXRzUmVzb3VyY2VDYWxsKSB0aHJvdyBuZXcgRXJyb3IoJ1N0YXRzIHJlc291cmNlIGNhbGwgbm90IGZvdW5kJyk7XG4gICAgICBjb25zdCBzdGF0c1Jlc291cmNlID0gc3RhdHNSZXNvdXJjZUNhbGxbMF07XG4gICAgICBjb25zdCBzdGF0c1Jlc3VsdCA9IGF3YWl0IHN0YXRzUmVzb3VyY2UubG9hZCgpO1xuICAgICAgY29uc3Qgc3RhdHNEYXRhID0gSlNPTi5wYXJzZSgoc3RhdHNSZXN1bHQgYXMgYW55KS50ZXh0KTtcbiAgICAgIGV4cGVjdChzdGF0c0RhdGEudG90YWxXb3JrZmxvd3MpLnRvQmUoMCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=